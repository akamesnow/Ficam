[POST_VERSION] #DO NOT MOVE OR ALTER THIS LINE# V21.00 P0 E1 W21.00 T1530173115 M21.00 I0 O0
# ------------------------------------------------------------------------------------------
# -   Post pro TOURNAGE & FRAISAGE
# -      BI BROCHE MONO TOURELLE
# -           Version 1.0
# ------------------------------------------------------------------------------------------
# -     MASTERCAM VX4 F.I.CAM
# ------------------------------------------------------------------------------------------
# - Realise le      : 20/10/07  Par : VM ET ED
# - Pour la societe : SOVAIC
# - Armoire CN      : MATRIX
# - Nom MACHINE     : MAZAK INTEGREX E 800 V
# - -----------------------------------------------------------------------------------------
# - Option 5 axes continue  diagnos - info version - option 23 (en noir) (sinon arreter la broche fraisage a chaque rotation B)
# - Option iso          diagnos - info version - option 2  (en noir)
# - Option taraudage synchro    diagnos - info version - option 11 (en noir)
# - Option axeC continue sur deuxieme broche diagnos - info version - option 36 (en noir)
# ---------------------------------------------------------------------------------------------
# - Fichier associe : .txt
# ----------------------------------------
# - Contact Mazak : Mr PAULMIER CYRILLE  paulmier@mazak.fr 0609366552
#
# -   DESCRIPTION DES MODIFICATIONS      -
#  tlchng_aft  : 1     #Delay call to toolchange until move line
# dev 5 axes continue par eric le 8 mai 2006
# MODIF POUR SOVAIC POUR INTEGRATION SUR UNE INTEGREX 800 E
# le 10-06-15   : activation du "D" avec la correction de rayon FS
# le 10-06-15   : ajout pour la correction de rayon 5 axes  FS
# ----------------------------------------

sextnc$ : "EIA"
sextext$ : "EIA"

fastmode$  : 1
bug1$      : 2         # 1 = Output post to screen - 2 = output leader to screen
bug2$      : 60        # Add postline label to each line at column 'bug2'
#CNC<<ECHEC>>bug3$      : 50        # Add whatline to each line
#CNC<<MSG -ERREUR(37)>> The variable, postblock, or other keyword is no longer supported
bug4$      : 40        # Add -.nci line no. to each line? yes/no
whatno$    : yes$      # Ignore whatline branches to plin1 etc.?
skp_lead_flgs$ : 1     #NE PAS utiliser les flags de contour style V9+ ?
linktolvar$    : 1     #Associer les variables de tolerance X aux variables V9-
linkplnvar$    : 1     #Associer les variables specifiques plan X aux variables V9-?
linklvar$      : 1     #Associer les variables specifiques X Tournage aux variables V9-
cant_tlchng$   : 1     #Ignorer entree de texte programme au changement avec tlchng_aft?
newglobal$     : 0     #Activer la verification d'erreur pour les variables globales?
vtol$      : 0.002     # erreur de corde en substitution d'axe
brklineslen$ : 1        # longueur de coupe


enR : 0


#-------------------------- DECLARATION DES FORMATS -------------------------
fs  1  1.3
fs  2  1.3n
fs  3  1 0
fs  4  1 0n
fs  5  4.4ltn
fs  6  0 2t
fs  7  1.5t
fs  8  6 0ln
fs  9  8 0ln


# pour filletages

fs 10  2 0ln
fs 11  0 3tn
fs 12  2.4ltn
fs 13  2.2lt
fs 15  1.9ltn

fs 16  1.4ln
fs 17  0 3tn

# ---------------- AFFECTATION DES VARIABLES --------------------------


fmt      1 old_op_id        # memo de l'operation en cours
fmt      1 last_op_id       # derniere operation
fmt "OPERATION " 2 operation    # numero de l'operation en imcremental pour liste des op
operation : 1           # init de la variable

#--------------------------- AFFECTATION FORMATS ----------------------------

fmt "P" 17 dwell$        # tempo pour cycle

fmt "G4 F" 1 temporisation  # tempo pour usinage
temporisation = dwell$



#----------- LES XYZ IJK R ------------------------
fmt  "xr" 2 xr$
fmt  "yr" 2 yr$
fmt  "zr" 2 zr$

fmt  "Xo" 15 x$    # x
fmt  "Yo" 15 y$    # y
fmt  "Zo" 15 z$    # z

fmt  "Uo" 15 u$    # x
fmt  "Vo" 15 v$    # y
fmt  "Wo" 15 w$    # z

fmt  "I" 2 i$
fmt  "K" 2 j$
fmt     2 enR       # flag pour ecrire en R ou IJ
fmt  "R" 16 arcrad$  # rayon pour G2 G3


fmt  "X" 1 old_x    # memo x
fmt  "Y" 1 old_y    # memo y
fmt  "Z" 1 old_z    # memo z

fmt  "X" 1 x2       # x en tournage
fmt  "Z" 1 zt       # z en tournage


fmt  "B" 1 Bmch
fmt  "B" 1 old_Bmch


stringC : "C"
stringY : "Y"


#----------- Fraisage Axial ------------------
fmt  "C" 1 x_BoutC   # x en bout en C (G12.1)
fmt  "Y" 1 x_Bout   # x en bout en Y
fmt  "X" 1 y_Bout   # y en bout en Y
fmt  "X" 1 y_BoutC  # y en bout en C (G12.1)
fmt  "Z" 1 z_Bout   # z en bout en C (G12.1) et bout en Y
fmt  "J" 2 i_BoutC  # IJ en bout en C G12.1
fmt  "I" 2 j_BoutC
fmt  "J" 2 i_Bout
fmt  "I" 2 j_Bout
fmt  "Z" 1 initht_Bout
# ----------- Fraisage Radial ------------------
fmt  "Z" 1 x_Dessus # x en fraisage vertical
fmt  "Y" 1 y_Dessus # y en fraisage vertical
fmt  "X" 1 z_Dessus # z en fraisage vertical
fmt  "K" 2 i_Dessus # i en fraisage vertical
fmt  "J" 2 j_Dessus # j en fraisage vertical
fmt  "X" 1 z_Dev    # z en fraisage vertical Developpe

#----------- Fraisage 5 axes G250 ---------------
fmt     1 g250      # flag utilisation G250
fmt  "B" 2 bg250    # axe B pour G250
fmt  "B" 2 old_bg250# memo axe B pour G250
fmt  "C" 2 cg250    # axe C pour G250
fmt  "C" 2 old_cg250# memo axe C pour G250
fmt  "X" 2 xg250    # X pour G250
fmt  "X" 2 old_xg250# memo X pour G250
fmt  "Y" 2 yg250    # Y pour G250
fmt  "Y" 2 old_yg250# memo Y pour G250
fmt  "Z" 2 zg250    # Z pour G250
fmt  "Z" 2 old_zg250# memo Z pour G250
fmt  "R" 2 rg250    # R pour G250
fmt  "R" 2 old_rg250# memo R pour G250


fmt  "X" 1 x250     # X en G250
fmt  "Y" 1 y250     # Y en G250
fmt  "Z" 1 z250     # Z en G250
fmt  "Z" 2 initht_250   # plan de secu en G250
fmt  "I" 2 i250     # I en G250
fmt  "J" 2 j250     # J en G250
fmt  "K" 2 k250     # K en G250
fmt  "" 2 memeb     # flag si chang b


# -------------  pour axe C  ----------------
fmt "G12.1" 1 g12_1         # flag pour utilisation du G12.1 et G13.1

fmt  "C" 2 axec             # axe C
fmt  "G50 H"  1 axeh    " (DECALAGE C)" # decalage d'origine de l'axe C pour G12.1
fmt  "C" 2 old_axec

fmt  "C" 1 C_pos            # C en Developpe
fmt  "R" 2 rotaxis$
fmt  "R" 2 rotdia$

fmt "mode-frein" 3 mi1$      # choix du mode de frein par l'utilisateur en foction de MI1
fmt "frein" 3 frein     # flag pour le frein en axe C
fmt "frein" 3 frein_broche  # Frein broche gauche ou droite

#-----------------------------------------------------

fmt  "N" 3 n$
fmt  "N" 4 num

fmt  "N" 4 numseq


fmt  "G" 4 cc$
fmt  "G" 4 old_cc
fmt  "G" 3 correc
fmt  "G" 4 old_correc

fmt     3 gcode$
fmt  "C" 4 coolant$
fmt     4 lubrif
fmt     4 old_lubrif

fmt  "O"  9 progno$
fmt  "O"  3 memo_progno
fmt  "O"  3 prog_no

fmt  "F" 1 fr_tour
fmt  "F" 3 fr$
fmt  "F" 3 fr_pos$
fmt  "F" 1 frplunge$
frplunge$ = abs (frplunge$)
fmt  "F" 3 avance_r

fmt  "G" 3 avtr
fmt     4 ss$
fmt     4 old_ss
fmt     4 old_spdir
fmt     4 forcer_avance    # flag pour forcer l'affichage de lavance
fmt  "S" 4 Vcc
fmt  "S" 4 maxss$
fmt  "S" 4 vitsdebut



#---------    designation outil  ------------------

fmt  "T" 4 t$    # numero outil Mastercam
fmt  "T" 4 next_tool$   # numero outil suivant Mastercam
fmt  "D" 3 tloffno$   # numero de correcteur de diametre Mastercam
fmt  "H" 5 tlngno$   # numero de correcteur de longueur Mastercam
fmt  "D" 3 correcteur_D   # numero de correcteur de diametre pour machine

fmt  "R " 2 tcr$     # Rayon de plaquette
fmt "DIAM " 2 tldia$ # Diametre Outil

fmt  "T" 4 outil_op         # numero outil pour Liste des Operations
fmt  "T" 4 outil_mzk        # Numero outil Machine MAZAK
fmt  "T" 4 old_outil_mzk        # Memo du numero outil MAZAK

fmt "Orientation N"  4 orient$      # Orientation outil de Mastercam


fmt "lstation" 4 lstation$       # numero de station outil de Mastercam (Identifiant)
fmt  "Identifiant " 2 ident_mzk     # Identifiant de l'outil Mazak de 1 a 26 (A a Z)

fmt "Broche N" 4 spindle_no$        # Broche Active de Mastercam        0 Gauche  -  1 Droite
fmt "Broche_active " 4 broche_active    # Broche Active de l'usinage        0 Gauche  -  1 Droite


fmt  "transfer" 4 transfer      # flag pour transfer
fmt "delta_transfer_z" 15 delta_transfer_z# declage du brut

fmt "decalage_z_b2" 15 decalage_z_b2# decalage d'origine pour broche 2
fmt     1 memo_sub          # memo du subout

#---  pour lecture parametre 20111 tool holder parameters
fmt     2 paramL1   #shape index ascii code
fmt     2 paramL2   #qualified length
fmt     2 paramL3   #maximum width
fmt     2 paramL4   #shank width
fmt     2 paramL5   #shank height
fmt     2 paramL6   #head' length
fmt     2 paramL7   #head' width
fmt     2 paramL8   #corner chamfer width
fmt     2 paramL9   #corner chamfer height
fmt     2 paramL10  #end cutting edge angle
fmt     2 paramL11  #side cutting edge angle
fmt     2 paramL12  #True = round shank
fmt     2 paramL13  #left hand tool?
fmt  "outil vertical"  2 paramL14   #vertically mounted tool?
fmt     2 paramL15  # is holder defined in mm or inches?
#------------------------------------

#---  pour lecture parametre 20100
fmt     2 paramP1   #tool slot number
fmt     2 paramP2   #tool type:0General Turning Tools 1Threading Tools 2Grooving/Parting Tools 3Boring Bars 4Drills, Taps, Reamers 5Custom Geometry Tools
fmt     2 paramP3   #use in top turret
fmt     2 paramP4   #active spindle
fmt     2 paramP5   #tool angle in turret (in degrees)
fmt     2 paramP6   #top turret
fmt     2 paramP7   #tool number
fmt     2 paramP8   #tool offsets for right edge
fmt     2 paramP9   #tool offsets for left edge
fmt     2 paramP10
fmt     2 paramP11
fmt     2 paramP12
fmt     2 paramP13
fmt     2 paramP14
fmt     2 paramP15

fmt     2 paramP16  # angle d'outil

fmt  "Op" 4 opcode$

fmt     2 typeusi   # type d'usinage
fmt     2 old_typeusi

fmt     2 old_spaces    # memo de spaces


#     ------- matrice des plans -------
fmt  "m1 "  15 m1$
fmt  "m2 "  15 m2$
fmt  "m3 "  15 m3$
fmt  "m4 "  15 m4$
fmt  "m5 "  15 m5$
fmt  "m6 "  15 m6$
fmt  "m7 "  15 m7$
fmt  "m8 "  15 m8$
fmt  "m9 "  15 m9$
#     ------------------------------------

fmt  15 tourne
fmt  15 tourneC

old_bg250 :  -99999
old_cg250 :  -99999
old_xg250 :  -99999
old_yg250 :  -99999
old_zg250 :  -99999

x250 = y$*sin(tourne) + x$*cos(tourne)
y250 = y$*cos(tourne) - x$*sin(tourne)
z250 = z$

i250 = j$*sin(tourne) + i$*cos(tourne)
j250 = j$*cos(tourne) - i$*sin(tourne)
k250 = k$



#------- FILETAGES -----------
fmt  "X" 7 thdx1$
fmt  "X" 7 thdx2$
fmt  "X" 2 thdx3$
fmt  "Z" 2 thdz1$
fmt  "Z" 2 thdz2$
fmt  "F" 2 thdlead$
fmt  "A" 2 thdtaper$
fmt  "A" 2 thdtapers
fmt  "K" 2 thddepth$
fmt  "F" 2 thdfirst$
fmt  "D" 1 thdlast$
fmt  "D" 1 thdlasts

fmt  "Z" 2 thdzclr$
fmt  "A1 " 2 thda1$
fmt  "A2 " 2 thda2$
fmt  "F" 2 thdfinish$
fmt  "P" 2 thdpulloff$
fmt  "H" 2 nspring$


fmt "P" 10 passefinition
fmt   10 sortiefiltage
fmt   10 anglefilet
fmt "R" 2 copeaumini
fmt "R" 2 lastpasse
fmt "X" 2 diamfinal
fmt "Z" 2 longfilet
fmt "P" 2 hauteurfilet
fmt "Q" 2 firstpasse
fmt "F" 2 pas
fmt "R" 2 hpente
fmt "I" 1 pente
#------- CYCLES MACHINES --------
fmt "Z" 2 initht$
fmt "X" 2 initht_Dessus
fmt "X" 2 initht_Dev
fmt "Z" 2 refht$
fmt "Z" 2 depth$
fmt "Q" 2 peck1$
fmt "H" 4 peck2$
fmt "R" 11 peckclr$  # valeur d'approche pour debourrage
peckclr$ = abs(peckclr$)
fmt "R" 11 old_peckclr
fmt "R" 11 retr$     # valeur de remontee pour brise copeaux
retr$ = abs (retr$)
fmt "R" 11 old_retr
fmt "R" 1 gardeb    # garde en bout
fmt "R" 1 garded    # garde en dessus

fmt "Z" 1 profb     # profondeur en bout
fmt "X" 1 profd     # profondeur en dessus

fmt "Q" 2 inc
fmt "P" 2 tempo


fmt "F" 2 n_tap_thds$   # Pas du taraud defini dans outil
fmt     2 typecycle
fmt     2 debourrage    # flag pour mode de debourrage 0 percage-alesage 1 debourrage 2 brise copeaux
fmt     2 taraudage


#--------- BRICOLAGE -------------------
fmt    2 result
fmt "TXT" 1 texte         # flag pour ecrire des commentaire
fmt "SUB" 1 multiprog     # flag pour faire les sub

fmt "REVERS" 1 reverse    # 0 pour broche gauche -1 pour droite
fmt "INVERSER" 1 inverser # 1 SI XCP + Z       -1 si xcp = -z
#--------------- Questions ----------------------

fq 1  progno$ "Numero du programme broche gauche SVP ..."


fmt "" 4 finprog
fq 2 finprog "Type de programme? 0 = Principal M30, 1 = SousProg M99"


fq 3 vtol$ "Tolerance de corde en substitution d'axe sur OP ?"

fq 10 chord_tol$ "TOLERANCE CORDALE POUR LES ARCS AVEC //t$//"

#------------------------------ FORMULES ------------------------------------
nobrk$     : yes$     #Omit breakup of x, y & z rapid moves
rotaxtyp$  : 3
omitseq$   : 0       # ne pas numeroter les lignes
texte     : 1       # autorise les comentaires
multiprog : 0     # autorise le bi programme


getnextop$ : 1
get_1004$  : 1   #Find gcode 1004 with getnextop?


rpd_typ_v7$ : 1     #Use Version 7 style contour flags?

spaces$    : 1
seqmax$    : 9999   # Max. sequence no.
seqout    : yes$    # Output sequence no.?
frrapid   : 300    # Rapid feedrate? 300.0
frmax     : 300    # Maximum feedrate? 300.0
maxss$     : 400    # Maximum spindle speed? 3000
breakarcs$ : 2      #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs

arctype$   : 2      # Arc center 1=abs, 2=inc, 3=st-cen, 4=unsigned inc.
do_full_arc$ : 0     #Allow full circle output? 0=no, 1=yes
helix_arc$   : 1     #Support helix arc output, 0=no, 1=all planes, 2=XY plane only
ncldr$     : 20     # No. of leader characters
ldrcode$   : 65     # Leader character dec. equiv.
bldnxtool$ : yes$
tooltable$ : yes$    # Build next tool table

subprg$    : 1
auxprg$    : 1
extprg$    : 1

mergesub$  : 1
mergeaux$  : 1
mergext    : 1


progname$  : 1
strtool_v7$: 2
uselstation$ : 0

old_ss    : 0     # variable de test de changement de vitesse pour chg outil nul TT

avance_r  : 1000  # avance rapide de fraisage en bout

#string
#scomm0
svide   : ""
sinfoop   : ""
serreur1  : "Attention percage en mode tournage pas dans l'axe !!!!"
snom1   : ""
snom2   : ""
spoint : "."
smessage1 : "Le programme a ete renome en "
fmt    1 attente_lecture
# =========== Formules savantes ...







#outil_mzk       = abs ((t$ * 100 + ident_mzk) / 100)
outil_mzk       = t$




x2        = x$  * 2

zt : 9999
zt        = z$ - decalage_z_b2 #* reverse
ztr       = zr$ - decalage_z_b2 #* reverse


x_Bout :  -99999
y_Bout :  -99999
y_BoutC :  -99999
z_Bout :  -99999

x_BoutC    = x$ * reverse *  -1
y_BoutC   = y$ * 2

x_Bout    = x$ * reverse *  -1
y_Bout    = y$

z_Bout    = z$ * reverse

i_BoutC    = i$ * reverse *  -1
j_BoutC    = j$

i_Bout    = i$ * reverse *  -1
j_Bout    = j$

#gardeb    = initht$ - refht$
gardeb    =  refht$
profb     = z$


x_Dessus  = x$  * inverser
y_Dessus  = y$  *  -1* inverser
z_Dessus  = z$  * 2

i_Dessus = i$ * inverser
j_Dessus = j$ *  -1* inverser

initht_Dessus = initht$ * 2
initht_Dev = (initht$ * 2) + rotdia$
initht_Bout = initht$ * reverse
reverse = (spindle_no$ *  -2) + 1


z_Dev     = (z$  * 2) + rotdia$



C_pos :  -999


C_pos     = (-y$ * 360 / (pi$ * rotdia$)) -90


frein :  -999
frein_broche :  -999

fmt   1 modebroche
fmt   1 mb
smode00   : ""
smode01 : "M202 (MODE TOURNAGE )"    #mode tournage broche gauche
smode02 : "M200 (MODE FRAISAGE )"
smode03 : "M302 (MODE TOURNAGE BROCHE DROITE)"
smode04 : "M300 (MODE FRAISAGE BROCHE DROITE)"
smode05   : ""

smodebroche   : ""
mb = modebroche + (broche_active * 2)
fstrsel  smode00 mb smodebroche 6 -1

sfr00   : "M212 (DEBLOCAGE AXE C)"
sfr01   : "M211 (FREIN AXE C)"
sfr02   : "M210 (BLOCAGE AXE C)"
sfr03   : "M312 (DEBLOCAGE AXE C BROCHE DROITE)"
sfr04   : "M311 (FREIN AXE C BROCHE DROITE)"
sfr05   : "M310 (BLOCAGE AXE C BROCHE DROITE)"



sfrein   : ""
frein_broche =  frein + (broche_active * 3)

fstrsel  sfr00 frein_broche sfrein 6 -1


fmt 1 correction

scor00  : "G40"
scor01  : "G41"
scor02  : "G42"
scor03  : "G40"
scor04  : "G41"
scor05  : "G42"

scorrection   : ""

correction = cc_pos$ + (broche_active * 3)
fstrsel scor00 correction scorrection 6 -1

sg00       : "G0"
sg01       : "G1"
sg02       : "G2"
sg03       : "G3"
sg04   : ""
sg05   : ""
sg06       : "G32"
sg07       : "G76"
sg08       : "G92"

sgcode   : ""

fstrsel  sg00 gcode$ sgcode 9 -1


sg10       : "G0"
sg11       : "G1"
sg12       : "G3"
sg13       : "G2"
sgcode_d   : ""

fstrsel  sg10 gcode$ sgcode_d 4 -1

#          M3 M4 TOURNAGE
sm01       : "M4"        # Broche Gauche
sm02       : "M5"
sm03       : "M3"
sm04       : "M303"      # Broche Droite
sm05       : "M305"
sm06       : "M304"

spdlon   : ""

spdlsel = fsg3(spdir$) + (broche_active * 3)
fstrsel  sm01 spdlsel spdlon 6 -1

#    M3 M4 FRAISAGE
sm11       : "M4"   # Broche Gauche
sm12       : "M5"
sm13       : "M3"
sm14       : "M4"   # Broche Droite
sm15       : "M5"
sm16       : "M3"
spdlon_f   : ""

spdlself = fsg3(spdir$) #+ (broche_active * 3)
fstrsel  sm11 spdlself spdlon_f 6 -1

# TYPES D'USINAGE

sty0    : "(FRAISAGE AXIAL AXE C G12.1)"
sty1    : "(FRAISAGE AXIAL AXE Y)"
sty2    : "(FRAISAGE 5 AXES)"
sty3   : ""
sty4   : ""
sty5   : ""
sty6    : "(FRAISAGE EN 5AXES POSITION)"
sty7    : "(FRAISAGE RADIAL POSITION)"
sty8    : "(FRAISAGE RADIAL DEVELOPPE SUBSTITUTION Y)"
sty9    : "(TOURNAGE)"
sty10   : "---------BOULETTE---------"
sty11   : "(FRAISAGE 5 AXES)"
stypeusi   : ""

fstrsel  sty0 typeusi stypeusi 12 -1


# Selection de la broche

sbroche0 : "M901 (ORIGINE BROCHE GAUCHE)"
sbroche1 : "M902 (ORIGINE BROCHE DROITE)"
sbroche   : ""
fstrsel sbroche0 spindle_no$ sbroche 2 -1

# redirection des code M et S sur  broche gauche ou droite
sg112_0   : ""
sg112_1   : "G112"
sg112   : ""
fstrsel sg112_0 broche_active sg112 2 -1

# -------------- DIVRES ---------------------
pdegage     # Degagement pour chg outil


              n$, "G0 G91 G28 X0.",e$
              n$, "G0 G91 G28 Y0. Z0.",e$
              n$, "G90", e$

pfaire_transfer # transfer vers autre broche

        if transfer = 1, [
        " ", e$
        n$, "(TRANSFERT - Reglez les variables en fonction du transfert a realiser)", e$

        n$, "(B = position C2)", e$
        n$, "(C = type orient de transfert 0libre 1orient 2axec) ", e$
        n$, "(I = type de transfert  0mandrin 1mandrin pousse 2avance bar 3move 4move home 5hd2 vers hd1 6hd2 to HD1 pousse)", e$
        n$, "(Y = position W de retour mode bar ou move)", e$
        n$, "(Z = position W prise de piece)", e$
        n$, "G65", "P9900 B0 C2 I. Y-0. Z-..", e$
        n$, "(a la fin du transfert )", e$
        n$, "(la nouvelle origine Z est dans", 35,"500)", e$
        n$, "(la nouvelle origine C est dans", 35,"501)", e$
        n$, "(la correction de longueur broche2 dans", 35,"900)", e$
        " ", e$
        transfer = 0
                ]


pfaire_transfer_old # transfer vers autre broche
        if transfer = 1, [

        n$, "M99", e$
        "%", e$
        " ", e$
        " ", e$
        #*subout
        memo_progno = memo_progno + 1
        snameext$ = no2str (memo_progno)
        subout$ = 3
        n$ = seqinc$
        progno$ = memo_progno
        pheader$
        " ", e$
        pdegage

        ]
                transfer = 0

pstck_trans$

        transfer = 1
                # delta_transfer_z = stck_final_z - stck_init_z

      #*gcode "-------------------", transfer, stck_init_z, stck_final_z, "-------------------",e



pparameter$  # lecture des parametres


    #"------------------------------------------------pparameter", e
    #~prmcode, "=", sparameter, e               # pour afficher tous les parametres
    #if prmcode, = 20111, " lecture des parametres de porte outil=", sparameter, e              # pour afficher tous les parametres
    #if prmcode, = 20100, " lecture des parametres  tool programming parameters=", sparameter, e                # pour afficher tous les parametres

    if prmcode$ = 20111, paramL1 = rpar(sparameter$, 15)  # lecture des parametres de porte outil
    if prmcode$ = 20100, paramP1 = rpar(sparameter$, 9)   # lecture des parametres - tool programming parameters
    if prmcode$ = 15552, paramP16 = rpar(sparameter$, 1)  # angle d'outil

pwrttparam$ #

        if gcode$ = 1008, sinfoop = ucase (sparameter$)
        if gcode$ = 1007, sinfoop = ucase (sparameter$)


pwrtt_test     #  Liste outils

            strtool$ = ucase(strtool$)


                ident_mzk = 0
                if lstation$ >0, ident_mzk = lstation$
        subout$ = 1
          "(", outil_op, strtool$, ident_mzk, ")", e$

        subout$ = 0


pwrtt$     #  Liste outils

            strtool$ = ucase(strtool$)


        if t$ > 0, [
        memo_sub = subout$
        subout$ = 1
           if tldia$ > 0, "(", t$, strtool$, tldia$, ")", e$
           if tldia$ = 0, "(", t$, strtool$, tcr$,  ")", e$
        subout$ = memo_sub #0
            ]

    if op_id$ <> old_op_id,  [
        memo_sub = subout$
        subout$ = 2
                ident_mzk = 0
                if lstation$ >0, ident_mzk = lstation$
            outil_op = abs(t$)
            "(", *operation, sinfoop, outil_op, strtool$, ")", e$
             sinfoop = svide
            operation = operation + 1
        subout$ = memo_sub #0
                    ]




        old_op_id = op_id$
            last_op_id = op_id$


pscomm0$     # pre commentaire

             scomm0$ = ucase (scomm0$)

pcomment$     # Commentaires

    pcomment2

pcomment2

          spaces$ = 0
            scomm$ = ucase (scomm$)

             if gcode$ = 1005 & texte = 1,   n$, " (", scomm$, ")", e$
             if gcode$ = 1006        ,   n$, " ",  scomm$,  e$
             if gcode$ = 1007 & texte = 1,   n$, " (", scomm$, ")", e$
             if gcode$ = 1008 & texte = 1,   n$, " (", scomm$, ")", e$

           spaces$ =  old_spaces

pfr_tournage # Ecriture avances tournage

             fr_tour = abs(fr$)
             if forcer_avance = 1, *fr_tour
             else, fr_tour
             forcer_avance = 0

pfr_fraisage # Ecriture avances fraisage


        # if fr >= 0, fr
        if typeusi <> 8, [
        if forcer_avance = 1, *fr_pos$
        else, fr_pos$
                ]

    if typeusi = 8, [
        if forcer_avance = 1, *fr5x
        else, *fr5x
        ]

        forcer_avance = 0

plubrifon    # Mise en marche lubrifiant

            lubrif = coolant$  + (spindle_no$ * 3)

             if lubrif = 1, "M51 (LUB BROCHE)", e$
             if lubrif = 2, "M8 (LUB BUSES)", e$
             if lubrif = 3, "M151 (LUB AIR)", e$
             if lubrif = 4, "M153 (LUB BROCHE)", e$
             if lubrif = 5, "M8 (LUB BUSES)", e$
             if lubrif = 6, "M151 (LUB AIR)", e$


             old_lubrif = lubrif



plubrifnul  # gestion du changement de lubrifiant pour changement outil nul

             lubrif = coolant$  + (spindle_no$ * 3)

             if lubrif <> old_lubrif, [
             lubrif = old_lubrif
        plubrifoff
        n$, plubrifon, e$
                ]

plubrifoff   # arret lubrifiant

             if lubrif = 1, n$, "M9 (ARRET LUB BROCHE)", e$
             if lubrif = 2, n$, "M9 (ARRET LUB BUSES)", e$
             if lubrif = 3, n$, "M152 (ARRET LUB AIR)", e$
             if lubrif = 4, n$, "M154 (ARRET LUB BROCHE)", e$
             if lubrif = 5, n$, "M9 (ARRET LUB BUSES)", e$
             if lubrif = 6, n$, "M152 (ARRET LUB AIR)", e$

pcord   # Correction armoire pour fraisage
        correcteur_D = tloffno$
        !cc_pos$
        scorrection
        if cc_pos$ <> 0, correcteur_D



pcord_tour     # Correction armoire pour tournage


           if cc$ = 41 & spindle_no$ = 0, correc = 41
           if cc$ = 42 & spindle_no$ = 0, correc = 42

           if cc$ = 41 & spindle_no$ = 1, correc = 42
           if cc$ = 42 & spindle_no$ = 1, correc = 41

           if cc$ = 140, correc = 40

           old_cc = correc

# ------------------ VITESSES -------------------------

pvitsdebut
        @ss$
        @x2

        if ss$ < 0, [

            Vcc = abs(ss$)
        !x2
            if x2 > 0, vitsdebut = ((1000 * Vcc) / (3.1416 * x2))
            if x2 <=0, vitsdebut = maxss$

            if vitsdebut > maxss$, vitsdebut = maxss$

            n$, "G97", *vitsdebut, *spdlon, e$

            ]
pvits


                  if ss$ > 0, pvitmin
                  if ss$ < 0, pvitVcc


pvitmin         # Vitesse en tours/minute G97

                old_ss = ss$
                old_spdir = spdir$
                Vcc = abs(ss$)

                pavtr, "G97", Vcc, *spdlon, e$

pvitVcc         # Vitesse en coupe constante G96

                old_ss = ss$
                old_spdir = spdir$
                Vcc = abs(ss$)



               if spindle_no$ = 0, pavtr, "G96", Vcc, "R1", *spdlon, e$
               if spindle_no$ = 1, pavtr, "G96", Vcc, "R2", *spdlon, e$

pavtr           # Mode d'avance en tour mm/mn ou mm /tr  G98 G99

                if fr$ > 0, avtr = 98
                if fr$ < 0, avtr = 99

                n$, *avtr


pinfo


    #*drillcyc, *tool_op, tool_typ, *opcode, *n_tap_thds, e

# ---------------- ROTATIONS ---------------------




prot0$

prot$

fmt "M" 4 plandecbase
fmt "Q" 4 plandecsuite
fmt "G" 4 plandecaff


pmacroplan     # ecriture d'une macro avant le g68
                if workofs$ >= 54,
                [
                plandecbase = workofs$
                plandecsuite = workofs$ + 1
                plandecaff = plandecsuite
                 n$, "G65 P9921", plandecbase, plandecsuite, *cg250, e$
                 n$, plandecaff, e$
                ]


                else,
                [
                 n$, "G65 P9921 M54 Q55", *cg250, e$
                 n$, "G55", e$
                 ]
prot_calcBout   # Calcul de la position du plan en usinage en bout en axe Y

    if spindle_no$ = 0, [
        axec = atan2(m3$,m2$)
        axeh = -axec
                ]

    if spindle_no$ = 1, [
        axec = atan2(m3$,m2$) - 180
        axeh = -axec
                ]
prot_affich_nulBoutC    # fraisage en bout axe C G12.1

        if g12_1 = 1, n$, "G13.1", e$
        if broche_active = 1, n$, "G111", e$
        g12_1 = 0

        frein = 0
        gcode$ = 0
        n$, sfrein, e$

    if broche_active = 1, n$, "G110", "C2", e$
        n$, axeh, e$

        n$, *sgcode, "C0.", e$


        if g12_1 = 0, n$, "G12.1", e$
        g12_1 = 1


prot_affich_nulBoutY        # fraisage en bout axe Y

        frein = 0
        n$, sfrein, e$
        gcode$ = 0
        if broche_active = 1, n$, "G110", "C2", e$
        n$, *sgcode, *axec, e$
        if broche_active = 1, n$, "G111", e$
        frein = 2
        n$, sfrein, e$



prot_affich_nulBout # Affichage de la rotation du mandrin au changements d'outils nul en bout

        @axec, @old_axec

        if axec <> old_axec, [

        if typeusi = 0, prot_affich_nulBoutC # fraisage en bout axe c G12.1
        if typeusi = 1, prot_affich_nulBoutY # fraisage en bout axe Y G122.1

                    ]

        old_axec = axec



prot_calc       # Calcul de l'angle de rotation du mandrin axe C

                axec = atan2(m8$,m9$)* -1

                if abs(axec) > 180, axec = axec + 360


prot_affich_T   # Affichage de la rotation du mandrin au changements d'outils en position


        frein = 0
        n$, sfrein, e$
        if broche_active = 1, n$, "G110", "C2", e$
        n$, *sgcode, axec, e$
        if broche_active = 1, n$, "G111", e$
        frein = 2
        n$, sfrein, e$

                old_axec = axec

prot_affich_nul # Affichage de la rotation du mandrin au changements d'outils

        @axec, @old_axec

                if axec <> old_axec,  [

        frein = 0
        n$, sfrein, e$
        if broche_active = 1, n$, "G110", "C2", e$
        n$, *sgcode, axec, e$
        if broche_active = 1, n$, "G111", e$
        frein = 2
        n$, sfrein, e$
                    ]

                old_axec = axec



prot_calc_g250  # calcul des angles pour 5AXES POSITIONNE G68
        #" voir la matrice = ", m1$,m2$,m3$,m4$,m5$,m6$,m7$,m8$,m9$, e$
        #"-----------------", delta_transfer_z, e
        # bg250 = acos(m7$)  # modif pour machine sovaic
        bg250 = acos(m9$)
        if bg250 <> 0,  cg250 = (atan2(-m8$,m7$)) * -1  # modif if bg250 <> 0,  cg250 = atan2(-m8$,m9$)
        else,       cg250 = atan2(m2$,m1$)

        tourne = (atan2(m6$,-m3$)) * -1

        if m1$ = 1 & m5$ = 1 & m9$ = 1, tourne = 0
        #"voir tourne:", *tourne, e$
        if bg250 <> 0,  tourneC = (atan2(-m8$,m7$))  # modif idem
        else,       tourneC = atan2(m2$,m1$)

        yg250 = (toz4$*sin(tourneC) + toy4$*cos(tourneC))* -1
        xg250 = (toz4$*cos(tourneC) - toy4$*sin(tourneC))*2

        zg250 = tox4$ - delta_transfer_z


prot_affiche_g250   # affichage des angles pour G250

        #*m1, *m2, *m3, e
        #*m4, *m5, *m6, e
        #*m7, *m8, *m9, e
        #tox4, toy4, toz4, e
        gcode$ = 0

        memeb = 0
        @bg250, @old_bg250
        # if bg250 = old_bg250, memeb = 1  # flag pour voir que l'on a pas bouger en b DESACTIVER POUR SOVAIC


         @bg250, @old_bg250, @cg250, @old_cg250, @xg250, @old_xg250, @yg250, @old_yg250, @zg250, @old_zg250, @memeb


            if bg250 <> old_bg250 | cg250 <> old_cg250 | xg250 <> old_xg250 | yg250 <> old_yg250 | zg250 <> old_zg250,
             [

            if g250 =1 & memeb <> 1, prot_annul_g250 # annuler le G250 avant si on boube en B

            frein = 0               # debloquer axe C
            n$, *sfrein, e$
        if spindle_no$ = 1, n$, "G110", "C2", e$
        if memeb = 1, n$, *sgcode, cg250, e$  # position C si B ne bouge pas

            if memeb <> 1,
                [
                n$, *sgcode, bg250, cg250, e$
                porigine_mazatrol       # appel  origine mazatrol
                rg250 = bg250
                old_outil_mzk = outil_mzk
                pmacroplan

                if spindle_no$ = 0, n$, "G68", xg250, yg250, zg250, "I0", "J1", "K0", *rg250, e$ #*tourne
                if spindle_no$ = 1, n$, "G68", xg250, yg250, zg250, "I0", "J1", "K0", *rg250, e$ #*tourne
                n$, "G17", e$
                gcode$ = 0
                ]

                if rot_autour_z = 0, frein = 2
                else, frein = 0
                n$, *sfrein, e$


            old_bg250 = bg250
            old_cg250 = cg250
            old_xg250 = xg250
            old_yg250 = yg250
            old_zg250 = zg250
            old_rg250 = rg250
            memeb = 0


            g250 =1
            pnonmodal
            ]


prot_annul_g250 # annulation du G250 pour chg outil


            n$, "G69", "(ANNULATION ROTATION PLAN)", e$

            if memeb <> 1, pdegage
            pnonmodal # pour casser la modalitee x y z

            g250 = 0
            old_bg250 =  -99999


pnonmodal   # casser la modalitee de xyz

        old_x = x$
        old_y = y$
        old_z = z$
        x$ =  -9999999
        y$ =  -9999999
        z$ =  -9999999
        !x$
        !y$
        !z$
        !x250
        !y250
        !z250

        x$ = old_x
        y$ = old_y
        z$ = old_z



#----------------- zone de calcul et ecriture pour substitution autour de z

fmt "X" 2 xdevz
fmt "Y" 2 ydevz
fmt "Z" 2 zdevz


pcaldevz    # ecriture d'un parcour autour de Z

        axec5x = atan2(y$,x$)
        axec5x = cont_axe_c + axec5x       # cumul du compteur avec c
         dif_axe_c = axec5x - prvaxec   # difference entre ancient angle et nouveau
         absdif = abs(dif_axe_c)
         if absdif > 180,
            [
                if dif_axe_c > 0, cont_axe_c = cont_axe_c - 360     # ajout de 360 deg
                if dif_axe_c < 0, cont_axe_c = cont_axe_c + 360     # retrait de 360 deg
                axec5x = atan2(y$,x$)
                #axec5x = (axec5x - 90) * -1
                axec5x = cont_axe_c + axec5x                # actualisation de l'angle
            ]

         prvaxec = axec5x

        #"voir ", axec5x ,e $

        xdevz = sqrt(x$^2 + y$^2)
        ydevz = 0
        zdevz = z$


pdevz    # ecriture 1er mouvent en dev autour de z
        pcaldevz
        n$, sgcode, *xdevz, *ydevz, *zdevz, *axec5x, plubrifon,  e$

pdevzlin # ecriture ligne en dev autour de z
        pcaldevz
        n$, sgcode, xdevz, ydevz, zdevz, axec5x,pfr_fraisage,  e$


prazsuitedevZ   # Remise en Zero de axe C
                gcode$ = 0
                pdegage
                axec5x = 0
                n$, sgcode, *axec5x, "( RAZ AXE C SUITE DEV )", e$
                old_rot_autour_z = 0
                cont_axe_c = 0
                !old_rot_autour_z, !cont_axe_c



#======================================== APPELS DES DIFFERENTS OUTILS =====================================
fmt "G" 4 workofs$
porigine_mazatrol

                #if spindle_no$ = 1, n$, "G53.5Z[#500+#900]C[#501]",  "(appel origine mazatrol broche2)", e$

                #if spindle_no$ = 0, n$, "G53.5",  "(appel origine mazatrol broche1)", e$
                if workofs$ >= 54, n$, workofs$, e$                  # ne pas afficher de G54 si le decalage < 0
                else, n$, "G54", e$

poutil

        strtool$ = ucase(strtool$)

       # n$, *outil_mzk,
       # spaces$ = 0
        # *next_tool$,
        # spaces$= 1
         n$, *outil_mzk, *next_tool$,  "M6", e$
         pdegage
         if strtool$ <> svide, n$, "(", strtool$, ")", e$
        n$, *Bmch, e$
                porigine_mazatrol
                # casser la modalite des correcteur h et D en cas de rappel outil
        correcteur_D = -9999
        !correcteur_D
        correcteur_D = tloffno$
        correcteur_h =  -9999
        !correcteur_h
        correcteur_h = tlngno$

        old_outil_mzk = outil_mzk

        # "----",*spindle_no,"----", *orient,"----", *ltool_id,"----", *lstation, e

pinfoorient     # pour afficher le blabla sur l'oreintation outil

            "-----------------------------------------", *spindle_no$, *spdir$, *orient$, *paramL14, tool_typ$, e$
        "1 Vertical tool - insert down, left", e$
        "2 Vertical tool - insert down, right", e$
        "3 Vertical tool - insert up, right", e$
        "4 Vertical tool - insert up, left", e$
        "5 Horizontal tool - insert down, left", e$
        "6 Horizontal tool - insert down, right", e$
        "7 Horizontal tool - insert up, right", e$
        "8 Horizontal tool - insert up, left", e$
            "------------------------------------------", e$
pinfo_usi

             "--------", *spindle_no$, *tox$, toy$, toz$, e$
             "--------", *tox4$, toy4$, toz4$, e$

            *m7$, *rotary_type$, e$
            *m1$, rotaxis$, e$


fmt "Rot autour de z" 4 rot_autour_z
fmt "old_Rot autour de z" 4 old_rot_autour_z


ptype_usi     # choix du mode d'usinage courant de l'operation calcul de l'orientation outil et de l'identifiant


            if rotary_type$ = 2 & rotaxis$ = 0 & old_rot_autour_z = 0, q3

            if rotary_type$ = 2 & rotaxis$ = 0, , rot_autour_z = 1, linarc$ = 1,brklinestype$ = 11, old_rot_autour_z = 1
            else, rot_autour_z = 0, linarc$ = 0, ,brklinestype$ = 0



            #"---------------------------- TYPE USI --------------------", e$
            if old_rot_autour_z = 1 & linarc$ = 0, prazsuitedevZ


        #*opcode, e



              typeusi = 10  # init du type d'usinage

              @t$
              @tloffno$
              @tlngno$
              @orient$
              @lstation$
              @spdir$

              #pinfo_usi

    #----------------------- FRAISAGE -----------------------------

    if opcode$ <= 99,        [
        #"-----------", delta_transfer_z, e
                if spindle_no$ = 0 , delta_transfer_z = 0    # decalage en Z du brut
        #"-----------", delta_transfer_z, e
        # fraisage en bout  en Axe C
              if m7$ = 1 & rotary_type$ = 2,  typeusi = 0 # broche Gauche
              if m7$ =  -1 & rotary_type$ = 2, typeusi = 0 # broche Droite

        # fraisage en bout broche gauche en Axe Y
              if m7$ = 1 & rotary_type$ = 3,  typeusi = 1 # broche Gauche
              if m7$ =  -1& rotary_type$ = 3, typeusi = 1 # broche Droite

        # fraisage vertical broche gauche
              if m1$ = 1 &  rotaxis$ = 0,     typeusi = 6   #7   a la base c'est 7 mais changement pour machinne EDT
              if m1$ =  -1& rotaxis$ = 0,     typeusi = 6
        # fraisage vertical en developpe broche gauche
              if m1$ = 1 & rotaxis$ = 2,      typeusi = 8
        # pour fraisage vertical
              if m1$ =  -1& opcode$ <=99, inverser =  -1
              if m1$ = 1 & opcode$ <=99,  inverser = 1

        #  Fraisage en G250
              if typeusi = 10, typeusi = 6


        #if opcode = 16 | opcode = 17 | opcode = 18, typeusi = 2       # fraisage 5 axes
              if nextop$ = 11, typeusi = 2






        # mettre toujours outil en horizontal pour Fraisage en G250 et en Bout CY
        if  spindle_no$ = 0, [
              if typeusi = 0 | typeusi = 1, Bmch = 0
                            ]

        if  spindle_no$ = 1, [
              if typeusi = 0 | typeusi = 1, Bmch = 180
                            ]
    # pour 5 axes et G250
              if typeusi = 6 | typeusi = 2, Bmch = 0

        # mettre toujours outil en Vertical pour Fraisage en Dessus et Developpe
              if typeusi = 7 | typeusi = 8, Bmch = 90

        ident_mzk = 0
        if lstation$ >=0, ident_mzk = lstation$

            ]

                #" voir typeusi= ", *typeusi, e$
                #typeusi = 0

    #----------------------- TOURNAGE -----------------------------

              if opcode$ > 99,  [

            typeusi = 9
    #pinfoorient      # pour afficher le blabla sur l'oreintation outil
    # *paramL14, *paramP5, *paramP16, *orient, e
    # 1 determiner si outil vertical ou horizontal

    if paramL14 = 1, [      # si outil vertical
        Bmch = 90
        if orient$ = 3, Bmch = -90
        if orient$ = 4, Bmch = -90
              ]
        else, [         # si outil horizontal
        Bmch = 0

        if orient$ = 6, Bmch = 180
        if orient$ = 7, Bmch = 180

            ]

    if tool_typ$ >=5, [ # cas des outils speciaux
        if orient$ = 1, Bmch = 90
        if orient$ = 2, Bmch = 90
        if orient$ = 3, Bmch = -90
        if orient$ = 4, Bmch = -90
        if orient$ = 5, Bmch = 0
        if orient$ = 6, Bmch = 180
        if orient$ = 7, Bmch = 180
        if orient$ = 8, Bmch = 0
            ]


    # 2 calculer l'angle B avec la position de montage et d'usinage
     Bmch = Bmch + paramP5 + paramP16

    # 3 calcul de l'identifian doutil
    # plaquette dessous = 1
    # plaquette dessus = 2
    # autre = numero de station


     ident_mzk = lstation$
        if lstation$ = 0, [
            if spindle_no$ = 0, [    # pour broche gauche
                if spdir$ = 1, ident_mzk = 1
                if spdir$ = -1, ident_mzk = 2
                        ]
            if spindle_no$ = 1, [    # pour broche droite
                if spdir$ = 1, ident_mzk = 2
                if spdir$ = -1, ident_mzk = 1
                        ]
                ]

        if lstation$ = 60, [         # outil lourd
            if spindle_no$ = 0, [    # pour broche gauche
                if spdir$ = 1, ident_mzk = 61
                if spdir$ = -1, ident_mzk = 62
                        ]
            if spindle_no$ = 1, [    # pour broche droite
                if spdir$ = 1, ident_mzk = 62
                if spdir$ = -1, ident_mzk = 61
                        ]
                ]




        if spindle_no$ = 1 & toz$ = 0, [
            if delta_transfer_z <> 0, decalage_z_b2 = delta_transfer_z
                else, "-----impossible de calculer l origine --------------------", e$
                    ]
                else, decalage_z_b2 = 0
                ]

    #-------------------------------------------------------------------------










            @outil_mzk

              !reverse


              # gestion des cyle de percage pour le tournage et le fraisage

              if typeusi = 9, pusecanlathe
                else, pusecanmill



p_Appel_T_T  # Appel outil de tournage (typeusi = 9)

                x$ = xr$
                z$ = zr$

                gcode$ = 0



    poutil  # memo du num outil


                if texte = 1, n$, "( OUTIL", tcr$, ")", e$
                if texte = 1, n$, stypeusi, e$


                #n$, sbroche, e$
                modebroche = 1          # mode tournage
                n$, *smodebroche, e$      # mode tournage sur broche active

                n$, "G18", e$

               if spindle_no$ = 0, n$, "G50", maxss$, "R1", e$
               if spindle_no$ = 1, n$, "G50", maxss$, "R2", e$

                pvitsdebut


                n$, *sgcode, *zt, plubrifon, e$
                n$, sgcode, *x2, e$

                    #if ss <> old_ss, pvits
                    #if old_spdir <>  spdir, pvits

                pvits

                pcord_tour
                      old_Bmch = Bmch

p_Appel_T_B # Appel outil de fraisage en bout en axe C (typeusi = 0)




    poutil  # memo du num outilutil

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$

        gcode$ = 0
                fr$ = avance_r

    n$, "G94 G97", e$
    #n$, sbroche, e$
    modebroche = 2      # mode fraisage
    n$, *smodebroche, e$  # mode fraisage sur breoche active





        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche




                 x$ = xr$
                 y$ = yr$
                 z$ = zr$



        prot_calcBout       # position du plan de construction
        frein = 0
        n$, sfrein, e$

        if broche_active = 1, n$, "G110", "C2", e$

        if axeh <> 0, [     # decalage d'origine pour axe C
        n$, axeh, e$
                    ]


        n$, *sgcode, "C0. Y0.", plubrifon, e$







                                         g12_1 = 1

                                         n$, "G17UH", e$        # plan d'usinage
                                         n$, "G12.1", e$      # mode de substitution d'axes


                                         n$, sgcode, *z_Bout, e$
                                         n$, sgcode, *x_BoutC, *y_BoutC, e$

        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$
        old_axec = axec





p_Appel_T_BY # Appel outil de fraisage en bout en axe Y (typeusi = 1)




    poutil  # memo du num outilutil

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$

        gcode$ = 0
                fr$ = avance_r

    n$, "G94 G97", e$
    #n$, sbroche, e$
    modebroche = 2      # mode fraisage
    n$, *smodebroche, e$     # mode fraisage sur broche active





        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche




                 x$ = xr$
                 y$ = yr$
                 z$ = zr$



        prot_calcBout       # position du plan de construction
        frein = 0
        n$, sfrein, e$
        if broche_active = 1, n$, "G110", "C2", e$
        n$, *sgcode, *axec, plubrifon, e$
        if broche_active = 1, n$, "G111", e$
        frein = 2
        n$, sfrein, e$

    if tool_typ$ <> 5 & tool_typ$ <> 4, [         # si pas de taraudage
                                         n$, "G122.1", e$     # mode semidiametral
                                         n$, "G17", e$        # plan d'usinage
                                         n$, sgcode, *z_Bout, e$
                                         n$, sgcode, *x_Bout, *y_Bout, e$
                                         ]

    if tool_typ$ = 5 | tool_typ$ = 4,  [      # si taraudage
                                         n$, "G17", e$        # plan d'usinage
                                         n$, sgcode, *z_Bout, e$
                                         ]
        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$
        old_axec = axec


p_Appel_T_D # Appel outil de fraisage dessus (typeusi = 7)




    poutil  # memo du num outil

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$


        gcode$ = 0
        fr$ = avance_r

        n$, "G94 G97", e$
        #n$, sbroche, e$
        modebroche = 2      # mode fraisage
        n$, *smodebroche, e$  # mode fraisage sur broche active


        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche

        n$, "G19", e$     # plan fraisage dessus

        prot_calc

        x$ = xr$
        y$ = yr$
        z$ = zr$

        prot_affich_T       # position C

        n$, sgcode, *x_Dessus, e$
        n$, sgcode, *z_Dessus, plubrifon, e$
        n$, sgcode, *y_Dessus, e$



        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$
        old_axec = axec

p_Appel_T_Dev # Appel outil de fraisage en developpe (DESSUS = 2)



    poutil  # memo du num outill

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$


                  q10
                  linarc$ = 1
        gcode$ = 0
        fr$ = avance_r

        n$, "G94 G97", e$
       # n$, sbroche, e$
        modebroche = 2      # mode fraisage
        n$, *smodebroche, e$  # mode fraisage sur broche active

        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche

        n$, "G18", e$     # plan fraisage dev (a voir si OK)

        x$ = xr$
        y$ = yr$
        z$ = zr$



        frein = 0
        n$, sfrein, e$

         n$,  *C_pos, e$
                 n$, sgcode, *x_Dessus, e$
                 n$, sgcode, *z_Dev, plubrifon, e$


        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$
        old_axec = C_pos

p_Appel_T_G250 # Appel outil de fraisage G250 (typeusi = 6)




          poutil  # memo du num outil

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$


        gcode$ = 0
        fr$ = avance_r

        n$, "G94 G97", e$
        #n$, sbroche, e$
        modebroche = 2      # mode fraisage
        n$, *smodebroche, e$  # mode fraisage sur broche active


        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche




        prot_calc_g250  # calcul des angles pour G250


        x$ = xr$
        y$ = yr$
        z$ = zr$

        prot_affiche_g250   # affichage des angles pour G250

        if rot_autour_z = 1, pdevz
        else,  n$, sgcode, *x250, *y250, *z250, plubrifon,  e$




        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$



p_Appel_T_5X    # appel outil en 5 axes continue

         poutil  # memo du num outil

                if texte = 1, n$, "( OUTIL", tldia$, ")", e$
                if texte = 1, n$, stypeusi, e$


        gcode$ = 0
        fr$ = avance_r

          # pcopyorijauge5x   a activer pour

        n$, "G94 G97", e$
        #n$, sbroche, e$
        modebroche = 2      # mode fraisage
        n$, *smodebroche, e$  # mode fraisage sur broche active


        Vcc = abs(ss$)
        n$, Vcc, *spdlon_f, e$    # mise en marche broche

        n$, "M108", "(DEBLOCAGE AXE B)", e$

        frein = 0
        n$, *sfrein, e$   # deblocage axe c

        #n$, "G52.5", "(annulation origine mazatrol)", e$
       # n$, "G54", e$
       porigine_mazatrol
        n$, "G10.9 X0", e$      # mode semidiametral
        debut = 0
        x$ = xr$
        y$ = yr$
        z$ = zr$

        !xr$, !yr$, !zr$
        !x$, !y$, !z$
        old_ss = ss$


pcopyorijauge5x     # macro de recopie de l'origine mazatrol en G54 et recopie de la jauge de longueur mazatrol en jauge ISO Hnumoutil

    @tlngno$
    spaces$ = 0
    argument = tlngno$               # capture du numero de correcteut de long mastercam

    n$, " (origine mazatrol en G54)", e$
    n$, " (jauge de longueur mazatrol en jauge ISO H", *argument, ")", e$
    n$, " ", 35, "5221=-1220.", " (course ref axe broche en X)", e$                               # course ref axe broche en X
    n$, " ", 35, "5222=0", " (mise a zero de Y)", e$                                      # mise a zero de Y
    n$, " ", 35, "510=579.", " (ref zero axe Z)", e$                                      # ref zero axe Z
    n$, " ", 35, "5223=", 35, "9103-", 35, "510", " (caclul origine axe Z en fontion de l'origine piece mazatrol)", e$        # caclul origine axe Z en fontion de l'origine piece mazatrol
    n$, " ", 35, "5224=", 35, "9102", " (copie origine axe C en fontion de l'origine piece mazatrol)", e$     # caclul origine axe Z en fontion de l'origine piece mazatrol

    n$, " ", 35, "510=", 35, "3020", " (recup numero outil en broche)", e$                            # recup numero outil en broche
    n$, " ", 35, "511=", 35, "[600000+", 35, "510]", " (recup jauge outil en broche)", e$                 # recup jauge outil en broche
    n$, " ", 35, "[100000+", *argument, "]=", 35, "511", " (place la jauge dans le H)", e$                    # place la jauge dans le H
    #n, " ", "(--------------------------------------------)", e
    spaces$ = 1

pannuljauge5x    #macro de annul jauge de longueur mazatrol en jauge ISO H
    @argument
    spaces$ = 0
    n$, " (annulation jauge ISO H", *argument, ")", e$
    n$, " ", 35, "[100000+", *argument, "]=0", e$                 # annule la jauge dans le H
    #n, " (----------------------------------)", e
    spaces$ = 1
#========== TRANSITIONS ENTRE TYPES D'USINAGES POUR CHGT D'OUTILS ==============



#------------------- usinage en BOUT ----------------
pBB # Bout en C vers bout en C

        plubrifoff

        if g12_1 = 1,[

                n$, "G13.1", e$
                if broche_active = 1, n$, "G111", e$
                g12_1 = 0
            ]

        frein = 0
        n$, sfrein, e$
            # annulation du decalage d'origine de C pour le G12.1
            if  axeh <> 0, axeh = 0
            n$, axeh, e$

        n$, "G18", e$
        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage
        pdegage
        n$, "G99", e$

pBBY    # Bout en C vers bout en Y

        pBB

pB5X    # Bout en C vers 5 axes

        pBB



PBT # Bout en C vers tour

        pBB

pBD # Bout en C vers dessus

        pBB

pBDev   # Bout en C vers developpe

        pBB

pBG250  # Bout en C vers G250
        pBB

#------------------- usinage Dessus ----------------
pDD     # Dessus vers dessus

        plubrifoff
        #n, "Y0.", e
        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage

        frein = 0
        n$, sfrein, e$    # deblocage axe c
        modebroche = 1      # mode tournage
        n$, *smodebroche, e$  # mode tournage sur broche active
        n$, "G18", e$
        pdegage

pDT     # Dessus vers tour

        pDD

pDB     # Dessus vers bout en C

        pDD
pDBY    # Dessus vers Bout en Y

        pDD

pD5X    # Dessus vers 5 axes

        pDD

pDDev   # Dessus vers developpe

        pDD

pDG250   # Dessus vers G250

        pDD

#------------------- usinage en Developpe ----------------
pDevD   # Developpe vers dessus

        plubrifoff

        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage

        frein = 0
        n$, sfrein, e$    # deblocage axe c
        modebroche = 1      # mode tournage
        n$, *smodebroche, e$  # mode tournage sur broche active
        n$, "G18", e$
        pdegage

pDevT   # Developpe vers tour

        pDevD

pDevB   # Developpe vers bout

        pDevD

pDevDev # Developpe vers developpe

        pDevD

pDevBY  # Developpe vers Bout en Y

        pDevD
pDev5X  # Developpe vers 5 axes

        pDevD

pDevG250 # Developpe vers G250

        pDevD

#------------------- usinage en Tournage ----------------
pTT     # Tour vers tour


            #      if (old_cc = 41 | old_cc = 42), correc = 40
            #      if (old_cc = 41 | old_cc = 42), n, correc, e

        pcord_tour
        gcode$ = 0
        plubrifoff, e$
        pdegage
        forcer_avance = 1

pTB     # Tour vers bout en C

       # if (old_cc = 41 | old_cc = 42), n, "G40", e
        gcode$ = 0
        plubrifoff, e$

        if spindle_no$ = 0, n$, "M05", "(ARRET BROCHE)", e$
        if spindle_no$ = 1, n$, "M305", "(ARRET BROCHE DROITE)", e$

        pdegage
        forcer_avance = 1

pTD     # Tour vers dessus

        pTB

pTDev   # Tour vers developpe

        pTB

pTBY    # Tour vers bout en Y

        pTB

pT5X    # Tour vers 5 axes

        pTB

pTG250  # Tour vers G250

        pTB

#------------------- usinage en bout en Y ----------------
pBYT    # Bout en Y vers tour

        plubrifoff

        n$, "G123.1", e$

        frein = 0
        n$, sfrein, e$
        gcode$ = 0
        #n, *sgcode, "Y0.", e

        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage
        modebroche = 1      # mode tournage
        n$, *smodebroche, e$  # mode tournage sur broche active
        n$, "G18", e$
        n$, "G99", e$
        pdegage


pBYB    # Bout en Y vers Bout en C

        pBYT

pBYBY   # Bout en Y vers Bout en Y

        pBYT

pBY5X   # Bout en Y vers 5 axes

        pBYT

pBYD    # bout en Y vers Dessus

        pBYT

pBYDev      # Bout en Y vers Developpe

        pBYT

pBYG250     # Bout en Y vers G250

        pBYT


#------------------- usinage en 5 axes continue -------------

p5XT    # 5 axes vers tour

        debut = 0
        n$, "G40 (ANNULATION DE LA CORRECTION DE RAYON 5 AXES)", e$ #0002
        n$,"G49", e$  # annulation du 5 axes continue
        #pannuljauge5x
        porigine_mazatrol     # rappel coordonnee mazatrol
       # n$, "G123.1", e$    # annulation G122.1 (semi diametral)
         plubrifoff
        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage
        frein = 0
        n$, sfrein, e$    # deblocage axe c
        modebroche = 1      # mode tournage
        #n$, *smodebroche, e$  # mode tournage sur broche active
        n$, "G18", e$
        pdegage


p5XB    # 5 axes vers bout en C
        p5XT

p5XBY   # 5 axes vers bout en Y
        p5XT

p5X5X   # 5 axes vers bout en C
        p5XT

p5XD    # 5 axes vers dessus
        p5XT

p5XDev  # 5 axes vers developpe
        p5XT

p5XG250 # 5 axes vers G250
        p5XT


#------------------- usinage en G250 ----------------

pG250T  # G250 vers tour


    plubrifoff, e$
    n$, "G69", "(ANNULATION ROTATION PLAN)", e$
            g250 = 0
            old_bg250 =  -99999
    n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
        frein = 0
    n$, sfrein, e$
    modebroche = 1      # mode tournage
    if gcode$ <> 1003, n$, *smodebroche, e$  # mode tournage sur broche active
    n$, "G18", e$
    pdegage




pG250B  # G250 vers bout en C


    pG250T


pG250BY # G250 vers bout en Y


    pG250T


pG2505X # G250 vers 5 axes


    pG250T

pG250D  # G250 vers Dessus

    pG250T

pG250Dev # G250 vers vers Developpe


    pG250T

pG250G250 # G250 vers G250


    pG250T

#======= TRANSITIONS ENTRE TYPES D'USINAGES POUR CHGT D'OUTILS NULS ==========


#------------------- usinage en Bout en C nul ----------------
pBB_nul     # Bout en C vers bout en C nul


            gcode$ = 0
            prot_calcBout
            prot_affich_nulBout

pBT_nul     # Bout en C vers tour nul

            forcer_avance = 1
            ltlchg$

pBD_nul     # Bout en C vers dessus nul

            forcer_avance = 1
            mtlchg$

pBDev_nul   # Bout en C vers developpe nul

            forcer_avance = 1
            mtlchg$

pBBY_nul    # Bout en C vers bout en Y nul




        if g12_1 = 1,   [
            n$, "G13.1", e$       # annulation du g12.1
                if broche_active = 1, n$, "G111", e$
            frein = 0
            n$, sfrein, e$        # deblocage de l'axe C
            g12_1 = 0
                ]


            # annulation du decalage d'origine de C pour le G12.1
            if  axeh <> 0, axeh = 0
            n$, axeh, e$


        prot_calcBout       # calcul dee la position du plan d'usinage
        old_axec = axec + 100   # pour forcer la mise a jour de l'affichage du C
        prot_affich_nulBout     # affichage de la position du plan d'usinage

        n$, "G10.9 X0", e$      # mode semidiametral
        n$, "G17", e$     # plan d'usinage fraisage en bout
        forcer_avance = 1

pB5X_nul    # Bout en C vers 5 axes nul

    forcer_avance = 1
    mtlchg$




pBG250_nul  # Bout en C vers G250 nul



                plubrifoff

        if g12_1 = 1,[
                n$, "G13.1", e$
                if broche_active = 1, n$, "G111", e$
                g12_1 = 0
            ]

            # annulation du decalage d'origine de C pour le G12.1
            if  axeh <> 0, axeh = 0
            n$, axeh, e$

        frein = 0
        n$, sfrein, e$
        pdegage
        pG250G250_nul
        n$, plubrifon, e$




#------------------- usinage en Dessus nul ----------------
pDD_nul     # Dessus vers dessus

                      gcode$ = 0
                      prot_calc
                      prot_affich_nul

pDT_nul     # Dessus vers tour


    "FRAISAGE RADIAL vers TOURNAGE MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
    forcer_avance = 1
    ltlchg$

pDB_nul     # Dessus vers bout en C

    forcer_avance = 1
    mtlchg$



pDDev_nul   # Dessus vers developpe

        if texte = 1, n$, stypeusi, e$
        gcode$ = 0
        frein = 0
        n$, sfrein, e$    # deblocage axe c

        n$, *C_pos, e$
        n$, sgcode, x_Dessus, e$
        n$, sgcode, z_Dev, plubrifon, e$
        forcer_avance = 1

pDBY_nul    # Dessus vers bout en Y nul

    forcer_avance = 1
    mtlchg$


pD5X_nul    # Dessus vers 5 axes nul

    forcer_avance = 1
    mtlchg$


pDG250_nul  # Dessus vers G250 nul

    forcer_avance = 1
    mtlchg$


#------------------- usinage en Developpe nul ----------------

pDevD_nul   # Developpe vers dessus

        forcer_avance = 1
    mtlchg$

pDevT_nul   # Developpe vers tour

        forcer_avance = 1
    ltlchg$

pDevB_nul   # Developpe vers bout

    forcer_avance = 1
    mtlchg$

pDevDev_nul # Developpe vers developpe

              linarc$ = 1

pDevBY_nul  # Developpe vers bout en Y

    forcer_avance = 1
    mtlchg$

pDev5X_nul  # Developpe vers 5 axes

    forcer_avance = 1
    mtlchg$

pDevG250_nul  # Developpe vers G250

    forcer_avance = 1
    mtlchg$

#------------------- usinage en Tournage nul ----------------

pTT_nul     # Tour vers tour



          #  if (old_cc <> 0), correc = 40
          #  if (old_cc <> 0), n, correc, e


             forcer_avance = 1

           pcord_tour

                  if ss$ <> old_ss, pvits
                  if old_spdir <> spdir$, pvits

pTB_nul     # Tour vers bout


        "TOURNAGE vers FRAISAGE AXIAL EN C MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$

pTD_nul     # Tour vers dessus

        "TOURNAGE vers FRAISAGE RADIAIL MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$

pTDev_nul   # Tour vers developpe

        "TOURNAGE vers FRAISAGE DEVELOPPE MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$

pTBY_nul        # tour vers bout en Y nul

    "TOURNAGE vers FRAISAGE AXIAL EN Y MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$

pT5X_nul        # tour vers 5 axes nul

    "TOURNAGE vers FRAISAGE 5 AXES MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$


pTG250_nul   # Tour vers G250

    "TOURNAGE vers FRAISAGE RADIAL EN G250 MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    mtlchg$


#------------------- usinage en Bout en Y nul ----------------


pBYB_nul        # Bout en Y vers Bout en C nul

        n$, "G123.1", e$
        gcode$ = 0
        prot_calcBout
        old_axec = axec - 10
        prot_affich_nulBout
        g12_1 = 1
        n$, "G17", e$     # plan d'usinage
        forcer_avance = 1


pBYBY_nul       # Bout en Y vers Bout en Y nul

    pBB_nul

pBY5X_nul       # Bout en Y vers 5 axes nul


    forcer_avance = 1
    mtlchg$

pBYT_nul        # Bout en Y vers Tour nul

    "FRAISAGE AXIAL EN Y vers TOURNAGE MEME OUTIL --- FONCTION NON DEVELOPPEE", e$
        forcer_avance = 1
    ltlchg$

pBYD_nul        # Bout en Y vers Dessus nul

    #"FRAISAGE AXIAL EN Y vers FRAISAGE RADIAL MEME OUTIL  --- FONCTION NON DEVELOPPEE", e

    forcer_avance = 1
    mtlchg$

pBYDev_nul      # Bout en Y vers Developpe nul

    #"FRAISAGE AXIAL EN Y vers DEVELOPPE MEME OUTIL --- FONCTION NON DEVELOPPEE", e
    forcer_avance = 1
    mtlchg$

pBYG250_nul     # Bout en Y vers G250 nul

        plubrifoff
        forcer_avance = 1
        n$, "G123.1", e$

        frein = 0
        n$, sfrein, e$
        gcode$ = 0

        pdegage
            comment$
            prot_calc_g250      # calcul des angles pour G250
            prot_affiche_g250   # affichage des angles pour G250
        n$, plubrifon, e$

#------------------- usinage en 5 axes nul ----------------

p5XB_nul        # 5 axes vers bout en C nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_B
            forcer_avance = 1

p5XBY_nul       # 5 axes vers bout en Y nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_BY
            forcer_avance = 1

p5X5X_nul       # 5 axes vers 5 axes nul

           # "(mettre ici 5 axes vers 5 axes nul)", e
            comment$

p5XT_nul        # 5 axes vers tour nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_T
            forcer_avance = 1

p5XD_nul        # 5 axes vers dessus nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_D
            forcer_avance = 1

p5XDev_nul      # 5 axes vers developpe nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_Dev
            forcer_avance = 1

p5XG250_nul     # 5 axes vers G250 nul

            pfin5X_nul
            pdegage
            comment$
            p_Appel_T_G250
            forcer_avance = 1

pfin5X_nul      # annulation du mode 5Axes pour chg outil nul

        debut = 0
        n$, "G40 (ANNULATION DE LA CORRECTION DE RAYON 5 AXES)", e$ #0002
        n$,"G49", e$  # annulation du 5 axes continue
        #pannuljauge5x
        porigine_mazatrol     # rappel coordonnee mazatrol
       # n$, "G123.1", e$    # annulation G122.1 (semi diametral)
                plubrifoff
        n$, "M5", "(ARRET BROCHE FRAISAGE)", e$ # arret broche fraisage
        frein = 0
        n$, sfrein, e$    # deblocage axe c
    modebroche = 1      # mode tournage
    n$, *smodebroche, e$  # mode tournage sur broche active
    n$, "G18", e$




#------------------- usinage en G250 nul ----------------

pG250T_nul      # G250 vers tour nul

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$
            g250 = 0
            old_bg250 =  -99999
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
        frein = 0
            n$, sfrein, e$
    modebroche = 1      # mode tournage
    n$, *smodebroche, e$  # mode tournage sur broche active
    n$, "G18", e$
            pdegage


            comment$
            p_Appel_T_T

            forcer_avance = 1

pG250B_nul      # G250 vers Fraisage en Bout en C

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$

        frein = 0
            n$, sfrein, e$
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
            pdegage
            g250 = 0
            old_bg250 =  -99999

            comment$
            p_Appel_T_B

            forcer_avance = 1

pG250BY_nul     # G250 vers Fraisage en Bout en Y

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$

        frein = 0
            n$, sfrein, e$
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
            pdegage
            g250 = 0
            old_bg250 =  -99999

            comment$
            p_Appel_T_BY

            forcer_avance = 1

pG2505X_nul     # G250 vers Fraisage en Bout en Y

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$

        frein = 0
            n$, sfrein, e$
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
            pdegage
            g250 = 0
            old_bg250 =  -99999

            comment$
            p_Appel_T_5X

            forcer_avance = 1

pG250D_nul      # G250 vers Fraisage dessus

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$

        frein = 0
            n$, sfrein, e$
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
            pdegage
            g250 = 0
            old_bg250 =  -99999

            comment$
            p_Appel_T_D
            forcer_avance = 1

pG250Dev_nul        # G250 vers Fraisage developpe

            n$, "G69", "(ANNULATION ROTATION PLAN)", e$
        frein = 0
            n$, sfrein, e$
            n$, "M5", "(ARRET BROCHE  FRAISAGE)", e$
            pdegage
            g250 = 0
            old_bg250 =  -99999

            comment$
            p_Appel_T_Dev
            forcer_avance = 1


pG250G250_nul       # G250 vers Fraisage G250

            comment$
            prot_calc_g250      # calcul des angles pour G250
            prot_affiche_g250   # affichage des angles pour G250

            forcer_avance = 1


#=========== CHOIX DES MODES DE TRANSITION ========================




p_transition  # choix du mode de transition entre deux usinages avec changement d'outil

              if old_typeusi = 0 & typeusi = 0  , pBB
              if old_typeusi = 0 & typeusi = 1  , pBBY
              if old_typeusi = 0 & typeusi = 2  , pB5X
              if old_typeusi = 0 & typeusi = 9  , PBT
              if old_typeusi = 0 & typeusi = 7  , pBD
              if old_typeusi = 0 & typeusi = 8  , pBDev
              if old_typeusi = 0 & typeusi = 6  , pBG250

              if old_typeusi = 1 & typeusi = 0  , pBYB
              if old_typeusi = 1 & typeusi = 1  , pBYBY
              if old_typeusi = 1 & typeusi = 2  , pBY5X
              if old_typeusi = 1 & typeusi = 9  , pBYT
              if old_typeusi = 1 & typeusi = 7  , pBYD
              if old_typeusi = 1 & typeusi = 8  , pBYDev
              if old_typeusi = 1 & typeusi = 6  , pBYG250

              if old_typeusi = 2 & typeusi = 0  , p5XB
              if old_typeusi = 2 & typeusi = 1  , p5XBY
              if old_typeusi = 2 & typeusi = 2  , p5X5X
              if old_typeusi = 2 & typeusi = 9  , p5XT
              if old_typeusi = 2 & typeusi = 7  , p5XD
              if old_typeusi = 2 & typeusi = 8  , p5XDev
              if old_typeusi = 2 & typeusi = 6  , p5XG250

              if old_typeusi = 7 & typeusi = 0  , pDB
              if old_typeusi = 7 & typeusi = 1  , pDBY
              if old_typeusi = 7 & typeusi = 2  , pD5X
              if old_typeusi = 7 & typeusi = 9  , pDT
              if old_typeusi = 7 & typeusi = 7  , pDD
              if old_typeusi = 7 & typeusi = 8  , pDDev
              if old_typeusi = 7 & typeusi = 6  , pDG250

              if old_typeusi = 8 & typeusi = 0  , pDevB
              if old_typeusi = 8 & typeusi = 1  , pDevBY
              if old_typeusi = 8 & typeusi = 2  , pDev5X
              if old_typeusi = 8 & typeusi = 9  , pDevT
              if old_typeusi = 8 & typeusi = 7  , pDevD
              if old_typeusi = 8 & typeusi = 8  , pDevDev
              if old_typeusi = 8 & typeusi = 6  , pDevG250

              if old_typeusi = 9 & typeusi = 0  , pTB
              if old_typeusi = 9 & typeusi = 1  , pTBY
              if old_typeusi = 9 & typeusi = 2  , pT5X
              if old_typeusi = 9 & typeusi = 9  , pTT
              if old_typeusi = 9 & typeusi = 7  , pTD
              if old_typeusi = 9 & typeusi = 8  , pTDev
              if old_typeusi = 9 & typeusi = 6  , pTG250

              if old_typeusi = 6 & typeusi = 0  , pG250B
              if old_typeusi = 6 & typeusi = 1  , pG250BY
              if old_typeusi = 6 & typeusi = 2  , pG2505X
              if old_typeusi = 6 & typeusi = 9  , pG250T
              if old_typeusi = 6 & typeusi = 7  , pG250D
              if old_typeusi = 6 & typeusi = 8  , pG250Dev
              if old_typeusi = 6 & typeusi = 6  , pG250G250

p_transition_nul  # choix du mode de transition en chgt outil nul

        @old_typeusi, @typeusi

              if old_typeusi = 0 & typeusi = 0  , pBB_nul
              if old_typeusi = 0 & typeusi = 1  , pBBY_nul
              if old_typeusi = 0 & typeusi = 2  , pB5X_nul
              if old_typeusi = 0 & typeusi = 9  , pBT_nul
              if old_typeusi = 0 & typeusi = 7  , pBD_nul
              if old_typeusi = 0 & typeusi = 8  , pBDev_nul
              if old_typeusi = 0 & typeusi = 6  , pBG250_nul

              if old_typeusi = 1 & typeusi = 0  , pBYB_nul
              if old_typeusi = 1 & typeusi = 1  , pBYBY_nul
              if old_typeusi = 1 & typeusi = 2  , pBY5X_nul
              if old_typeusi = 1 & typeusi = 9  , pBYT_nul
              if old_typeusi = 1 & typeusi = 7  , pBYD_nul
              if old_typeusi = 1 & typeusi = 8  , pBYDev_nul
              if old_typeusi = 1 & typeusi = 6  , pBYG250_nul

              if old_typeusi = 2 & typeusi = 0  , p5XB_nul
              if old_typeusi = 2 & typeusi = 1  , p5XBY_nul
              if old_typeusi = 2 & typeusi = 2  , p5X5X_nul
              if old_typeusi = 2 & typeusi = 9  , p5XT_nul
              if old_typeusi = 2 & typeusi = 7  , p5XD_nul
              if old_typeusi = 2 & typeusi = 8  , p5XDev_nul
              if old_typeusi = 2 & typeusi = 6  , p5XG250_nul

              if old_typeusi = 7 & typeusi = 0  , pDB_nul
              if old_typeusi = 7 & typeusi = 1  , pDBY_nul
              if old_typeusi = 7 & typeusi = 2  , pD5X_nul
              if old_typeusi = 7 & typeusi = 9  , pDT_nul
              if old_typeusi = 7 & typeusi = 7  , pDD_nul
              if old_typeusi = 7 & typeusi = 8  , pDDev_nul
              if old_typeusi = 7 & typeusi = 6  , pDG250_nul

              if old_typeusi = 8 & typeusi = 0  , pDevB_nul
              if old_typeusi = 8 & typeusi = 1  , pDevBY_nul
              if old_typeusi = 8 & typeusi = 2  , pDev5X_nul
              if old_typeusi = 8 & typeusi = 9  , pDevT_nul
              if old_typeusi = 8 & typeusi = 7  , pDevD_nul
              if old_typeusi = 8 & typeusi = 8  , pDevDev_nul
              if old_typeusi = 8 & typeusi = 6  , pDevG250_nul

              if old_typeusi = 9 & typeusi = 0  , pTB_nul
              if old_typeusi = 9 & typeusi = 1  , pTBY_nul
              if old_typeusi = 9 & typeusi = 2  , pT5X_nul
              if old_typeusi = 9 & typeusi = 9  , pTT_nul
              if old_typeusi = 9 & typeusi = 7  , pTD_nul
              if old_typeusi = 9 & typeusi = 8  , pTDev_nul
              if old_typeusi = 9 & typeusi = 6  , pTG250_nul

              if old_typeusi = 6 & typeusi = 0  , pG250B_nul
              if old_typeusi = 6 & typeusi = 1  , pG250BY_nul
              if old_typeusi = 6 & typeusi = 2  , pG2505X_nul
              if old_typeusi = 6 & typeusi = 9  , pG250T_nul
              if old_typeusi = 6 & typeusi = 7  , pG250D_nul
              if old_typeusi = 6 & typeusi = 8  , pG250Dev_nul
              if old_typeusi = 6 & typeusi = 6  , pG250G250_nul

pprep$


     #pdebug

    breakarcs$ = 2      #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs

    arctype$   = 2      # Arc center 1=abs, 2=inc, 3=st-cen, 4=unsigned inc.
    do_full_arc$ = 0     #Allow full circle output? 0=no, 1=yes
    helix_arc$   = 1     #Support helix arc output, 0=no, 1=all planes, 2=XY plane only

pdebug

        fastmode$ = 0
        bug2$ = 60


#============ DEBUT CODE ISO ===================
pfin

pfin_truc
        smessage1 = smessage1 + no2str(prog_no) + spoint + sextnc$

        while attente_lecture < 1, [
        attente_lecture = attente_lecture + 1


        result = mprint (smessage1)
                ]


ppost_truc

        snom2 = spathnc$ + no2str(prog_no) + spoint + sextnc$

        result = remove (snom2)

        snom1 = spathnc$ + snamenc$ + spoint + sextnc$
        #snom1, e
        #snom2, e


        result = rename(snom1, snom2)



pheader$       # Entete de programme


        old_spaces = spaces$

              #seqno = 10
              #seqinc = 10
              #n = 10

       # while progno = 0,q1
       # if transfer = 1, [
       #         transfer = 0
       #         progno = progno + 1
       #         ]

       # if memo_progno = 0, prog_no = progno
       # if memo_progno = 0, memo_progno = progno
       # progno = memo_progno
              smcname$ = ucase (smcname$)
              snamenc$ = ucase (snamenc$)
              spaces$ = 0
        #  *progno, "( ", smcname," )", e

        "<", snamenc$, "> (", smcname$, ")", e$
        "(Prog: ", snamenc$,".EIA)", e$
        "(Fichier CAO ", smcname$,".MCX )", e$
              spaces$ = 1


lsof0$         # Debut de programme tournage outil zero
              lsof$

msof0$         # Debut de programme fraisage outil zero
              msof$


lsof$          # Premier outil tournage

        " ", e$
        mergesub$
        " ", e$
        mergeaux$
        clearsub$
        clearaux$
        " ", e$

        spaces$ = 0
    n$, " ", 35,"500 = ", 35, "9101", " (copie l'origine Z Mazatrol en parametre)", e$
    n$, " ", 35,"501 = ", 35, "9102", " (copie l'origine C Mazatrol en parametre)", e$
    spaces$ = old_spaces

            @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$

        ptype_usi
        old_typeusi = typeusi
        broche_active = spindle_no$
        pdegage



        comment$

        #subout = 1

              p_Appel_T_T

        old_op_id = op_id$

msof$          # Premier outil fraisage

        " ", e$
        mergesub$
        " ", e$
        mergeaux$
        clearsub$
        clearaux$
        " ", e$
        spaces$ = 0
        #n$, " ", 35,"500 = ", 35, "9101", " (copie l'origine Z Mazatrol en parametre)", e$
        #n$, " ", 35,"501 = ", 35, "9102", " (copie l'origine C Mazatrol en parametre)", e$

        spaces$ = old_spaces
        @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$
        @orient$
        @lstation$
        @spdir$

        ptype_usi
        old_typeusi = typeusi
        broche_active = spindle_no$
        pdegage

        n$, "M108 ( DECLAMPAGE AXE B )", e$


        forcer_avance = 1



          #   if spindle_no = 1 , pdebut_droite
          #   if spindle_no = 0 , pdebut_gauche



        comment$
        #subout = 1


              if typeusi = 0, p_Appel_T_B
              if typeusi = 1, p_Appel_T_BY

              if typeusi = 2, p_Appel_T_5X

              if typeusi = 6, p_Appel_T_G250
              if typeusi = 7, p_Appel_T_D
              if typeusi = 8, p_Appel_T_Dev

            old_op_id = op_id$

ltlchg0$       # Changement d'outil nul tournage


              linarc$ = 0

        @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$
        @orient$
        @lstation$
        @spdir$

              ptype_usi
        !outil_mzk
        if broche_active <> spindle_no$, transfer = 1

              if Bmch <> old_Bmch | broche_active <> spindle_no$, [

            @x$, @y$, @z$
            @xr$, @yr$, @zr$

            if xr$ = 0 & yr$ =0 & zr$ = 0, [

                    xr$ = x$
                    yr$ = y$
                    zr$ = z$
                            ]

                        ltlchg$
                                         ]


        else,[


              p_transition_nul
              comment$
              plubrifnul
              old_typeusi = typeusi
                ]

        old_op_id = op_id$

mtlchg0$       # Changement d'outil nul fraisage

        if op_id$ <> old_op_id, typecycle = 0

          pinfo
          linarc$ = 0

        @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$
        @orient$
        @lstation$
        @spdir$


        ptype_usi
        if broche_active <> spindle_no$, transfer = 1
        !outil_mzk

        #*old_outil_mzk, *outil_mzk, *broche_active, *spindle_no, e

              if outil_mzk <> old_outil_mzk | broche_active <> spindle_no$,          [


        @x$, @y$, @z$
        @xr$, @yr$, @zr$

            if xr$ = 0 & yr$ =0 & zr$ = 0, [

                xr$ = x$
                yr$ = y$
                zr$ = z$
                            ]
            mtlchg$
                                ]


        else, [

            p_transition_nul
            comment$

            old_typeusi = typeusi

            if ss$ <> old_ss,    [
                         Vcc = abs(ss$)
                         n$, Vcc, *spdlon_f, e$      # mise en marche broche
                        old_ss = ss$
                        ]
            plubrifnul


            ]

        old_op_id = op_id$


ltlchg$        # Changement d'outil tournage

        linarc$ = 0

        @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$
        @orient$
        @lstation$
        @spdir$

        ptype_usi
        p_transition
    if broche_active <> spindle_no$, transfer = 1

        old_typeusi = typeusi


            n$, "M01",e$
            " ",e$



        pfaire_transfer

        forcer_avance = 1
        broche_active = spindle_no$

        comment$


        p_Appel_T_T

        old_op_id = op_id$

mtlchg$        # Changement d'outil fraisage

              pinfo


              typecycle = 0
              if taraudage = 1, n$, "G94", e$
              taraudage = 0
              linarc$ = 0

        @t$
        @tloffno$
        @tlngno$
        @mi10$
        @mi8$
        @orient$
        @lstation$
        @spdir$

        ptype_usi
        p_transition
        if broche_active <> spindle_no$, transfer = 1
        old_typeusi = typeusi

        n$, "M01",e$
            " ",e$



        pfaire_transfer
        broche_active = spindle_no$
        forcer_avance = 1
        comment$


              if typeusi = 0, p_Appel_T_B
              if typeusi = 1, p_Appel_T_BY
              if typeusi = 2, p_Appel_T_5X
              if typeusi = 7, p_Appel_T_D
              if typeusi = 8, p_Appel_T_Dev
              if typeusi = 6, p_Appel_T_G250

              old_op_id = op_id$


leof0$         # Fin de programme tournage outil zero
              leof$

meof0$         # Fin de programme fraisage outil zero
              meof$

leof$          # Fin de programme tournage

              linarc$ = 0


            #  if (old_cc = 41 | old_cc = 42), n, "G40", e

              gcode$ = 0
              plubrifoff, e$


              n$, "G0 G91 G28 X0.",e$
              n$, "G0 G91 G28 Y0. Z0.",e$
              n$, "G90", e$
              spdir$ = 0
              n$, *spdlon, e$
                comment$
             if subout$ = 0, n$, "M30",e$
             else, n$, "M99",e$
              "%", e$



meof$          # Fin de programme fraisage

        linarc$ = 0

        typecycle = 0

        if taraudage = 1, n$, "G94", e$
        taraudage = 0
        typeusi = 9
        p_transition

        n$, "G0 G91 G28 X0.",e$
        n$, "G0 G91 G28 Y0. Z0.",e$
        n$, "G90", e$
        n$, "M108 (DEBLOCAGE AXE B)", e$
        n$, "M212 (DEBLOCAGE AXE C)", e$
        n$, "C0 B0", e$
        n$, "T00T0 M6", e$
        n$, "G0 G91 G28 X0.",e$
        n$, "G0 G91 G28 Y0. Z0.",e$
        n$, "G90", e$
        n$, "M107 (BLOCAGE AXE B)", e$
        n$, "M210 (BLOCAGE AXE C)", e$
         modebroche = 1      # mode tournage
        #n$, *smodebroche, e$  # mode tournage sur broche active
        n$, "G18", e$
                comment$

       #n$, "M55 (INCREMETER COMPTEUR PIECE USINEES)", e$
        if subout$ = 0,
        [
            #q2
        if finprog = 0, n$, "M30",e$
        else, n$, "M99",e$
        ]
        else, n$, "M99",e$
        "%", e$





#============================================ CONTOURS ================================================
pzrapid$       # Mouvement rapide Z fraisage
                    #"---------------------MZRAPID---------------", e

        pcalcinvese

              if typeusi = 0 | typeusi = 1 , [      # fraisage en bout axe C ou axe Y

        n$, sgcode, z_Bout, !z$,e$
                        ]

              if typeusi = 6, n$, sgcode, z250, !z$,e$
              if typeusi = 7, n$, sgcode, z_Dessus, !z$,e$
              if typeusi = 8, n$, sgcode, z_Dev,  !z$,e$



lrapid$        # Mouvement rapide lineaire tournage
              n$, sgcode, x2, zt, !x$, !z$,e$

mrapid$        # Mouvement rapide lineaire fraisage
                #"----------------MRAPID--------------", e


        pcalcinvese



              if typeusi = 0,  [        # fraisage en bout axe C
        frein = 0
        n$, sfrein, e$
        n$, sgcode, x_BoutC, y_BoutC, z_Bout, e$
                ]

              if typeusi = 1,  [        # fraisage en bout axe Y
        frein = 2
        n$, sfrein, e$
        n$, sgcode, x_Bout, y_Bout, z_Bout, e$
                ]

              if typeusi = 6 & rot_autour_z = 1 , pdevz
              if typeusi = 6 & rot_autour_z = 0 , n$, sgcode, x250, y250, z250, e$
              if typeusi = 7,  n$, sgcode, x_Dessus, y_Dessus, z_Dessus, e$

              if typeusi = 8,  [        # fraisage en developpe
        frein = 0
        n$, sfrein, e$
        n$, sgcode, x_Dessus, C_pos, z_Dev, e$
                ]

        !x$, !y$, !z$


llin$          # Mouvement travail lineaire tournage



              n$, sgcode, pcord, x2, zt, pfr_tournage, !x$, !z$,e$


mlin$          # Mouvement travail lineaire fraisage
        #"------------MLIN-------", e
             #"voir = ", *typeusi, e$

         # *rotaxis, *rotary_type, *tool_op,e
            #"voir ,brklinestype$=" ,*brklinestype$ ,e$
        pcalcinvese

        if typeusi = 0,
                 [       # fraisage en bout axe C
        frein = mi1$
        n$, sfrein, e$

        n$, sgcode, pcord, x_BoutC, y_BoutC, z_Bout, pfr_fraisage, e$
                ]
        if typeusi = 1,
               [       # fraisage en bout axe Y
                 frein = 2
                 n$, sfrein, e$
                 n$, sgcode, pcord, x_Bout, y_Bout, z_Bout, pfr_fraisage, e$
                ]

              if typeusi = 6 & rot_autour_z = 1 , pdevzlin

              if typeusi = 6 & rot_autour_z = 0, n$, sgcode, pcord, x250, y250, z250, pfr_fraisage, e$

              if typeusi = 7, n$, sgcode,pcord, x_Dessus, y_Dessus, z_Dessus, pfr_fraisage, e$

              if typeusi = 8,   [       # fraisage en develope
              frein = mi1$
              n$, sfrein, e$
              n$, sgcode,pcord, x_Dessus, C_pos, z_Dev, pfr_fraisage, e$
            ]

              !x$, !y$, !z$

pz$            # Mouvement travail Z fraisage

        #"-------MZ-------"
        pcalcinvese

              if typeusi = 0 ,  [   # fraisage en bout axe C
        frein = mi1$
        n$, sfrein, e$
        n$, sgcode, z_Bout, pfr_fraisage, e$
                        ]


              if  typeusi = 1,  [   # fraisage en bout axe  Y
        frein = 2
        n$, sfrein, e$
        n$, sgcode, z_Bout, pfr_fraisage, e$
                        ]

              if typeusi = 6, n$, sgcode, z250, pfr_fraisage, e$
              if typeusi = 7, n$, sgcode, z_Dessus, pfr_fraisage, e$
              if typeusi = 8, n$, sgcode, z_Dev, pfr_fraisage, e$

              !x$, !y$, !z$

lcir$          # Interpolation circulaire tournage

              !reverse
              if reverse = 1,  n$, sgcode, pcord, x2, zt, arcrad$, pfr_tournage, !x$, !z$,e$
              if reverse = -1, n$, sgcode, pcord, x2, zt, arcrad$, pfr_tournage, !x$, !z$,e$



mcir$          # Interpolation circulaire fraisage

              !reverse
              if reverse = 1, mcir_bg,e$
              if reverse =  -1,mcir_bd,e$

mcir_bg     # interpolation circulaire broche gauche

             # "mcir", e
            !i$, !j$


    if typeusi = 0,     [       # fraisage en bout en C
        frein = mi1$
        n$, sfrein, e$
    if enR = 1, n$, *sgcode, *x_BoutC, *y_BoutC, z_Bout, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x_BoutC, *y_BoutC, z_Bout, *i_BoutC, *j_BoutC, pfr_fraisage
            ]

    if typeusi = 1,     [       # fraisage en bout en Y
        frein = 2
        n$, sfrein, e$
    if enR = 1, n$, *sgcode, *x_Bout, *y_Bout, z_Bout, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x_Bout, *y_Bout, z_Bout, *i_Bout, *j_Bout, pfr_fraisage
            ]
    if typeusi = 6, [           # fraisage en G250
    if enR = 1, n$, *sgcode, *x250, *y250, z250, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x250, *y250, z250, *i250, *j250, pfr_fraisage
            ]
    if typeusi = 7, [

    if enR = 1, n$, *sgcode, *x_Dessus, *y_Dessus, z_Dessus, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x_Dessus, *y_Dessus, z_Dessus, *i_Dessus, *j_Dessus, pfr_fraisage

            ]

    if typeusi = 8, "PAS D'ARCS EN DEVELOPPE"

              !x$, !y$, !z$

mcir_bd     # interpolation circulaire broche droite

             # "mcir", e
            !i$, !j$


    if typeusi = 0,     [       # fraisage en bout en C
        frein = mi1$
        n$, sfrein, e$
    if enR = 1, n$, *sgcode_d, *x_BoutC, *y_BoutC, z_Bout, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode_d, *x_BoutC, *y_BoutC, z_Bout, *i_BoutC, *j_BoutC, pfr_fraisage
            ]

    if typeusi = 1,     [       # fraisage en bout en Y
        frein = 2
        n$, sfrein, e$
    if enR = 1, n$, *sgcode_d, *x_Bout, *y_Bout, z_Bout, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode_d, *x_Bout, *y_Bout, z_Bout, *i_Bout, *j_Bout, pfr_fraisage
            ]
    if typeusi = 6, [           # fraisage en G250
    if enR = 1, n$, *sgcode, *x250, *y250, z250, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x250, *y250, z250, *i250, *j250, pfr_fraisage
            ]
    if typeusi = 7, [

    if enR = 1, n$, *sgcode, *x_Dessus, *y_Dessus, z_Dessus, arcrad$, pfr_fraisage
    if enR = 0, n$, *sgcode, *x_Dessus, *y_Dessus, z_Dessus, *i_Dessus, *j_Dessus, pfr_fraisage

            ]

    if typeusi = 8, "PAS D'ARCS EN DEVELOPPE"

              !x$, !y$, !z$


#============================================== CYCLES fraisag 5 axes continue ====================================================

fmt "vx" 15 Vx
fmt "vy" 15 Vy
fmt "vx" 15 Vz
fmt "LV" 15 longvec
fmt "K" 15 vect_i
fmt "I" 15 vect_j
fmt "J" 15 vect_k
fmt "H" 4 correcteur_h
fmt "C" 15 c5x
fmt "B" 15 b5x


fmt "X" 1 x5x
fmt "Y" 1 y5x
fmt "Z" 1 z5x
fmt "C" 1 axec5x
fmt "B" 1 axeb5x

fmt "Z" 15 old_x5x
fmt "X" 15 old_y5x
fmt "Y" 15 old_z5x

fmt "D" 1 debut

fmt "CT" 15 cont_axe_c
fmt "Dif" 15 dif_axe_c
fmt "prvc" 15 prvaxec
fmt "ABSD" 15 absdif
fmt  "long" 15 longdep
fmt    4 argument # argument de la macro de recopie de l'origine mazatrol en G54 et recopie de la jauge de longueur mazatrol en jauge ISO Hnumoutil
fmt "G93 F" 2 fr5x  # avance en inverse du temp pour 5 axe
#startbin

pcalcinvese    # calcul de l'avance en inverse du temp
                    #*x, *y, *z, *u, *v, *w, e
        longdep = sqrt((x$ - old_x5x)^2 + (y$ - old_y5x)^2 + (z$ - old_z5x)^2)
        old_x5x = x$
        old_y5x = y$
        old_z5x = z$

        if longdep > 0, fr5x = fr_pos$ / longdep
        if fr5x > 99999, fr5x = 99999

pcont     # ajout de plus ou moin 360 sur C
         axec5x = cont_axe_c + axec5x       # cumul du compteur avec c
         dif_axe_c = axec5x - prvaxec   # difference entre ancient angle et nouveau
         absdif = abs(dif_axe_c)

         if absdif > 180,
                 [
                if dif_axe_c > 0, cont_axe_c = cont_axe_c - 360     # ajout de 360 deg
                if dif_axe_c < 0, cont_axe_c = cont_axe_c + 360     # retrait de 360 deg
                if mi2$ = -1, axec5x = atan2(-Vx,-Vy)
                else, axec5x = atan2(Vx,Vy)
                axec5x = (axec5x - 90) * -1
                axec5x = cont_axe_c + axec5x                # actualisation de l'angle
                ]

                prvaxec = axec5x


pmx$      #   5 axes continue
      # attention si b = 0 pas d'autre axes en mouvement


       correcteur_h = tlngno$
       x5x = x$
       y5x = y$
       z5x = z$
       @x5x,@y5x,@z5x
       #" voir points ", *x$,*y$,*z$,*u$,*v$,*w$, e$

           Vx = u$ - x$
           Vy = v$ - y$
           Vz = w$ - z$

           #" voir vecteur ", *vx,*vy,*vz,e$


           longvec=sqrt(Vx * Vx + Vy * Vy + Vz * Vz)
           if longvec = 0, longvec = 1
           vect_i = Vx/longvec
           vect_j = Vy/longvec
           vect_k = Vz/longvec


           if fr$ =  -2,gcode$ = 0
           else, gcode$ = 1



        if mi2$ = -1,  # inversion de sens suivant variable mi2$ C0 B45 => C180 B-45
                [
           axec5x = ( atan2(-Vx,-Vy))
          # "voir axeC brut1 ", *axec5x, e$
           axeb5x = acos(Vz / longvec) * -1
                ]
        else,
                [
           axec5x = ( atan2(Vx,Vy))
           #"voir axeC brut1 ", *axec5x, e$
           axeb5x = acos(Vz / longvec)
                ]





    # calcul de l'avance en inverse du temp
        pcalcinvese
        #"voir axeC brut2 ", *axec5x, e$


   # compte tour
            axec5x = (axec5x - 90) * -1
            #"voir axeC brut3 ", *axec5x, e$
            pcont
            #"voir axeC brut4 ", *axec5x, e$
   # ecriture



       if gcode$ = 0,
                [
            #gcode$ = 1
            #!gcode$

                  frein = 0
                  #n, sfrein, e
                  if debut = 0,
                   [
                    #gcode$ = 0
                    n$, *sgcode, *axec5x, *axeb5x, e$
                    n$, *sgcode, "G43.4", *y5x, *z5x, *x5x, *axeb5x, *axec5x, correcteur_h, "F5000", e$
                     n$, plubrifon, e$
                     pcord_5X   #0002
                    ]
            else, n$, `sgcode, y5x, z5x, x5x, axeb5x, axec5x, e$
                !gcode$
                    ]
           else,
              [
            frein = mi1$
           # gcode$ = 1
            #n, sfrein, e
            #n,sgcode, y5x, z5x, x5x, vect_j, vect_k, vect_i, pfr_fraisage,e
            n$, `sgcode, `fr5x, y5x, z5x, x5x, axeb5x, axec5x, e$ #pfr_fraisage, e
            ]

      debut = 1

pcord_5X            #0002
        if debut = 0,
            [
            correcteur_D = tloffno$
            if cc$ = 41, n$, "G41.5", *correcteur_D, e$
            if cc$ = 42, n$, "G42.5", *correcteur_D, e$
            if cc$ = 140, n$, "G40 (ANNULATION DE LA CORRECTION DE RAYON 5 AXES)", e$
            ]

pmx_end$     # debut 5 axe
        if debut = 0, pmx$

#endbin


#============================================== CYCLES ====================================================
ldrill$        # Cycle de pointage en tournage

        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0

        #n, sgcode, *x2, *initht, e

        #if refht <> initht, n, sgcode, *refht, e

        n$, "G83", x2, *depth$, *gardeb, dwell$, *frplunge$, !x$, !z$, e$




lpeck$     # Cycle de debourrage en tournage
        if x2 <> 0, result = mprint (serreur1)


        #-----------------------------------------------
        # modif des parametres CN pour debourrage
       # "G10 L50", e        # intro de parametres
       # " N1010 R11", e    # mode debourrage
       # " N2045", peckclr, e    # valeur d'approche
       # "G11", e           # fin intro de parametre
        debourrage = 0
        #------------------------------------------------


        #n, sgcode, *x2, *initht, e
        #if refht <> initht, n, sgcode, *refht, e

        n$, "G83", x2, *depth$, *gardeb, *peck1$, dwell$, *frplunge$, !x$, !z$, e$



lchpbrk$  # Cycle de brise copeaux en tournage


        #-----------------------------------------------
        # modif des parametres CN pour brise copeaux
      #  "G10 L50", e        # into de parametre
      #  " N1010 R75", e # mode brise copeaux
      #  " N2045", retr, e   # valeur de remontee
      #  "G11", e        # fin intro de parametre
        debourrage = 0
        #------------------------------------------------


        if x2 <> 0, result = mprint (serreur1)

        #n, sgcode, *x2, *initht, e
        #if refht <> initht, n, sgcode, *refht, e

        n$, "G83", x2, *depth$, *gardeb, *peck1$, dwell$, *frplunge$, !x$, !z$, e$


ltap$      # Cycle de taraudage en tournage
        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0

        pas = fr_pos$
        if n_tap_thds$ <> 0, pas = n_tap_thds$
        #if refht <> initht, n, sgcode, *refht, e

        n$, "G84.2", x2, *depth$, *gardeb, *pas, *spdlon, !x$, !z$, e$



lbore1$      # Cycle d'alesage en tournage
        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0


        #if refht <> initht, n, sgcode, *refht, e

        n$, "G89", x2, *depth$, *gardeb, dwell$, *frplunge$, !x$, !z$, e$



lbore2$      # Cycle d'alesage indexe en tournage
        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0
lmisc1$      # Cycle divers 1 en tournage
        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0
lmisc2$      # Cycle divers 2 en tournage
        if x2 <> 0, result = mprint (serreur1)
        debourrage = 0



#----------------------Percage-----------------------------------

mdrill$        # Cycle de percage en fraisage
        debourrage = 0
        if typeusi = 0, pdrillBC    # Bout en C
        if typeusi = 1, pdrillBY    # Bout en Y
        if typeusi = 6, pdrillG250  # En G250
        if typeusi = 7, pdrillD     # Dessus

        if typeusi = 8, pdrillDev   # Developpe


mdrill_2$        # Cycle de percage en fraisage

            mtlchg0$
        if typeusi = 0, pdrill_2BC  # Bout en C
        if typeusi = 1, pdrill_2BY  # Bout en Y
        if typeusi = 6, pdrill_2G250    # En G250
        if typeusi = 7, pdrill_2D   # Dessus
        if typeusi = 8, pdrill_2Dev # Developpe

pdrillBC    # Cycle de percage en fraisage en bout en axe C (G12.1)


        frein = 0
        n$, sfrein, e$    # deblocage axe c
        frein = mi1$
        gcode$ = 0
        n$, sgcode, x_BoutC, y_BoutC, initht_Bout, e$
        n$, "G83",  x_BoutC, y_BoutC, *z_Bout, *gardeb, *dwell$, *fr_pos$, sfrein, e$


           !x$, !y$, !z$

pdrill_2BC  # Cycle de percage en fraisage en bout en axe C (G12.1) point suivant




        n$,  x_BoutC, y_BoutC, z_Bout, gardeb, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pdrillBY    # Cycle de percage en fraisage en bout en axe Y

        gcode$ = 0
        n$, sgcode, x_Bout, y_Bout, initht_Bout, e$
        n$, "G83",  x_Bout, y_Bout, *z_Bout, *gardeb, *dwell$, *fr_pos$, e$

           !x$, !y$, !z$

pdrill_2BY  # Cycle de percage en fraisage en bout en axe Y points suivants


        n$,  x_Bout, y_Bout, z_Bout, gardeb, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pdrillD     # Cycle de percage en fraisage en dessus

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus
        gcode$ = 0
        n$, sgcode , x_Dessus, y_Dessus, initht_Dessus, e$
        n$, "G87", x_Dessus, y_Dessus, *profd, *garded, *dwell$, *fr_pos$, e$

        !x$, !y$, !z$

pdrill_2D   # Cycle de percage en fraisage en dessus point suivant

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        n$, x_Dessus, y_Dessus, profd, garded, dwell$, fr_pos$, e$

        !x$, !y$, !z$



pdrillG250  # Cycle de percage en fraisage en G250

        @x$, @y$, @z$
        gcode$ = 0
        n$, sgcode, x250, y250, initht$, e$
        n$, "G81", x250, y250, *z250, *gardeb, *fr_pos$, e$
        !x$, !y$, !z$

pdrill_2G250    # Cycle de percage en fraisage en G250


        @x$, @y$, @z$

        n$, x250, y250, z250, gardeb, fr_pos$, e$

        !x$, !y$, !z$


pdrillDev   # Cycle de percage en fraisage en Developpe

        garded = (initht$ - refht$)

        frein = 0
        gcode$ = 0
        n$, sgcode, x_Dessus, C_pos, initht_Dev,e$
        n$, sfrein, e$

        frein = mi1$

        n$, "G87", x_Dessus, C_pos, *z_Dev, *garded, *dwell$, fr_pos$, sfrein, e$
        !x$, !y$, !z$

pdrill_2Dev # Cycle de percage en fraisage en Developpe

        garded = (initht$ - refht$)


        gcode$ = 0


        n$, x_Dessus, C_pos, z_Dev, garded, dwell$, fr_pos$,  e$

        !x$, !y$, !z$







#----------------------debourrage-----------------------------------

mpeck$        # Cycle de debourrage en fraisage



        if debourrage <> 1 | peckclr$ <> old_peckclr, [
        #-----------------------------------------------
        # modif des parametres CN pour debourrage
        #"G10 L50", e        # intro de parametres
        #" N1010 R11", e # mode debourrage
        #" N2045", peckclr, e    # valeur d'approche
        #"G11", e        # fin intro de parametre
        debourrage = 1
        old_peckclr = peckclr$
        #------------------------------------------------
                ]

        if peck2$ <> 0, peck1$ = peck2$


        if typeusi = 0, ppeckBC # Bout en C
        if typeusi = 1, ppeckBY # Bout en Y
        if typeusi = 6, ppeckG250   # En G250
        if typeusi = 7, ppeckD      # Dessus

        if typeusi = 8, ppeckDev    # Developpe



mpeck_2$        # Cycle de debourrage en fraisage

            mtlchg0$
        if typeusi = 0, ppeck_2BC   # Bout en C
        if typeusi = 1, ppeck_2BY   # Bout en Y
        if typeusi = 6, ppeck_2G250 # En G250
        if typeusi = 7, ppeck_2D    # Dessus
        if typeusi = 8, ppeck_2Dev  # Developpe

ppeckBC # Cycle de debourrage en fraisage en bout en axe C (G12.1)

        frein = 0
        n$, sfrein, e$    # deblocage axe c
        frein = mi1$
        gcode$ = 0
    n$, sgcode, x_BoutC, y_BoutC, initht_Bout, e$

        n$, "G83",  x_BoutC, y_BoutC, *z_Bout, *gardeb, peck1$, dwell$, *fr_pos$, sfrein, e$


           !x$, !y$, !z$

ppeck_2BC   # Cycle de debourrage en fraisage en bout en axe C (G12.1) point suivant




        n$,  x_BoutC, y_BoutC, z_Bout, gardeb, peck1$, dwell$, fr_pos$, e$


           !x$, !y$, !z$


ppeckBY # Cycle de debourrage en fraisage en bout en axe Y


        gcode$ = 0
        n$, sgcode, x_Bout, y_BoutC, initht_Bout, e$

        n$, "G83",  x_Bout, y_BoutC, *z_Bout, *gardeb, peck1$, dwell$, *fr_pos$, e$


           !x$, !y$, !z$

ppeck_2BY   # Cycle de debourrage en fraisage en bout en axe Y points suivants


        n$,  x_Bout, y_BoutC, z_Bout, gardeb, peck1$, dwell$, fr_pos$, e$


           !x$, !y$, !z$


ppeckD      # Cycle de debourrage en fraisage en dessus

        garded = (initht$ - refht$)

        @x$, @y$, @z$


        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        gcode$ = 0
        n$, sgcode, x_Dessus, y_Dessus, initht_Dessus, e$

        n$, "G87", x_Dessus, y_Dessus, *profd, *garded, peck1$, dwell$, *fr_pos$, e$

        !x$, !y$, !z$

ppeck_2D    # Cycle de debourrage en fraisage en dessus point suivant

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        n$, x_Dessus, y_Dessus, profd, garded, peck1$, dwell$, fr_pos$, e$

        !x$, !y$, !z$



ppeckG250   # Cycle de debourrage en fraisage en G250
        @x$, @y$, @z$
        gcode$ = 0
        n$, sgcode, x250, y250, initht$, e$
        n$, "G83", x250, y250, *z250, *gardeb, peck1$, dwell$, *fr_pos$, e$
        !x$, !y$, !z$

ppeck_2G250 # Cycle de debourrage en fraisage en G250


        @x$, @y$, @z$

        n$, x250, y250, z250, gardeb, peck1$, dwell$, fr_pos$, e$

        !x$, !y$, !z$


ppeckDev    # Cycle de debourrage en fraisage en Developpe

        garded = (initht$ - refht$)


        gcode$ = 0
        frein = 0

        n$, sfrein, e$
        n$, sgcode, x_Dessus, C_pos, initht_Dev, e$
        frein = mi1$

        n$, "G87", x_Dessus, C_pos, *z_Dev, *garded, peck1$, dwell$, fr_pos$, sfrein, e$

        !x$, !y$, !z$

ppeck_2Dev  # Cycle de debourrage en fraisage en Developpe

        garded = (initht$ - refht$)


        gcode$ = 0


        n$, x_Dessus, C_pos, z_Dev, garded, peck1$, dwell$, fr_pos$,  e$

        !x$, !y$, !z$









#----------------------brise copeaux-----------------------------------

mchpbrk$        # Cycle de brise copeaux en fraisage

        if debourrage <> 2 | retr$ <> old_retr, [
        #-----------------------------------------------
        # modif des parametres CN pour brise copeaux
        #"G10 L50", e        # into de parametre
        #" N1010 R75", e # mode brise copeaux
        #" N2045", retr, e   # valeur de remontee
        #"G11", e        # fin intro de parametre
        debourrage = 2
        old_retr = retr$
        #------------------------------------------------
                ]

        if typeusi = 0, pchpbrkBC   # Bout en C
        if typeusi = 1, pchpbrkBY   # Bout en Y
        if typeusi = 6, pchpbrkG250 # En G250
        if typeusi = 7, pchpbrkD        # Dessus

        if typeusi = 8, pchpbrkDev  # Developpe

                  typecycle = 1

mchpbrk_2$        # Cycle de brise copeaux en fraisage

            mtlchg0$
        if typeusi = 0, pchpbrk_2BC # Bout en C
        if typeusi = 1, pchpbrk_2BY # Bout en Y
        if typeusi = 6, pchpbrk_2G250   # En G250
        if typeusi = 7, pchpbrk_2D  # Dessus
        if typeusi = 8, pchpbrk_2Dev    # Developpe

             typecycle = 1

pchpbrkBC   # Cycle de brise copeaux en fraisage en bout en axe C (G12.1)

        frein = 0
        n$, sfrein, e$    # deblocage axe c
        frein = mi1$
        gcode$ = 0
        n$, sgcode, x_BoutC, y_BoutC, initht_Bout, e$

        n$, "G83",  x_BoutC, y_BoutC, *z_Bout, *gardeb, peck1$, dwell$, *fr_pos$, sfrein, e$


           !x$, !y$, !z$

pchpbrk_2BC # Cycle de brise copeaux en fraisage en bout en axe C (G12.1) point suivant




        n$,  x_BoutC, y_BoutC, z_Bout, gardeb, peck1$, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pchpbrkBY   # Cycle de brise copeaux en fraisage en bout en axe Y


        gcode$ = 0
        n$, sgcode, x_Bout, y_BoutC, initht_Bout, e$

        n$, "G83",  x_Bout, y_BoutC, *z_Bout, *gardeb, peck1$, dwell$, *fr_pos$, e$


           !x$, !y$, !z$

pchpbrk_2BY # Cycle de brise copeaux en fraisage en bout en axe Y points suivants


        n$,  x_Bout, y_BoutC, z_Bout, gardeb, peck1$, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pchpbrkD        # Cycle de brise copeaux en fraisage en dessus

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        gcode$ = 0
        n$, sgcode, x_Dessus, y_Dessus, initht_Dessus, e$

        n$, "G87", x_Dessus, y_Dessus, *profd, *garded, peck1$, dwell$, *fr_pos$, e$

        !x$, !y$, !z$

pchpbrk_2D  # Cycle de brise copeaux en fraisage en dessus point suivant

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        n$, x_Dessus, y_Dessus, profd, garded, peck1$, dwell$, fr_pos$, e$

        !x$, !y$, !z$



pchpbrkG250 # Cycle de brise copeaux en fraisage en G250

        @x$, @y$, @z$
        gcode$ = 0
        n$, sgcode, x250, y250, initht$, e$

        n$, "G82", x250, y250, *z250, *gardeb, dwell$, *fr_pos$, e$

        !x$, !y$, !z$

pchpbrk_2G250   # Cycle de brise copeaux en fraisage en G250


        @x$, @y$, @z$

        n$, x250, y250, z250, gardeb, dwell$, fr_pos$, e$

        !x$, !y$, !z$


pchpbrkDev  # Cycle de brise copeaux en fraisage en Developpe

        garded = (initht$ - refht$)

        frein = 0
        gcode$ = 0


        n$, sfrein, e$
        n$, sgcode, x_Dessus, C_pos, initht_Dev


        frein = mi1$

        n$, "G87", x_Dessus, C_pos, *z_Dev, *garded, peck1$, dwell$, fr_pos$, sfrein, e$

        !x$, !y$, !z$

pchpbrk_2Dev    # Cycle de brise copeaux en fraisage en Developpe

        garded = (initht$ - refht$)


        gcode$ = 0


        n$, x_Dessus, C_pos, z_Dev, garded, peck1$, dwell$, fr_pos$,  e$

        !x$, !y$, !z$



#---------------------- TARAUDAGE ------------------------------------

mtap$      # Cycle de taraudage en fraisage

          typecycle = 1
          taraudage = 1
    debourrage = 0

              if typeusi = 0 , ptapB
              if typeusi = 1 , ptapBy
              if typeusi = 6 , ptapG250

              if typeusi = 7, ptapD

              if typeusi = 8, ptapDev

mtap_2$    # Taraudages suivants en fraisage
              if typeusi = 0, ptap_2B
              if typeusi = 1 , ptap_2By
              if typeusi = 6 , ptap_2G250

              if typeusi = 7, ptap_2D
              if typeusi = 8, ptapDev_2
ptapB   # Cycle de taraudage en fraisage en bout en C (G12.1)


            pas = fr_pos$
        if n_tap_thds$ <> 0, pas = n_tap_thds$


        frein = 0
        n$, sfrein, e$    # deblocage axe c
        frein = mi1$
        gcode$ = 0
        n$, sgcode, x_BoutC, y_BoutC, initht_Bout, e$

        frein = mi1$
        n$, "G84.2", x_BoutC, y_BoutC, *z_Bout, *gardeb, *pas, sfrein, e$


           !x$, !y$, !z$

ptap_2B # Cycle de taraudage en fraisage en bout en C (G12.1)


            pas = fr_pos$
        if n_tap_thds$ <> 0, pas = n_tap_thds$

        n$, "G84.2", x_BoutC, y_BoutC, *z_Bout, *gardeb, *pas, sfrein, e$
       # n$, x_BoutC, y_BoutC, z_Bout, gardeb, pas, e$


           !x$, !y$, !z$


ptapBy  # Cycle de taraudage en fraisage en bout en Y


        pas = fr_pos$
        if n_tap_thds$ <> 0, pas = n_tap_thds$

        gcode$ = 0
        n$, sgcode, x_Bout, y_Bout, initht_Bout, e$

        n$, "G84.2",  x_Bout, y_Bout, *z_Bout, *gardeb, *pas, e$


           !x$, !y$, !z$

ptap_2By    # Cycle de taraudage en fraisage en bout en Y


        pas = fr_pos$
        if n_tap_thds$ <> 0, pas = n_tap_thds$

        n$, "G84.2",  x_Bout, y_Bout, *z_Bout, *gardeb, *pas, e$
        #n$, x_Bout, y_Bout, z_Bout, gardeb, pas, e$


           !x$, !y$, !z$

ptapG250     # Cycle de taraudage en fraisage en G250

        garded =  refht$

        @x$, @y$, @z$

        @x250
        @y250
        @z250

        initht_250 = initht$



            pas = fr_pos$

        if n_tap_thds$ <> 0, pas = n_tap_thds$

        gcode$ = 0
        n$, sgcode, x250, y250, initht$, e$

        n$, "G84.2", x250, y250, *z250, *garded, *pas, e$

           !x$, !y$, !z$

ptap_2G250     # Cycle de taraudage en fraisage en G250

        garded = (initht$ - refht$)

        @x$, @y$, @z$

        @x250
        @y250
        @z250

        initht_250 = initht$



            pas = fr_pos$

        if n_tap_thds$ <> 0, pas = n_tap_thds$

        n$, "G84.2", x250, y250, *z250, *garded, *pas, e$
       # n$, x250, y250, z250, garded, pas, e$

           !x$, !y$, !z$

ptapD     # Cycle de taraudage en fraisage en dessus

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus


        profd = z_Dessus


            pas = fr_pos$

        if n_tap_thds$ <> 0, pas = n_tap_thds$


        gcode$ = 0
        n$, sgcode, x_Dessus, y_Dessus, initht_Dessus, e$

        n$, "G88.2", x_Dessus, y_Dessus, *profd, *garded, *pas, e$


           !x$, !y$, !z$

ptap_2D     # Cycle de taraudage en fraisage en dessus points suivants

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus


            pas = fr_pos$

        if n_tap_thds$ <> 0, pas = n_tap_thds$


         n$, "G88.2", x_Dessus, y_Dessus, *profd, *garded, *pas, e$
         #n$, x_Dessus, y_Dessus, profd, garded, pas, e$


           !x$, !y$, !z$



ptapDev     # Cycle de taraudage en fraisage en Developpe

        garded = (initht$ - refht$)

        frein = 0
        gcode$ = 0

            pas = fr_pos$

        if n_tap_thds$ <> 0, pas = n_tap_thds$

        n$, sfrein, e$
        n$, sgcode, x_Dessus, C_pos, initht_Dev, e$


        frein = mi1$

        n$, "G88.2", x_Dessus, C_pos, *z_Dev, *garded, *pas, sfrein, e$

        !x$, !y$, !z$

ptapDev_2     # Cycle de taraudage en fraisage en Developpe

        garded = (initht$ - refht$)


        gcode$ = 0

        n$, "G88.2", x_Dessus, C_pos, *z_Dev, *garded, *pas, sfrein, e$
        #n$, x_Dessus, C_pos, z_Dev, garded, e$

        !x$, !y$, !z$



#----------------------- ALESAGE -------------------------------------------
mbore1$        # Cycle de alesage en fraisage
        debourrage = 0
        if typeusi = 0, pbore1BC    # Bout en C
        if typeusi = 1, pbore1BY    # Bout en Y
        if typeusi = 6, pbore1G250  # En G250
        if typeusi = 7, pbore1D     # Dessus

        if typeusi = 8, pbore1Dev   # Developpe


mbore1_2$        # Cycle de alesage en fraisage

            mtlchg0$
        if typeusi = 0, pbore1_2BC  # Bout en C
        if typeusi = 1, pbore1_2BY  # Bout en Y
        if typeusi = 6, pbore1_2G250    # En G250
        if typeusi = 7, pbore1_2D   # Dessus
        if typeusi = 8, pbore1_2Dev # Developpe

pbore1BC    # Cycle de alesage en fraisage en bout en axe C (G12.1)


        gcode$ = 0
        frein = 0
        n$, sfrein, e$    # deblocage axe c
        n$, sgcode, x_BoutC, y_BoutC, initht$, e$


        frein = mi1$

        n$, "G85",  x_BoutC, y_BoutC, *z_Bout, *gardeb, dwell$, *fr_pos$, sfrein, e$


           !x$, !y$, !z$

pbore1_2BC  # Cycle de alesage en fraisage en bout en axe C (G12.1) point suivant




        n$,  x_BoutC, y_BoutC, z_Bout, gardeb, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pbore1BY    # Cycle de alesage en fraisage en bout en axe Y

        gcode$ = 0
        n$, sgcode, x_Bout, y_Bout, initht$, e$

        n$, "G85",  x_Bout, y_Bout, *z_Bout, *gardeb, dwell$, *fr_pos$, e$


           !x$, !y$, !z$

pbore1_2BY  # Cycle de alesage en fraisage en bout en axe Y points suivants


        n$,  x_Bout, y_Bout, z_Bout, gardeb, dwell$, fr_pos$, e$


           !x$, !y$, !z$


pbore1D     # Cycle de alesage en fraisage en dessus

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        gcode$ = 0
        n$, sgcode, x_Dessus, y_Dessus, initht_Dessus, e$


        n$, "G89", x_Dessus, y_Dessus, *profd, *garded, dwell$, *fr_pos$, e$

        !x$, !y$, !z$

pbore1_2D   # Cycle de alesage en fraisage en dessus point suivant

        garded = (initht$ - refht$)

        @x$, @y$, @z$
        !z_Dessus
        @x_Dessus
        @y_Dessus

        profd = z_Dessus

        n$, x_Dessus, y_Dessus, profd, garded, dwell$, fr_pos$, e$

        !x$, !y$, !z$



pbore1G250  # Cycle de alesage en fraisage en G250

        @x$, @y$, @z$

        gcode$ = 0
        n$, sgcode, x250, y250, initht$, e$

        n$, "G85", x250, y250, *z250, *gardeb, dwell$, *fr_pos$, e$

        !x$, !y$, !z$

pbore1_2G250    # Cycle de alesage en fraisage en G250


        @x$, @y$, @z$

        n$, x250, y250, z250, gardeb, dwell$, fr_pos$, e$

        !x$, !y$, !z$


pbore1Dev   # Cycle de alesage en fraisage en Developpe

        garded = (initht$ - refht$)





        gcode$ = 0
        frein = 0
        n$, sfrein, e$

        n$, sgcode, x_Dessus, C_pos, initht_Dev, e$



        frein = mi1$

        n$, "G89", x_Dessus, C_pos, *z_Dev, *garded, dwell$, fr_pos$, sfrein, e$

        !x$, !y$, !z$

pbore1_2Dev # Cycle de alesage en fraisage en Developpe

        garded = (initht$ - refht$)





        n$, x_Dessus, C_pos, z_Dev, garded, dwell$, fr_pos$,  e$

        !x$, !y$, !z$









#-----------------------------------------------------------------------
pusecanmill

 usecandrill$ = 1
 usecanpeck$  = 1
 usecanchip$  = 1
 usecantap$   = 1
 usecanbore1$ = 1
 usecanbore2$ = 0
 usecanmisc1$ = 0
 usecanmisc2$ = 0

pusecanlathe
 usecandrill$ = 1
 usecanpeck$  = 1
 usecanchip$  = 1
 usecantap$   = 1
 usecanbore1$ = 1
 usecanbore2$ = 0
 usecanmisc1$ = 0
 usecanmisc2$ = 0

pcanceldc$ # Cancel canned drill cycle



        gcode$ = 0

        if typeusi = 6, n$, *sgcode, "G80", *initht$, e$       # G250
        if typeusi = 7, n$, *sgcode, "G80", *initht_Dessus, e$    # Dessus
        if typeusi = 0, n$, *sgcode, "G80", *initht_Bout, e$       # bout en C
        if typeusi = 1, n$, *sgcode, "G80", *initht$, e$       # bout en y
        if typeusi = 8, n$, *sgcode, "G80", *initht_Dev, e$        # en Dev
        if typeusi = 9, n$, *sgcode, "G80", *initht$, e$       # en tournage
#----------------- FILETAGE ------------------------------------------

pthdext$   # Find THDFLAT for external 60 deg. thread



             thddepth$ = thdx1$ - thdx2$
            # *thdx1, *thdx2, *thddepth


pthdint$   # Find THDFLAT for internal 60 deg. thread


             thddepth$ = thdx1$ - thdx2$
            # *thdx1, *thdx2, *thddepth

           #  if thdtype = 2, pg92

pthread0$     # pre calcule
        pente = -999
        !pente
             !thdtype$
             thdangle$ =  thdangle$ * (180 / pi$)
             thdtaper$ = atan(abs(thdx3$-thdx2$)/abs(thdz2$-thdz1$))
           #  thda1 = thda1 * (180 / pi)
           #  thda2 = thda2 * (180 / pi)
           #ptoto
ptoto

             "angle de filetage conique",thdtaper$,e$
             "nbr de filets", nstarts$,e$
             "angle d'entree", thdangle$,e$
             "angle de depat du filet", thda1$,e$
             "angle d'ouverture du filet", thda2$,e$
             "nbr de passes a vide", *nspring$,e$
             "tol de finition", thdfinish$,e$
             "degagenemt anticipe", thdpulloff$,e$
             "1ere passe", thdfirst$,e$
             "derniere passe", thdlast$,e$
             "passes egales(meme prof)", thdequcut$,e$
             "garde sur brut en x", thdxclr$,e$
             "garde d'approche en Z", thdzclr$,e$
             "nombre de passes",thdncuts$,e$
             "ray majeur au z accostage", thdx1$,e$
             "ray mineur au z accostage", thdx2$,e$
             "ray mineur au z de fin", thdx3$,e$
             "z de debut filet", thdz1$,e$
             "z de fin filet (avec surusinage)", thdz2$,e$
             "Pas (positif si mm/tour)",  thdlead$,e$






pg32$      # G32 threading (simple)



pg32e$     # End G32 threading

pg76$      # G76 threading (complex)

              gcode$ =7             # pour ecrire G76
              passefinition = nspring$
              sortiefiltage = 0
              anglefilet = thda2$ * 180 / pi$
              copeaumini = thdfinish$
              lastpasse = thdlast$
              diamfinal = thdx3$*2
              longfilet = thdz2$
              hauteurfilet = thddepth$
              firstpasse = thdfirst$
              pas = thdlead$

              hpente = (thdx2$ + (((thdx3$ - thdx2$) / (thdz2$ - thdz1$)) * (zt - thdz1$))) - thdx3$


      n$, *sgcode, passefinition, sortiefiltage, anglefilet, copeaumini, e$
      n$, *sgcode, diamfinal, longfilet, *hpente, hauteurfilet, firstpasse, *pas, e$ #hauteurfilet,firstpasse, pas,e



pg92$         # ecriture du G92 (bloc ajouter en fonction de thdtype = 2)





pthrg92_1$    # retour au diam du brut point de debut


        gcode$ = 0
           # n, sgcode,  x2, zt, e
        !x$, !z$


pthrg92_2$    # prise de passe debut


        gcode$ = 0
        !x$
        pente = x$

            #n, sgcode,  x2, zt, e
        !x$, !z$

pthrg92_3$   # mouvement en Z

              gcode$ = 8             # pour ecrire G92
              !x$

              pente =  pente - x$

    n$, sgcode,  *x2, zt, pente, pfr_tournage, !x$, !z$,e$


pthrg92_4$   # degagemnt en fin de filet


        gcode$ = 0
            #n, sgcode,  x2, zt, e
        !x$, !z$




# --------------------------------------------------------------------------
# Numbered questions for Mastercam
# --------------------------------------------------------------------------

# --------------------------------------------------------------------------
# Rapid Traverse Feedrates  (1538. is NEW for v9)
# --------------------------------------------------------------------------
38. Rapid feedrate? 1000.0
1538. Rapid feedrate (metric)? 10000.0

# --------------------------------------------------------------------------
# Communications settings (if "Read from Q.80" = 'Y' in product CFG file)
# --------------------------------------------------------------------------

80. Communications port number for receive and transmit (1 or 2) ? 2
81. Data rate (110,150,300,600,1200,2400,4800,9600,14400,19200,38400)? 1200
82. Parity (E/O/N)? E
83. Data bits (7 or 8)? 7
84. Stop bits (1 or 2)? 2
85. Strip line feeds? N
86. Delay after end of line (seconds)? 0
87. Ascii, Eia, or Binary (A/E/B)? A
88. Echo keyboard to screen in terminal emulation? N
89. Strip carriage returns? N

90. Drive and subdirectory for NC files?
91. Name of executable post processor? MPL
92. Name of reverse post processor? RPL
93. Reverse post PST file name?

100. Number of places BEFORE the decimal point for sequence numbers?
101. Number of places AFTER the decimal point for sequence numbers? 5

103. Maximum spindle speed? 3600
107. Average time for tool change (seconds)? 2.0

159. Compensate the first and last point in cutter comp. in control simulation? n

# --------------------------------------------------------------------------
# Enable/Disable setting for Toolpath Parameter dialog screen buttons
# --------------------------------------------------------------------------
161. Enable Home Position button? y
162. Enable Reference Point button? y
163. Enable Misc. Values button? y
164. Enable Rotary Axis button? y
165. Enable Tool Plane button? y
166. Enable Construction Plane button? y
167. Enable Tool Display button? y
168. Check tplane during automatic work origin creation? y

# --------------------------------------------------------------------------
# Default Miscellaneous Real Values
# --------------------------------------------------------------------------
201. Default miscellaneous real variable 1 (mr1)? 0.0
202. Default miscellaneous real variable 2 (mr2)? 0.0
203. Default miscellaneous real variable 3 (mr3)? 0.0
204. Default miscellaneous real variable 4 (mr4)? 0.0
205. Default miscellaneous real variable 5 (mr5)? 0.0
206. Default miscellaneous real variable 6 (mr6)? 0.0
207. Default miscellaneous real variable 7 (mr7)? 0.0
208. Default miscellaneous real variable 8 (mr8)? 0.0
209. Default miscellaneous real variable 9 (mr9)? 0.0
210. Default miscellaneous real variable 10 (mr10)? 0.0

# --------------------------------------------------------------------------
# Default Miscellaneous Integer Values
# --------------------------------------------------------------------------
301. Miscellaneous integer variable 1 (mi1)? 0
302. Miscellaneous integer variable 2 (mi2)? 0
303. Miscellaneous integer variable 3 (mi3)? 0
304. Miscellaneous integer variable 4 (mi4)? 0
305. Miscellaneous integer variable 5 (mi5)? 0
306. Miscellaneous integer variable 6 (mi6)? 0
307. Miscellaneous integer variable 7 (mi7)? 0
308. Miscellaneous integer variable 8 (mi8)? 0
309. Miscellaneous integer variable 9 (mi9)? 0
310. Miscellaneous integer variable 10 (mi10)? 0

# Metric Misc. Reals (1601. - 1610.) are NEW for v9
# --------------------------------------------------------------------------
# Valeurs reelles par defaut (METRIQUE)
# --------------------------------------------------------------------------
1601. Default miscellaneous real variable 1 (mr1) (metric)? 0.0
1602. Default miscellaneous real variable 2 (mr2) (metric)? 0.0
1603. Default miscellaneous real variable 3 (mr3) (metric)? 0.0
1604. Default miscellaneous real variable 4 (mr4) (metric)? 0.0
1605. Default miscellaneous real variable 5 (mr5) (metric)? 0.0
1606. Default miscellaneous real variable 6 (mr6) (metric)? 0.0
1607. Default miscellaneous real variable 7 (mr7) (metric)? 0.0
1608. Default miscellaneous real variable 8 (mr8) (metric)? 0.0
1609. Default miscellaneous real variable 9 (mr9) (metric)? 0.0
1610. Default miscellaneous real variable 10 (mr10) (metric)? 0.0

# --------------------------------------------------------------------------
# Configuration File association parameters (default is "y")
# --------------------------------------------------------------------------
400. Name of associated cfg file?
401. Read SYSTEM COLORS section? y
402. Read ALLOCATIONS section? y
403. Read TOLERANCES section? y
404. Read DATA PATHS section? y
405. Read COMMUNICATIONS section? y
406. Read DRAFT SETTINGS section? y
407. Read MISCELLANEOUS section? y
408. Read NC SETTINGS section? y
409. Read DIALOG SCRIPTS section? y
410. Read DESIGN SETTINGS section? y
411. Read PLOTTER SETTINGS section? y
412. Read ALT-KEY ASSIGNMENTS section? y
413. Read CAD section? y
414. Read START/EXIT section? y
415. Read SCREEN section? y
416. Read FILE NAMES section? y

# --------------------------------------------------------------------------
1500. Chook to execute from 'Misc. values' button?

# --------------------------------------------------------------------------
# Parameter information output configuration switches
# --------------------------------------------------------------------------
1501. Insert parameter information in the ascii NCI? y
1502. Write operation information to binary file (.ops)? n
1503. Write transform operations (0=transform ops, 1=source ops, 2=both)? 1

# --------------------------------------------------------------------------
1520. Display a warning when cutter compensation in control simulation finds an error? n

# This switch (1521.) for is NEW for v9.1 (this is for future use)
1521. Number of controller look-ahead blocks for CDC in control? 2

# This switch (1530.) for is NEW for v9.1
1530. Ignore work offset numbers when processing subprograms? y

# This switch (1531.) for is NEW for v9.1 (SP1)
1531. Ignore contour flags when processing subprograms? y

# These switches (1611. - 1620.) for Misc. Reals are NEW for v9
# --------------------------------------------------------------------------
# Activer/desactiver les commutateurs de variables reelles
# --------------------------------------------------------------------------
1611. Enable miscellaneous real variable 1? y
1612. Enable miscellaneous real variable 2? y
1613. Enable miscellaneous real variable 3? y
1614. Enable miscellaneous real variable 4? y
1615. Enable miscellaneous real variable 5? y
1616. Enable miscellaneous real variable 6? y
1617. Enable miscellaneous real variable 7? y
1618. Enable miscellaneous real variable 8? y
1619. Enable miscellaneous real variable 9? y
1620. Enable miscellaneous real variable 10? y

# These switches (1621. - 1630.) for Misc. Integers are NEW for v9
# --------------------------------------------------------------------------
# Activer/desactiver les commutateurs de variables entieres
# --------------------------------------------------------------------------
1621. Enable miscellaneous integer variable 1? y
1622. Enable miscellaneous integer variable 2? y
1623. Enable miscellaneous integer variable 3? y
1624. Enable miscellaneous integer variable 4? y
1625. Enable miscellaneous integer variable 5? y
1626. Enable miscellaneous integer variable 6? y
1627. Enable miscellaneous integer variable 7? y
1628. Enable miscellaneous integer variable 8? y
1629. Enable miscellaneous integer variable 9? y
1630. Enable miscellaneous integer variable 10? y

# --------------------------------------------------------------------------
# Do NOT manually change the answer for Q.1999 !
1999. Product major version number that post supports? 9

# --------------------------------------------------------------------------
3001. Machine acceleration? 2
3002. timing size? .1

# --------------------------------------------------------------------------
# NEW for Lathe v9 ->
# Minimum Feedrate (IPR units) when 'micro-in' feedrate mode is programmed
# Minimum Feedrate (MMPR units) when 'micro-mm' feedrate mode is programmed
# --------------------------------------------------------------------------
3010. Minimum inch/revolution feedrate? .002
3011. Minimum mm/revolution feedrate? .005


# --------------------------------------------------------------------------
# lathe canned cycles
# --------------------------------------------------------------------------
3020. Enable canned roughing turning? n
3021. Enable canned roughing pattern repeat? n
3022. Enable canned grooving? n
3023. Enable canned threading? n
3024. Enable canned finish? n

# This switch (3030.) for is NEW for v9.1
# --------------------------------------------------------------------------
# LATHE canned turning- feature activation switches
# --------------------------------------------------------------------------
3030. Enable canned roughing undercuts selection option? n

# --------------------------------------------------------------------------
# lathe canned grooving
# --------------------------------------------------------------------------
3040. Enable canned groove wall taper? n
3041. Enable canned groove radius on corners? n
3042. Enable canned groove radius on chamfer? n
3043. Enable canned groove rough pecking? n
3044. Enable canned groove rough depth cuts? n
3045. Enable canned groove dwell? n
3046. Enable canned groove chamfer on corners? n

# --------------------------------------------------------------------------
# lathe canned thread
# --------------------------------------------------------------------------
3050. Enable canned thread equal depths? n
3051. Enable canned thread equal area? n
3052. Enable canned thread multiple starts? n
3053. Enable canned thread anticipated pulloff? n
3054. Enable canned thread anticipated pulloff for longhand threading? y
3055. Enable canned thread anticipated pulloff for box threading? y
3056. Enable canned thread anticipated pulloff for alternate threading? y

# --------------------------------------------------------------------------
# LATHE Default Miscellaneous Real Values  (Mill/Turn applications)
# --------------------------------------------------------------------------
3201. Default lathe miscellaneous real variable 1 (mr1)? 0.0
3202. Default lathe miscellaneous real variable 2 (mr2)? 0.0
3203. Default lathe miscellaneous real variable 3 (mr3)? 0.0
3204. Default lathe miscellaneous real variable 4 (mr4)? 0.0
3205. Default lathe miscellaneous real variable 5 (mr5)? 0.0
3206. Default lathe miscellaneous real variable 6 (mr6)? 0.0
3207. Default lathe miscellaneous real variable 7 (mr7)? 0.0
3208. Default lathe miscellaneous real variable 8 (mr8)? 0.0
3209. Default lathe miscellaneous real variable 9 (mr9)? 0.0
3210. Default lathe miscellaneous real variable 10 (mr10)? 0.0

# --------------------------------------------------------------------------
# LATHE Default Miscellaneous Integer Values  (Mill/Turn applications)
# --------------------------------------------------------------------------
3301. Default lathe miscellaneous integer variable 1 (mi1)? 0
3302. Default lathe miscellaneous integer variable 2 (mi2)? 0
3303. Default lathe miscellaneous integer variable 3 (mi3)? 0
3304. Default lathe miscellaneous integer variable 4 (mi4)? 0
3305. Default lathe miscellaneous integer variable 5 (mi5)? 0
3306. Default lathe miscellaneous integer variable 6 (mi6)? 0
3307. Default lathe miscellaneous integer variable 7 (mi7)? 0
3308. Default lathe miscellaneous integer variable 8 (mi8)? 0
3309. Default lathe miscellaneous integer variable 9 (mi9)? 0
3310. Default lathe miscellaneous integer variable 10 (mi10)? 0

# These questions (3601. - 3610.) for Misc. Reals (metric) are NEW for v9
# LATHE Default Miscellaneous Real Values  (METRIC)
# --------------------------------------------------------------------------
3601. Default lathe miscellaneous real variable 1 (mr1) (metric)? 0.0
3602. Default lathe miscellaneous real variable 2 (mr2) (metric)? 0.0
3603. Default lathe miscellaneous real variable 3 (mr3) (metric)? 0.0
3604. Default lathe miscellaneous real variable 4 (mr4) (metric)? 0.0
3605. Default lathe miscellaneous real variable 5 (mr5) (metric)? 0.0
3606. Default lathe miscellaneous real variable 6 (mr6) (metric)? 0.0
3607. Default lathe miscellaneous real variable 7 (mr7) (metric)? 0.0
3608. Default lathe miscellaneous real variable 8 (mr8) (metric)? 0.0
3609. Default lathe miscellaneous real variable 9 (mr9) (metric)? 0.0
3610. Default lathe miscellaneous real variable 10 (mr10) (metric)? 0.0

# --------------------------------------------------------------------------
# Activer/desactiver les commutateurs de reels optionnels de tournage
# --------------------------------------------------------------------------
1631. Enable lathe miscellaneous real variable 1? y
1632. Enable lathe miscellaneous real variable 2? y
1633. Enable lathe miscellaneous real variable 3? y
1634. Enable lathe miscellaneous real variable 4? y
1635. Enable lathe miscellaneous real variable 5? y
1636. Enable lathe miscellaneous real variable 6? y
1637. Enable lathe miscellaneous real variable 7? y
1638. Enable lathe miscellaneous real variable 8? y
1639. Enable lathe miscellaneous real variable 9? y
1640. Enable lathe miscellaneous real variable 10? y

# --------------------------------------------------------------------------
# Enable/Disable Misc. Integer entry field switches (LATHE)
# --------------------------------------------------------------------------
1641. Enable lathe miscellaneous integer variable 1? y
1642. Enable lathe miscellaneous integer variable 2? y
1643. Enable lathe miscellaneous integer variable 3? y
1644. Enable lathe miscellaneous integer variable 4? y
1645. Enable lathe miscellaneous integer variable 5? y
1646. Enable lathe miscellaneous integer variable 6? y
1647. Enable lathe miscellaneous integer variable 7? y
1648. Enable lathe miscellaneous integer variable 8? y
1649. Enable lathe miscellaneous integer variable 9? y
1650. Enable lathe miscellaneous integer variable 10? y


[CTRL_TEXT_XML_BEGIN]  # Post text edits MUST be made with Control Definition Manager.
<?xml version="1.0" encoding="UTF-8"?>
<mp_xml_post_text xml:space="preserve">
	<control>
		<control_label>CTRL_MT_MILL|DEFAULT</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Blocage axe C: (0=libre  1=frein  2=blocage)</text>
			</misc_1>
			<misc_2>
				<text>Inversion du sens C et B = -1</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>""</text>
			</misc_1>
			<misc_2>
				<text>""</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Per�age</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er Debour.</text>
			</first_peck>
			<subsequent_peck>
				<text>Deb.suivant</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise copeaux</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er Debour.</text>
			</first_peck>
			<subsequent_peck>
				<text>Deb. suivant</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Al�sage</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er D�bour.</text>
			</first_peck>
			<subsequent_peck>
				<text>D�b. suivant</text>
			</subsequent_peck>
		</misc1>
		<misc2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_9>
		<drill_cycle_10>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_10>
		<drill_cycle_11>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_11>
		<drill_cycle_12>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_12>
		<drill_cycle_13>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_13>
		<drill_cycle_14>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_14>
		<drill_cycle_15>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_15>
		<drill_cycle_16>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_16>
		<drill_cycle_17>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_17>
		<drill_cycle_18>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_18>
		<drill_cycle_19>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_19>
		<drill_cycle_20>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 1</text>
			</description>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 2</text>
			</description>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 3</text>
			</description>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 4</text>
			</description>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 5</text>
			</description>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 6</text>
			</description>
		</bore2_custom_parameters>
		<misc1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 7</text>
			</description>
		</misc1_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 8</text>
			</description>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 9</text>
			</description>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 10</text>
			</description>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 11</text>
			</description>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 12</text>
			</description>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 13</text>
			</description>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 14</text>
			</description>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 15</text>
			</description>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 16</text>
			</description>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_17_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 17</text>
			</description>
		</drill_cycle_17_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 18</text>
			</description>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 19</text>
			</description>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 20</text>
			</description>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>Per�age</text>
			</simple_drill>
			<peck_drill>
				<text>D�bourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise copeaux</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Al�sage</text>
			</boring_1>
			<boring_2>
				<text>""</text>
			</boring_2>
			<misc_drill_1>
				<text>""</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>""</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>""</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>""</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>""</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>""</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>""</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>""</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>""</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>""</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>""</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>""</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>""</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>""</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
<control>
		<control_label>CTRL_MT_MILL|INTEGREX-400-IVS-5X</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Blocage axe C: (0=libre  1=frein  2=blocage)</text>
			</misc_1>
			<misc_2>
				<text>Inversion du sens C et B = -1</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>""</text>
			</misc_1>
			<misc_2>
				<text>""</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Per�age</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er Debour.</text>
			</first_peck>
			<subsequent_peck>
				<text>Deb.suivant</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise copeaux</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er Debour.</text>
			</first_peck>
			<subsequent_peck>
				<text>Deb. suivant</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Al�sage</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo.</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1er D�bour.</text>
			</first_peck>
			<subsequent_peck>
				<text>D�b. suivant</text>
			</subsequent_peck>
		</misc1>
		<misc2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_9>
		<drill_cycle_10>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_10>
		<drill_cycle_11>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_11>
		<drill_cycle_12>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_12>
		<drill_cycle_13>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_13>
		<drill_cycle_14>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_14>
		<drill_cycle_15>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_15>
		<drill_cycle_16>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_16>
		<drill_cycle_17>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_17>
		<drill_cycle_18>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_18>
		<drill_cycle_19>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_19>
		<drill_cycle_20>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 1</text>
			</description>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 2</text>
			</description>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 3</text>
			</description>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 4</text>
			</description>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 5</text>
			</description>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 6</text>
			</description>
		</bore2_custom_parameters>
		<misc1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 7</text>
			</description>
		</misc1_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 8</text>
			</description>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 9</text>
			</description>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 10</text>
			</description>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 11</text>
			</description>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 12</text>
			</description>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 13</text>
			</description>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 14</text>
			</description>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 15</text>
			</description>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 16</text>
			</description>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_17_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 17</text>
			</description>
		</drill_cycle_17_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 18</text>
			</description>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 19</text>
			</description>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 20</text>
			</description>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>Per�age</text>
			</simple_drill>
			<peck_drill>
				<text>D�bourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise copeaux</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Al�sage</text>
			</boring_1>
			<boring_2>
				<text>""</text>
			</boring_2>
			<misc_drill_1>
				<text>""</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>""</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>""</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>""</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>""</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>""</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>""</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>""</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>""</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>""</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>""</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>""</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>""</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>""</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
	<control>
		<control_label>CTRL_MILL|INTEGREX-E-800V</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Blocage axe C: (0=libre  1=frein  2=blocage)</text>
			</misc_1>
			<misc_2>
				<text>Inversion du sens C et B = -1</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>""</text>
			</misc_1>
			<misc_2>
				<text>""</text>
			</misc_2>
			<misc_3>
				<text>""</text>
			</misc_3>
			<misc_4>
				<text>""</text>
			</misc_4>
			<misc_5>
				<text>""</text>
			</misc_5>
			<misc_6>
				<text>""</text>
			</misc_6>
			<misc_7>
				<text>""</text>
			</misc_7>
			<misc_8>
				<text>""</text>
			</misc_8>
			<misc_9>
				<text>""</text>
			</misc_9>
			<misc_10>
				<text>""</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Per�age simple</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Pe�age debourrage</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo. P</text>
			</dwell>
			<retract>
				<text>Garde R</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>Val. de debourrage Q</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise copeaux</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo. P</text>
			</dwell>
			<retract>
				<text>Garde R</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<retract>
				<text>Garde R</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Al�sage</text>
			</description>
			<feed_rate>
				<text>Avance</text>
			</feed_rate>
			<dwell>
				<text>Tempo. P</text>
			</dwell>
			<retract>
				<text>Garde R</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<retract>
				<text>""</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
		</misc1>
		<misc2>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_9>
		<drill_cycle_10>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_10>
		<drill_cycle_11>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_11>
		<drill_cycle_12>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_12>
		<drill_cycle_13>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_13>
		<drill_cycle_14>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_14>
		<drill_cycle_15>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_15>
		<drill_cycle_16>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_16>
		<drill_cycle_17>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_17>
		<drill_cycle_18>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_18>
		<drill_cycle_19>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_19>
		<drill_cycle_20>
			<description>
				<text>""</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>""</text>
			</dwell>
			<clearance>
				<text>""</text>
			</clearance>
			<retract>
				<text>""</text>
			</retract>
			<depth>
				<text>""</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>""</text>
			</description>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>""</text>
			</description>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 3</text>
			</description>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 4</text>
			</description>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 5</text>
			</description>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 6</text>
			</description>
		</bore2_custom_parameters>
		<misc1_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 7</text>
			</description>
		</misc1_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 8</text>
			</description>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 9</text>
			</description>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 10</text>
			</description>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 11</text>
			</description>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 12</text>
			</description>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 13</text>
			</description>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 14</text>
			</description>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 15</text>
			</description>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 16</text>
			</description>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_17_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 17</text>
			</description>
		</drill_cycle_17_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 18</text>
			</description>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 19</text>
			</description>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Param�tres de cycle sp�cial 20</text>
			</description>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>Per�age G81</text>
			</simple_drill>
			<peck_drill>
				<text>D�bourrage G83</text>
			</peck_drill>
			<chip_break>
				<text>Brise copeaux G82</text>
			</chip_break>
			<tapping>
				<text>Taraudage G84.2</text>
			</tapping>
			<boring_1>
				<text>Al�sage G85</text>
			</boring_1>
			<boring_2>
				<text>""</text>
			</boring_2>
			<misc_drill_1>
				<text>""</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>""</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>""</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>""</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>""</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>""</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>""</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>""</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>""</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>""</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>""</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>""</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>""</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>""</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
</mp_xml_post_text>
[CTRL_TEXT_XML_END]
