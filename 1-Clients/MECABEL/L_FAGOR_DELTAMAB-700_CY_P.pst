[POST_VERSION] #DO NOT MOVE OR ALTER THIS LINE# V23.00 P4 E1 W23.00 T1603893019 M23.00 I0 O0
scncpost_revision     := "80" # Internal revision number for use by CNC Software only.  Please do not change this number.
scustpost_revision    := "0"  # Revision number for use by Resellers or customers.
# +-----------------------------------------------------------------------------+
# |         Post pro TOURNAGE MONO TOURELLE                                     |
# |         MONO BROCHE  avec AXE C-Y                                           |                                                     |
# +-----------------------------------------------------------------------------+
# |                 F.I.Cam                                                     |
# |    Immeuble oceane 1 rue joseph fourier parc d'Archevillier 28000 Chatres   |
# +-----------------------------------------------------------------------------+
# | Realise le      : 20/04/18  Par : VM - SF                                   |
# | Pour la societe : SOFRAPI                                                   |
# | Armoire CN      : FAGOR-806S-T-MCU --> 806x Tournage                                        |
# | Nom MACHINE     : DELTAMAT 400 CY                                           |
#
# AXE C usinage de "FACE" -->
#       --> G6 X C et I J coordonnées en ABSOLU ---- X C & I J coordonnées au RAYON comme au FRAISAGE
#       --> (arctype$ = 1 --> ABSOLU en FRAISAGE dans l'armoire)
#		--> couper les arcs de fraisage à 180°
#
# WARNING: THIS POST IS GENERIC AND IS INTENDED FOR MODIFICATION TO
# THE MACHINE TOOL REQUIREMENTS AND PERSONAL PREFERENCE.
#
# --------------------------------------------------------------------------
# Revision log:
# --------------------------------------------------------------------------
# Programmers Note:
# CNC 01/12/01  -  Initial post update for V8.1, grt
# CNC 05/17/01  -  Changed parameter that groove 'directcc' was read from, rjm
# CNC 06/01/01  -  Added 'foundcc = zero' in postblock 'psub_call_s', rjm
# CNC 06/19/01  -  Altered thread taper calc. for G92 & G76 threading, rjm
#                  Now takes Acceleration Clearance in account when
#                  calculating the taper parameter for these cycles.
#               -  Altered G92 box threading cycle output, rjm
#                  Force X axis output in 'pthrg92_3' (for spring passes).
#                  No longer restates 'R' taper value on each 'X' block.
# CNC 06/25/01  -  Altered to force output of initial G-code on canned cycles.
# CNC 07/02/01  -  Add cantext to cancel drill and tool retract, jph
# CNC 07/03/01  -  Changed parameter that groove 'directcc' was read from, rjm
# CNC 09/05/01  -  In postblock 'pnullspindle' the additional logic of ->, rjm
#                  'prv_css_actv <> css_actv' was added in 2 if statements.
#                  This takes care of the unusual (but possible) situation
#                  were the spindle transitions from CSS -> RPM or RPM -> CSS
#                  with the SAME speed value at a NULL tlchg.
#                  Ex: (Going from 400RPM -> 400CSS at a NULL Toolchange)
#                - Added 'css_start_rpm' switch to allow disabling the
#                  usual G97S???? RPM initial spindle startup when CSS mode
#                  is programmed.
# CNC 09/21/01  -  Modified logic in pmsicint to address bug with MI2 not being read, jce
# CNC 01/08/02  -  Initial post update for V9.0, rjm
# CNC 02/12/02  -  Added skeleton code for MiscOps example, grt
#
#
# ****************** ATTENTION EN DEBOGAGE LES CYCLES MACHINES SONT DETAILLES ***************************
#
# --------------------------------------------------------------------------
# Features:
# --------------------------------------------------------------------------
#######          MILL/TURN FUNCTIONS SUPPORTED BY THIS POST          #######
#
# This post supports Generic Fanuc code output for mill/turn lathes.
# It is designed to support the features of Mastercam Mill V8.
#
# Following Misc. Integers are used:
#
# mi1 - Work coordinate system: (home_type)
#       -1 = Reference return / Tool offset positioning.
#       0 = G50 with the X and Z home positions.
#       1 = X and Z home positions.
#       2 = WCS of G54, G55.... based on Mastercam settings.
#
# mi2 - Absolute or Incremental positioning at top level
#       0 = absolute
#       1 = incremental
#
# mi3 = Select G28 or G30 reference point return:
#       0 = G28, 1 = G30
#
# mi4 = Canned conversion cycle type selection:
#       Mill-
#       Activates milling axis conversation canned cycles (G107 or G112).
#       1 or -1 activates the cycle, the path continues until next entry is
#       zero, sign switches (1 to -1) forces g113 at null toolchnge, the
#       cycle changes or the tool changes.
#
#0080 mi10 - CRF X value    #Set this integer in the canned finish path
#       0=orig
#       1=post
#       Used to change the initial X value before the canned cycle call to the OD (original)
#       X value of the canned rough.  this is a safetly precaution to avoid a rapid approach
#       through the part to your lathe canned finish ops.
#
#Canned text:
#  Entering cantext within Mastercam allows the following functions to
#  enable/disable.
#  cantext value:
#  1 = Stop =  output the "M00" stop code
#  2 = Ostop = output the "M01" optional stop code
#  3 = Bld on = turn on block delete codes in NC lines
#  4 = bLd off = turn off block delete codes in NC lines
#  5 = Ret. tlstk =  output the code to retract the tail stock
#  6 = Adv. tlstk =  output the code to advance the tail stock
#  7 = Ret. chute =  output the code to retract the chute
#  8 = Adv. chute =  output the code to advance the chute
#  9 = Exstp = turn on the exact stop code in the NC line
#  10 = Exstp = turn off the exact stop code in the NC line
#  11 to 99 output the value selected
#
#TURN TOOLPATHS:
#Lathe canned cycles:
# V8 supports lathe canned turning cycles through Mastercam.  This post
# is configured to process them.
#
#MILL TOOLPATHS:
#Mill Layout:
# The term "Reference View" refers to the coordinate system associated
# with the Mill Top view (Alt-F9, the upper gnomon of the three displayed).
# Create the part drawing with the the axis of rotation along the X axis
# of the "Mill Reference View" with the face of the part toward the side
# view (Mill Reference View X plus direction).  The Y plus axis of the
# Mill Reference View indicates the position on the part of C zero
# (View number 3).  The right or left side view are the only legal views
# for face milling.  The view number 3 rotated about the X axis as a
# "single axis rotation" are the only legal views for cross milling
# except for axis substitution where the top view is required.
# Rotation around the part is positive in the CCW direction when viewed
# from the side view.
# (The Chook 'CVIEW' should be used for creating milling tool plane and
# construction plane selections, C axis toolpaths in lathe perform
# this function automatically).
#NOTICE: View number 3 always indicates the location for C zero.  Milling
#        with a turret below the centerline indicates C at 180 degrees.
#
#Mill canned cycles:
#Cylindrical interpolation, G107 canned cycle:
# Cylindrical interpolation is created with axis substitution only.
# Use the Caxis/C_axis Contour toolpath.  Create the geometry from
# view number 4 if the rotation of C axis is CCW.  This prevents producing
# a mirror image.  Wrapped and unwrapped geometry are broken and arcs are
# lost so it is better to create flattened geometry.  Set the parameters
# in Rotary Axis not to 'unroll' and set the correct diameter.
# Use View number 3 as the C0 location.  Set mi4 to activate!
#
#Polar interpolation, G112 canned cycle:
# Polar interpolation is active only for face cutting (Right or Left).
# Use the Caxis/Face Contour toolpath.  Create geometry for the lead in
# and lead out with the start and end position on the View number 3 tool
# axis.  All paths must start and end at the 'C0'location for output to
# be correct.  Chain the entire geometry without using Mastercam leads.
# Set mi4 to activate!
#
#Axis substitution:
# View number 3 is the C zero location on the part and corresponds to the
# Y zero position of the "Mill Reference View".  Positions are wrapped
# from and to the diameter of the part as CCW for the Y positive direction.
# If geometry is drawn from View number 4 (Bottom), it is correct for the
# wrap/unwrap on the diameter.  The radius of the specified diameter is
# added to the Z position in the post.  The Y axis is the only axis to
# be converted with mill/turn.
#
#Simultaneous 4 Axis (11 gcode):
# Full 4 axis toolpaths can be generated from various toolpaths under the
# 'multi-axis' selection (i.e. Rotary 4 axis). All 5 axis paths are
# converted to 4 axis paths where only the angle about the rotation axis
# is resolved. Use View number 3 for the toolplane with all 'multi-axis'.
# 4 and 5 axis toolpaths are converted assuming cross machining only!
#
#Y axis output and machining over part center:
# Output Y axis motion by setting 'Rotary axis/Y axis' in the NC
# parameter page and setting y_axis_mch in the post to one.
# Set 'Rotary axis/Y axis' in a machine with no Y axis (y_axis_mch = 0)
# to force linear/circular position moves in the XZ plane (g18).
# This allows machining over the part center.
#Caution: The machining must stay in the XZ plane at a Y fixed value
# when y_axis_mch = zero because no C (other than the Tplane) or
# Y positions are output!!!  This occurs when selecting C_axis/Cross
# Contour without 'y_axis_mch'.  Use Mill toolpaths for cross profiling.
#
#NOTICE: Milling through the part center with a linear move requires the
#        geometry be broken at the centerline.  Milling through the part
#        center with an arc move in the G18 plane, no Y axis and on the
#        negative side of X, reverses only the arc direction and I sign.
#
#Additional Notes:
# 1) G54 calls are generated where the work offset entry of 0 = G54,
#    1 = G55, etc.
# 2) Metric is applied from the NCI met_tool variable.
# 3) The Tplane angle is added to polar conversion and rotary paths.
# 4) The variable 'absinc' is now pre-defined, set mi2 (Misc. Integer) for
#    the 'top level' absolute/incremental program output.  Subprograms are
#    updated through the Mastercam dialog settings for sub-programs.
# 5) Lathe disables coordinate mirror and rotate subprograms.
# 6) When creating tools the diameter/radius should end as even numbers
#    relative to the machine precision. EX. Enter 1.0002 dia. and not
#    1.0001 dia. with a machine accuracy of .0001.
# 7) Transform subprograms are intended for use with G54... workshifts.
# 8) Incremental motion at a toolchange is calculated from the values
#    entered for home position.
#
#******************************************
#Notes:
#Arret préci: /dans le bloc = G9/ /dans une suite de blocs = M28(=activé); G...X..; X..Z;M29 (=désactivé)/
#
# MODIF PST
#0001 le 21 02 05 Cycle de perçage
#0002 le 18 04 05 force le retour aux OM
#0003 le 18 04 05 calcul auto du Z fin de filetage moin une garde de 0.2
#0004 le 05 12 05 ajouts et modifs pour forcer le G71 ou G72
#0005 le 12 01 06 modif pour les fonctions machines "pcan"
#0006 le 20 04 06 modif pour num. G71 G72, compteur de cycles pour les numéros de blocs
#0007 le 15 05 06 validation de l'axe Y
#0008 le 15 05 06 sortir du PST si le pas de filet. = 0 "par défaut pas = 0 dans Mastercam"
#0009 le 06 06 06 pour deux broches
#0010 le 19 09 06 modif pour ne pas affiher le Z sur le trou avec le Z départ en positif
#0011 le 13 11 06 Machine non SP, / 10 les valeurs passe de filetage
#0012 le 15 11 06 - Affichage des commentaires de début d'OP en entete Prog. (Commentaire usinage dans de la BIBLI)
#  "    "   " - variable "entetequestion" 0 = pas de questions PST (entete en fichier texte), 1 = questions PST
#0013 le 21 11 06 - Pour afficher entete avec "OP de Modification" (pour morceau de programme)
#0030 le 28 11 06 - Pour Gerer les num. prog. ISO FORMAT: F=Fraisage ou T=Tournage, Num d'article,- Indice plan,-
#           Num d'op,- Initiales Machine    ex: F016230-02-1-HE.H
#           possibilité de revenir à l'ancienne numérotation "change_nom" = 0 ou 1
#0031 le 28 02 07 - Suppression de l'affichage des G41/G42 en tournage
#0032 le 02 03 07 - Modif pour départ du cycle G71 **Attention ne gère pas les poches (à modifier).
#0033 le 18 04 07 - Exit PST si le profil du cycle d'ébauche n'est pas complet
#0040 le 18 06 07 - Modifs suite passage VX
#0042 le 01 09 07 - Modifs passage VX
#0045 le 11 02 08 - Ajouts pour VX
#0046 le 02 03 08 - conversion pour avoir les contours en axe C avec X et C et non du point par point **je force la valeur optionnel à 1 (pas besoins de modifier dans MC "valeur optionnel mi4"
#0049 le 07 04 08 - Ajout suivant pst MPFAN VX
#0050 le 03 04 08 - modif pour affichage des corrections d'outils
#0051 le 19 04 08 - Modif pour ne pas afficher le M5 si la direction M3 M4 CHANGE
#0052 le 19 04 08 - Modif pour cycles de G83 à G...
#0053 le 18 06 08 - Modif pour enlever le retour "valeurs MC" entre 2 outils en fraisage
#0054 le 27 06 08 - Ajout pour utiliser cycle de perçage profond degressif en Macro
#0055 le 09 07 08 - Ajout pour gerer la fin du filetage en + ou en - suivant la broche
#0056 le 25 07 08 - Ajout pour gerer les blocages des 2 broches "M68 M69 M268 M269"
#0057 le 13 11 08 - Ajout pour afficher le bon X au début et à la fin du Fraisage avec l'axe X et C en G112 et G113
#0058 le 19 11 08 - Modifs pour enlever les repetitions du X dans le filetage
#0059 le 12 12 08 - Ajout pour l affichage du mode de correction de rayon
#0060 le 15 12 08 - Inutil en VX2, fait depuis MC
#0061 le 14 01 09 - Modif pour la reference en percage de face FR R = à la distance qui reste à parcourir depuis la position Z jusqu'à la garde = valeur incrementale (en -)
#0062 le 14 01 09 - Modif pour afficher le bon cycle de percage en fraisage en fonction du sens de l'outil.
#0063 le 05 05 09 - Ajout pour les transfert de pièce
#0064 le 26 06 09 - Modif pour le cycle d'alésage "alésoir"
#0065 le 06 07 09 - Modif pour le format de prof. de perçage D au micron
#0066 le 28 09 09 - Modif pour le taraudage rigide sur la face
#0067 le 21 10 09 - Ajout pour avertir des avances en mm/tour trop grandes suite au "choix d'avances suivant la bibliothèque outil, -page outil-"
#0068 le 05 01 10 - Ajout pour gerer les limitations de vitesses en tronçonnage
#0069 le 02 11 10 - Ajout pour forcer l'affichage de la prochaine correction de rayon

#0071 le 07 02 11 - Ajout en tant que garde fou pour éviter des valeurs différentes d'origines dans une même OP
#0072 Le 14 03 11 - Ajout pour éviter les G96 modifiés en trop élevés.
#0073 le 07 10 13 - Ajout pour afficher un message s'il y a un retour aux OMs en étant en Z- et en inter
#0074 Le 07 03 11 - Modif pour la gestion des "décallages programmés" ***G10 P1 W-***       P1=G54  W-3.5
#0075 Le 14 09 11 - Ajout pour afficher le texte d'orientation d'outil de fraisage automatiquement "RADIAL" ou "AXIAL"
#0076 Le 13 12 11 - Modif pour afficher la bonne correction de rayon en fraisage radiale
#0080 Le 09 07 12 - Ajout depuis la Version X6 pour les cycles d'ébauche machine
#0081 Le 10 07 12 - Ajout pour afficher les surep. dans les cycles de gorges CN
#0082 Le 10 07 12 - Ajout: Switch, Uniquement affichage du texte en entete compensation de l'outil dans le prog.
                    #OUI/NON = usure ou ordi suivant la bibliothèque outil
#0083 le 19 04 13 - Ajout pour forcer l'avance en mm/tour
#0084 le 21 11 13 - Ajout pour erreur fin de cycle d'ébauche avec interpolation

#0085 le 24 02 14 - Ajout pour affichage O/N de l'annulation du correcteur
#0086 le 03 04 14 - Ajout pour afficher le G113 à la fin de l'usinage en G112
#0087 le 23 04 14 - Ajout pour afficher un message si le -Y- dépasse les limites machines. Valeur au Ø
##0088 le 23 04 14 - Ajout pour la gestion de l axe C
#0089 LE 18-12 15 - Ajout pour le G112/G113
#0090 le 18-12-15 - Ajout pour les de-blocages et blocage de broches
#0091 le 08-02-16 - Ajout et modifs pour afficher le bon -c- au départ du G112

#0120 le 15-04-16 - modif pour supprimer la virgule pour les entetes
#0121 le 30-05-16 - Ajout pour supprimer le "G0" dans le "G112/G113"

#0122 Le 05-07-17 - Modif complete pour les "Blocages et déblocages des broches"
#0123 Le 13-09-17 - Ajout pour données outils

#0200 Le 05 03 08 - Ajout pour gerer les erreurs entre MC et le PST ex: G41 dans les cercles, taraudage sans le G84...
#0300 le 13 01 08 - Ajout Pour Gerer les num. prog. ISO FORMAT: F=Fraisage ou T=Tournage, Num d'article,- Indice plan,-
#           Num d'op,- Initiales Machine    ex: F016230-02-1-HE.H   **en commentaire** et le **PR0000---** en nom de fichier
#FS le 17-12-2015 - Modifs
# ------------ Attention ---------
# pour gerer l'ISO correcte de l'usinage de la broche de droite, il faut valider "la broche de droite"
# dans la "configuration de l'outil" et dans l'opération, onglet parametre "Combi. axes" mettre "upper right"
# Vérifier la bonne représentation de l'outil.
#
# --------------------------------------------------------------------------
# Debugging and program switches
# --------------------------------------------------------------------------

[STARTBIN]
mi1$ = 1 #0002 ajouté pour forcer le retour aux OM suivant la question 301
mi4$ : -1 #0046 POUR MACHINES UTILISANT LE G112/G113
mi5$ : 0 #0056

reglage_pp = 0            #affiche les valeurs des variables
macro_perc_profond : 0
M_zero1_apres_butee : 0    #arret avec un M01 et ligne vide
M_Zero5_ptlchg : 0         #M05 avant le changement d'outils

entetequestion  : 0 #0 = pas de questions PST (entete en fichier texte), 1 = questions PST
change_nom : 0      #1 = nouvelle nomination des programmes 0 = ancienne

m_one       :  -1   #Define constant
zero        : 0     #Define constant
one         : 1     #Define constant
two         : 2     #Define constant
three       : 3     #Define constant
four        : 4     #Define constant
five        : 5     #Define constant
c9k         : 9999  #Define constant

#fastmode    : yes      #Enable Quick Post Processing, (set to no for debug)
fastmode$    : yes$     #Posting speed optimizition
bug1$        : 2        #0=No display, 1=Generic list box, 2=Editor
bug2$        : 40       #Append postline labels, non-zero is column position?
#CNC<<ECHEC>>bug3$        : 0        #Append whatline no. to each NC line?
#CNC<<MSG -ERREUR(298)>> The variable, postblock, or other keyword is no longer supported
bug4$        : 1        #Append NCI line no. to each NC line?
whatno$      : yes$     #Do not perform whatline branches? (leave as yes)
linktolvar$    : 0      #1 Associer les variables de tolérance X aux variables V9-
linkplnvar$    : 0      #1 Associer les variables spécifiques plan X aux variables V9-?
linklvar$      : 0      #1 Associer les variables spécifiques X Tournage aux variables V9-

skp_lead_flgs$ : 1      #Do NOT use v9 style contour flags
get_1004$    : 0        #Find gcode 1004 with getnextop?
rpd_typ_v7$  : 0        #Use Version 7 style contour flags/processing?
strtool_v7$  : 2        #Use Version 7+ toolname?
tlchng_aft$  : 2        #Delay call to toolchange until move line
cant_tlchng$ : 1        #Ignore cantext entry on move with tlchng_aft
newglobal$   : 1        #Error checking for global variables
getnextop$   : 1        #Build the next variable table
cc_1013$     : 1        #Read cc_pos on the 1013 line, lathe #pour connaitre cc dans appel outil
#uselstation: 1         #Use Version 7 mill tool reference

pprep$      #0040 bloc init post pro en remplacement de la def armoire

        #pdebug
      #0045
      rd_cd$       #Read CD Parameters
      rd_mch_ent_no$ = 0  #Read only the machine base parameters (use to collect common parameters from CNC_MACHINE_TYPE)
      rd_md$       #Read machine definition parameters
      #breakarcss   = breakarcs$   #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs
      breakarcsxzs = breakarcsxz$ #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs
      breakarcsyzs = breakarcsyz$ #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs

      #if write_ops = 0, result=mprint(swriteopserror, 2) #Write NC Operation information MUST be enabled in CD


pdebug
        err_file$ = 4
        bug2$ = 60
        fastmode$ =1    #1 = Affiche les erreurs du pst dans un fichier .err

# --------------------------------------------------------------------------
# General Output Settings
# --------------------------------------------------------------------------
sub_level$   : 1        #Enable automatic subprogram support
breakarcs$   : 2        #1 Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs
arcoutput$   : 1        #0 = IJK, 1 = R no sign, 2 = R signed neg. over 180
arctype$     : 2        #CD_VAR arctype$, arctpeyz$, arctypxz$
                        #Arc center 1=abs, 2=St-Ctr, 3=Ctr-St, 4=unsigned inc.,
                        #5 = R no sign, 6 = R signed neg. over 180
do_full_arc$ : 0        #Allow full circle output? 0=no, 1=yes
helix_arc$   : 1        #0 Support helix arc output, 0=no, 1=all planes, 2=XY plane only
arccheck$    : 1        #Convert small arcs to linear, 1=ltol, 2=atol,ltol
atol$        : 0.01     #Angularity tolerance for arccheck = 2
ltol$        : 0.002    #Length tolerance for arccheck = 1
vtol$        : 0.0001   #System tolerance
maxfeedpm   : 500       #Limit for feed in inch/min
lcc_move    : 0.05      #Enter the move in X, Z for lathe canned cycle comp.
ltol_m      : 0.05      #Length tolerance for arccheck = 1, metric
vtol_m      : 0.0025    #System tolerance, metric
maxfeedpm_m : 10000     #Limit for feed in mm/min
lcc_move_m  : 1.25      #Enter the move in X, Z for lathe canned cycle comp.,mm

force_wcs   : yes$      #Force WCS output at every toolchange?
spaces$      : 0        #No. of spaces to add between fields
omitseq$     : yes$     #Omit sequence no. (use -1 to enable sequence for LCC)
seqmax$      : 9999     #Max. sequence no.
nobrk$       : no$      #Omit breakup of x, y & z rapid moves
progname$    : 1        #Use uppercase for program name
rotaxtyp$    : 3        #Rotary axis type for toolplane
tooltable$   : 3        #3 Read for tool table and pwrtt (3 recalls pwrtt at sof)
ref_ret     : 0         #G29 / G30 return variable from Mi3
css_start_rpm : yes$    #Do direct RPM spindle start prior to CSS ?
sextnc$ : "NC"           # extension des fichier nc

info_corr   : 0         #0059 afficher le type de correction
type_comp   :-9999      #0059

troncon     : -1        #0063
avance_broche_2 : 0     #0063
compensat_outil : 0     #0082 compensation de l'outil dans le prog. OUI/NON = usure ou ordi
annul_correct : 0       #0085 affichage O/N de l'annulation du correcteur


Y_maxi = 110            #0087 valeur Mini/Maxi en -Y- SANS le diamètre de l'outil. Valeur au Ø
# --------------------------------------------------------------------------
#0060 Enable Canned Drill Cycle Postblocks, set for mill and lathe
# --------------------------------------------------------------------------
#pcuttypldrl   #Change cut parameters for lathe drill
      #usecandrill$ = 1
      #usecanpeck$ = 1
      #usecanchip$ = 1
      #usecantap$ = 1
      #usecanbore1$ = 1
      #usecanbore2$ = 1
      #usecanmisc1$ = 1
      #usecanmisc2$ = 0

#pcuttypmdrl   #Change cut parameters for mill drill
      #usecandrill$ = 1
      #usecanpeck$ = 1
      #usecanchip$ = 1
      #usecantap$ = 1
      #usecanbore1$ = 1
      #usecanbore2$ = 1
      #usecanmisc1$ = 1
      #usecanmisc2$ = 0

# --------------------------------------------------------------------------
# Machine Specific Settings
# --------------------------------------------------------------------------
#Machine axis switches, initial
y_axis_mch  : no$    #no Machine has Y axis, 0=no, 1=yes    #0007
old_new_sw  : 1     #Switch old (6T), new (0T+) cycle formats, 0=old, 1=new
wcs_origin  : 0     #Always use the WCS origin for coordinates
dia_mult    : 2     #Multiplier for output on X axis (Neg. switches sign of X)
dia_mult2   : 1     #0074 Multiplier for output on X axis (Neg. switches sign of X)
y_mult      : 1     #Multiplier for output on Y axis (Neg. switches sign of Y)
z_mult      : 1     #Multiplier for output on Z axis (Neg. switches sign of Z)
dia_shift   : 0     #Shift for output on X axis, radial entry
y_shift     : 0     #Shift for output on Y axis
z_shift     : 0     #Shift for output on Z axis
map_home    : yes$   #Use home positions as enterd or map to machine axis

old_sub_trnsz_ : 0  #0074
old_sub_trnsx_ : 0  #0074

#C axis and Index switches
str_cax_abs : "C"     #String address for absolute rotary axis
str_cax_inc : "H"     #String address for incremental rotary axis
str_index   : "B"     #String address for indexer
frc_cinit   : 1     #1 Force C axis reset at toolchange
c_shift     : 0     #Shift for output on bottom turrets with C axis
ctol        : 270   #Tolerance in deg. of inc. move before 'rev' flag changes
ctable      : 15    #Degrees for each index step with indexing spindle
ixtol       : 0.01  #Tolerance in deg. for index error
maxfrdeg    : 2000  #Limit for feed in deg/min
frdegstp    : 10    #Step limit for rotary feed in deg/min

#Spindle switches and values
use_gear    : 0      #Output gear selection code, 0=no, 1=yes
cool_w_spd  : 0      #1 Output coolant with spindle code, 0=no, 1=yes
max_speedl0 : 4500   #Maximum spindle speed (lathe), Bottom turret/Left spindle
min_speedl0 : 20     #Minimum spindle speed
max_speedm0 : 5000   #Maximum spindle speed (mill)
min_speedm0 : 50     #Minimum spindle speed
max_speedl1 : 4500   #3600Maximum spindle speed (lathe), Top turret/Left spindle
min_speedl1 : 20     #Minimum spindle speed
max_speedm1 : 5000   #Maximum spindle speed (mill)
min_speedm1 : 50     #Minimum spindle speed
max_speedl2 : 4500   #3600Maximum spindle speed (lathe), Bottom turret/Right spindle
min_speedl2 : 20     #Minimum spindle speed
max_speedm2 : 5000   #Maximum spindle speed (mill)
min_speedm2 : 50     #Minimum spindle speed
max_speedl3 : 4500   #3600Maximum spindle speed (lathe), Top turret/Right spindle
min_speedl3 : 20     #Minimum spindle speed
max_speedm3 : 5000   #Maximum spindle speed (mill)
min_speedm3 : 50     #Minimum switchesspindle speed
max_speedm4 : 1800   #S maxi avec la pointe

#Machining position turret/spindle settings
# Switch strings based on turret position top/bottom-left/right and cut type.
# Turret position is based on the Mastercam settings (see lathtype).
# Strings are re-assigned for output in the routine psw_str_mult.
# The string variable sw_string holds the place position value to determine
# how to assign the strings.  Planes are relative to the view from Mastercam.
# Assign the 17 digit string following the alpha columns below:
# A - C axis, 1 = axis winds, 2 = axis signed, 3 = indexer
# B - Spindle direction, 0 = normal, 1 = reverse
# C - Plane 0 arc/comp, 0 = normal, 1 = switch
# D - Plane 1 arc/comp, 0 = normal, 1 = switch
# E - Plane 2 arc/comp, 0 = normal, 1 = switch
# F - Plane 0, 0 = G17, 1 = G19, 2 = G18
# G - Plane 1, 0 = G17, 1 = G19, 2 = G18
# H - Plane 2, 0 = G17, 1 = G19, 2 = G18
# Decimal (required)
# I - Plane 0, X axis, 0 = normal, 1 = switch sign from basic
# J - Plane 0, Y axis, 0 = normal, 1 = switch sign from basic
# K - Plane 0, Z axis, 0 = normal, 1 = switch sign from basic
# L - Plane 1, X axis, 0 = normal, 1 = switch sign from basic
# M - Plane 1, Y axis, 0 = normal, 1 = switch sign from basic
# N - Plane 1, Z axis, 0 = normal, 1 = switch sign from basic
# O - Plane 2, X axis, 0 = normal, 1 = switch sign from basic
# P - Plane 2, Y axis, 0 = normal, 1 = switch sign from basic
# Q - Plane 2, Z axis, 0 = normal, 1 = switch sign from basic
use_only_tl : 0     #0009 1 Use only Top turret/Left spindle settings (below) for
                    #all Mastercam turret/spindle selections
                    #When configuring for multi-spindle/turret set to 0

#Columns-    ABCDEFGH.IJKLMNOPQ #Turret/Spindle            #Path Type
scase_tl_c1  : "10000222.000000000"  #Top turret/Left spindle, Turning cut
scase_tl_c2  : "11000012.000000000"  #Top turret/Left spindle, Right Face cut
scase_tl_c_2 : "11110012.000000000"  #Top turret/Left spindle, Left Face cut
scase_tl_c3  : "10010102.000000000"  #Top turret/Left spindle, Cross cut
scase_tl_c4c : "10000111.000000000"  #Top turret/Left spindle, Y axis subs. Cycle
scase_tl_c4  : "10000222.000000000"  #Top turret/Left spindle, Y axis subs.
scase_tl_c5  : "10000222.000000000"  #Top turret/Left spindle, Multisurf Rotary

#Columns-    ABCDEFGH.IJKLMNOPQ
scase_bl_c1  : "10000222.000000000"  #Bottom turret/Left spindle, Turning cut
scase_bl_c2  : "11000012.000000000"  #Bottom turret/Left spindle, Right Face cut
scase_bl_c_2 : "11110012.000000000"  #Bottom turret/Left spindle, Left Face cut
scase_bl_c3  : "10010102.000000000"  #Bottom turret/Left spindle, Cross cut
scase_bl_c4c : "10000111.000000000"  #Bottom turret/Left spindle, Y axis subs. Cycle
scase_bl_c4  : "10000222.000000000"  #Bottom turret/Left spindle, Y axis subs.
scase_bl_c5  : "10000222.000000000"  #Bottom turret/Left spindle, Multisurf Rotary

#Columns-    ABCDEFGH.IJKLMNOPQ
scase_tr_c1  : "10000222.000000000"  #Top turret/Right spindle, Turning cut
scase_tr_c2  : "11000012.000000000"  #Top turret/Right spindle, Right Face cut
scase_tr_c_2 : "11110012.000000000"  #Top turret/Right spindle, Left Face cut
scase_tr_c3  : "10010102.000000000"  #Top turret/Right spindle, Cross cut
scase_tr_c4c : "10000111.000000000"  #Top turret/Right spindle, Y axis subs. Cycle
scase_tr_c4  : "10000222.000000000"  #Top turret/Right spindle, Y axis subs.
scase_tr_c5  : "10000222.000000000"  #Top turret/Right spindle, Multisurf Rotary

#Columns-    ABCDEFGH.IJKLMNOPQ
scase_br_c1  : "10000222.000000000"  #Bottom turret/Right spindle, Turning cut
scase_br_c2  : "11000012.000000000"  #Bottom turret/Right spindle, Right Face cut
scase_br_c_2 : "11110012.000000000"  #Bottom turret/Right spindle, Right Face cut
scase_br_c3  : "10010102.000000000"  #Bottom turret/Right spindle, Cross cut
scase_br_c4c : "10000111.000000000"  #Bottom turret/Right spindle, Y axis subs. Cycle
scase_br_c4  : "10000222.000000000"  #Bottom turret/Right spindle, Y axis subs.
scase_br_c5  : "10000222.000000000"  #Bottom turret/Right spindle, Multisurf Rotary

# --------------------------------------------------------------------------
# Common User-defined Variable Initializations (not switches!)
# --------------------------------------------------------------------------
cuttype     : 0     #Flag for cut type
                    #1 = Lathe
                    #2 = Right face cut (a = 90)
                    #-2 = Left face cut  (a = -90)
                    #3 = Cross cut      (a = 0)
                    #4 = Y axis substitution
                    #5 = Multisurf Rotary 4 axis or 11 gcode
lathtype    : 0     #Lathe turret and spindle selection
                    #0 = Bottom turret/Left spindle
                    #1 = Top turret/Left spindle
                    #2 = Bottom turret/Right spindle
                    #3 = Top turret/Right spindle
lathecc     : 0     #Flag for canned turning cycle type
                    #1 = G71/G72 rough cycle
                    #2 = G73 pattern repeating cycle
                    #3 = G74/G75 groove cycle
                    #4 = Finish pass for types 1 and 2
                    #Neg.=rough and finish, Pos.=rough only
millcc      : 0     #1 = USINAGE axe C  **Flag for mill conversion cycle type
millcc_flag : 0     #Flag to indicate polar interpolation cycle is active

#Cantext activated flags
bld         : 0     #Block delete active
exact       : 0     #Exact stop active
chute       : 0     #Toggle for part catcher operation
tlstk       : 0     #Toggle for tailstock operation

#General user variables
xia         : 0     #Formated absolute value for X
yia         : 0     #Formated absolute value for Y
zia         : 0     #Formated absolute value for Z
cia         : 0     #Formated absolute value for C
copy_x      : 0     #X value copy, prevent compound operations
copy_y      : 0     #Y value copy, prevent compound operations
copy_z      : 0     #Z value copy, prevent compound operations
xa          : 0     #Absolute coordinate mapped value for X
ya          : 0     #Absolute coordinate mapped value for Y
za          : 0     #Absolute coordinate mapped value for Z
cfeed_x     : 0     #Absolute mapped/rotated unshifted value for X
cfeed_y     : 0     #Absolute mapped/rotated unshifted value for Y
cfeed_z     : 0     #Absolute mapped/rotated unshifted value for Z
xca         : 0     #Absolute unshifted value for XC
yca         : 0     #Absolute unshifted value for YC
zca         : 0     #Absolute unshifted value for ZC
sav_xa      : 0     #X saved value
sav_ya      : 0     #Z saved value
sav_za      : 0     #Z saved value
sav_xh      : 0     #X saved value
sav_yh      : 0     #Z saved value
sav_zh      : 0     #Z saved value
sav_cc_1013 : 1     #0050 Capture value of cc_1013 flag  # 1/17/03
#sav_spc     : 0     #Save spaces

conversion  : 12    #Unit conversion value, do not change
result      : 0     #Return value for functions
compok      : 1     #Flag to output cutter compensation
toolchng    : 1     #On a toolchange flag
#toolchng     : 2     #On a toolchange flag
toolchng0    : 0     #On a null toolchange flag
plane$      : -1    #Initialize plane
ipr_actv$   : -1    #Initialize active feed type
mach_plane  : 0     #Plane mapped to machine
sav_arcout  : arcoutput$ #Arc output type saved
breakarcss   : breakarcs$ #Break arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs
breakarcsxzs : 0     #Store initial value of breakarcsxz$
breakarcsyzs : 0     #Store initial value of breakarcsyz$

sav_absinc  : 0     #Saved absolute/Incremental
spd_rev     : 0     #Flag to reverse spindle direction
sav_gcode   : 0     #Gcode saved
sav_feed    : 0     #Feed saved
sav_ipr     : 0     #IPR saved
sav_feedcc  : 0     #Feed saved, canned cycle
sav_iprcc   : 0     #IPR saved, canned cycle
sav_spdir   : 0     #Spindle direction saved
sav_omitsq  : 0     #Omitseq saved
sav_subout  : 0     #0 Saved subout
sav_frc_wcs : 0     #Force work offset flag saved
sav_bug2    : bug2$  #Saved setting for bug2
sav_cutpos2 : 0     #Patch to handle cutpos2 flag through null toolchnages
cir_at_zero : 0     #Arc center at centerline in XY plane, -1 if not plane 0
pnt_at_zero : 0     #Position at centerline with milling
c_ax_flp    : 0     #G18 plane with C axis arcs in neg. range
home_type   : 1     # 0 Flag for type of home location, read from misc. int.
rslt_plc    : 0     #Return value from plcval
rslt_upd    : 0     #Return value from updstr

#Drilling variables
drlgsel     :  -1   #Drill Select Initialize
drillref    :  -1   #Select drill reference
peckacel$    : 0     #Fractional percent to reduce peck2 when usecan.. : no
mdrl_dir    : 0     #Mill drill direction for boolean, 0 = face, 1 = cross
zdrl_x      : 0     #Drill point, mapped X
zdrl_y      : 0     #Drill point, mapped Y
zdrl_z      : 0     #Drill point, mapped Z

#Threading variables
nstart_cnt  : 0     #Counter for multiple threads
thd_vlen    : 0     #Incremental X move for G76 mult starts
xmaj_thd    : 0     #X major dia. from parameters
zstrt_thd   : 0     #Z start from parameters
zend_thd    : 0     #Z end from parameters
face_thd    : 0     #Face thread from parameters

#Spindle variables
max_speed   : 0     #Maximum spindle speed (set by turret definition)
min_speed   : 0     #Minimum spindle speed (set by turret definition)
speedrpm    : 0     #Spindle calculation RPM
g_speed     : 0     #Generic positive spindle speed (rpm or css)
g_spdir     : 0     #Generic spindle direction
speedx      : 0     #Test spindle calculation X position
gear_spd    : 0     #Absolute value of gear speed

# Lathe canned cycle variables
gcodecc     : 0     #Canned turning cycle gcode
y_axis      : 0     #Flag for Y axis machining (implies over center)
directcc    : 0     #Direction from parameters
dopeckcc    : 0     #Do peck from groove parameters
foundcc     : 0     #Return found from G70 read
cc_stop_fcc : 0     #Stop output with rough only
lcc_cc_pos  : 0     #Position for lathe canned cycle cutter comp. enable
lccdirx     : 0     #Canned cycle X vector direction
lccdirz     : 0     #Canned cycle Z vector direction
lcc_xcst    : 0     #Lathe canned cycle contour start position
lcc_ycst    : 0     #Lathe canned cycle contour start position
lcc_zcst    : 0     #Lathe canned cycle contour start position
lcc_xcend   : 0     #Lathe canned cycle contour end position
lcc_ycend   : 0     #Lathe canned cycle contour end position
lcc_zcend   : 0     #Lathe canned cycle contour end position
lcc_compok   : 0     #Flag to output cutter compensation, lathe rough canned cycles
                     #1 = Process enabled
                     #2 = Allow comp output, inhibits work offset
                     #3 = Toolchange case to allow comp output, allow work offset
lcc_leadok   : 0     #Flag to output cutter compensation lead, lathe rough canned cycles, dependent on lcc_compok
                     #1 = Process enabled
                     #2 = Indicate to process the lead
lfc_compok   : 0     #Flag to output cutter compensation, lathe canned cycle profile
lfc_leadok   : 0     #Flag to output cutter compensation lead, lathe canned cycle profile, dependent on lcc_compok
lfc_in_sub   : 0     #Flag LCC profile sub is active
anglelcc     : 0     #Pattern offset angle
ncutslcc     : 0     #Number of passes

#Vector Varibles for Mapp ing and Rotatary Calculations
#Lathe - Uses top matrix - initialize here
m1$          : 1
m5$          : 1
m9$          : 1

#C rotation vector
caxisx      : 0
caxisy      : 0
caxisz      : 1

#Mapping matrix
#Home position mapping matrix
hmtx1       : 1
hmtx2       : 0
hmtx3       : 0
hmtx4       : 0
hmtx5       : 1
hmtx6       : 0
hmtx7       : 0
hmtx8       : 0
hmtx9       : 1

#Cut type mapping matrix
mmtx1       : 1
mmtx2       : 0
mmtx3       : 0
mmtx4       : 0
mmtx5       : 1
mmtx6       : 0
mmtx7       : 0
mmtx8       : 0
mmtx9       : 1

#Side matrix
smtx1       : 0
smtx2       : 1
smtx3       : 0
smtx4       : 0
smtx5       : 0
smtx6       : 1
smtx7       : 1
smtx8       : 0
smtx9       : 0

#Cross matrix
cmtx1       :  -1
cmtx2       : 0
cmtx3       : 0
cmtx4       : 0
cmtx5       : 0
cmtx6       : 1
cmtx7       : 0
cmtx8       : 1
cmtx9       : 0

#Back matrix
bmtx1       : 0
bmtx2       :  -1
bmtx3       : 0
bmtx4       : 0
bmtx5       : 0
bmtx6       : 1
bmtx7       :  -1
bmtx8       : 0
bmtx9       : 0

#Axis Subs matrix
amtx1       : 1
amtx2       : 0
amtx3       : 0
amtx4       : 0
amtx5       : 0
amtx6       : 1
amtx7       : 0
amtx8       : 1
amtx9       : 0

#C-axis variables for calculations
c_axistype  : 0     #1 = C axis winds-up, 2 = C axis signed absolute
                    #3 = index positioning (do not set here, use string)
rev_brkflag : 0     #Revolution break flag. 0 = No break, 1 = Break every 90 or 360 degrees (see plin0$)
ipr_type    : 0     #Feedrate for Rotary, 0 = UPM, 1 = DPM
csav        : 0     #Initial c axis result from pxyzcout call
czero_csav  : 0     #Save csav when circle at zero detected
c_wnd       : 0     #Calculation for c axis position tracking (abs-wind)
prvc_wnd    : 0     #Saved cout calculation from deg., this is cabs in mpfan
rev         : 0     #C axis wind-up multiplier
prvfrdeg    : 0     #Feedrate deg/min actual
circum      : 0     #Circumference
ldelta      : 0     #Linear distance for deg/min, linear
cdelta      : 0     #Total linear and angular motion for deg/min
cdelta_calc : 0     #0091 Rotation calculation
cldelta     : 0     #Calculation for deg/min, linear and rotary
sav_rev     : 0     #Saved revolution counter
indx_out    : c9k   #Rotation direction calculation
sav_cabs     : 0     #Save current Cabs
fmt     17  frdeg   #Feedrate deg/min actual
fmt     20  indx_mc #Rotation direction calculation

#0045 Coolant variables for X style coolant
cant_pos     : 0    #Read from current canned text (cant_pos1 - cant_pos20)
coolant_bin  : 0    #Binary value for current coolant command
coolant_on   : 0    #Binary value holding the sum of all coolants currently on
coolantx     : 0    #Selector variable for coolant string selector
local_int    : 0    #Local variable for output of coolant off commands
result2      : 0    #Return value for functions
suppress     : 0    #Flag used to suppress redundant coolant on commands
all_cool_off : 0    #SET_BY_MD - First coolant off command shuts off ALL coolant options
v9_coolant   : 0    #SET_BY_MD - Use V9 coolant options - read from General Machine Parameters

#0045 SET BY MD - Variables to capture parameter values - use to set post switches in pset_mach
rot_axis     : 0     #Axis of rotation - 1=X, 2=Y, 3=Z
rot_type     : 1     #Rotary type - 0=signed continuous, 1=signed absolute, 2=shortest direction
rot_dir      : 0     #Rotary direction - CW is positive, 0 = false, 1 = true
rot_index    : 0     #Index or continuous - 0 = continuous, 1 = index
rot_angle    : 0     #Degrees for each index step with indexing spindle
component_type : 0   #Component type: (See documentation for complete list - )
                       #0 = MACHINE
                       #1 = STOCK_COMPONENT
                       #2 = MISC_COMPONENT
                       #3 = MACHINE_BASE_COMPONENT
                       #4 = LINEAR_AXIS_COMPONENT
                       #5 = ROTARY_AXIS_COMPONENT
                       #6 = RECT_TABLE_COMPONENT
                       #12 = CHUCK_COMPONENT
                       #24 = TOOL_SPINDLE_COMPONENT
                       #23 = ATC_COMPONENT
xpos_dir     : 0    #x Axis direction flag
ypos_dir     : 0    #y Axis direction flag
zpos_dir     : 0    #Z Axis direction flag
axis_label   : 0     #Axis label - 1=X,2=Y,3=Z
write_ops    : 0     #Write NC operation information (True/False)

#Plane/axis sign modifier (always 1 or -1)
pl_ax_m0x   : 1
pl_ax_m0y   : 1
pl_ax_m0z   : 1
pl_ax_m1x   : 1
pl_ax_m1y   : 1
pl_ax_m1z   : 1
pl_ax_m2x   : 1
pl_ax_m2y   : 1
pl_ax_m2z   : 1

# --------------------------------------------------------------------------
# Buffer definitions
# --------------------------------------------------------------------------
#Buffer 1, toolchange information
wc1           : 1       #Initial count for write buffer 1
rc1           : 1       #Initial count for read buffer 1
nc1           : 2       #Initial count for read buffer 1 into next record
size1         : 0       #Buffer 1 size

# Current tool information
c1_gcode      : 0       #Buffer 1
c1_xh         : 0       #Buffer 1
c1_yh         : 0       #Buffer 1
c1_zh         : 0       #Buffer 1
c1_tox        : 0       #Buffer 1
c1_toy        : 0       #Buffer 1
c1_toz        : 0       #Buffer 1
c1_cc_pos     : 0       #Buffer 1
c1_tool       : 0       #Buffer 1
c1_tloffno    : 0       #Buffer 1
c1_maxss      : 0       #Buffer 1
c1_ss         : 0       #Buffer 1
c1_spdir      : 0       #Buffer 1
c1_css_actv   : 0       #Buffer 1
c1_fr_pos     : 0       #Buffer 1
c1_ipr_actv   : 0       #Buffer 1
c1_coolant    : 0       #Buffer 1
c1_nextdc     : 0       #Buffer 1
c1_posttype   : 0       #Buffer 1
c1_cuttype    : 0       #Buffer 1
c1_lathtype   : 0       #Buffer 1
c1_gcodecc    : 0       #Buffer 1
c1_lathecc    : 0       #Buffer 1
c1_millcc     : 0       #Buffer 1
c1_y_axis     : 0       #Buffer 1
c1_x_min      : 0       #Buffer 1
c1_x_max      : 0       #Buffer 1
c1_op_id      : 0       #0091 Buffer 1
c1_tool_op    : 0       #0091 Buffer 1

# Next tool information
n1_gcode      : 0       #Buffer 1
n1_xh         : 0       #Buffer 1
n1_yh         : 0       #Buffer 1
n1_zh         : 0       #Buffer 1
n1_tox        : 0       #Buffer 1
n1_toy        : 0       #Buffer 1
n1_toz        : 0       #Buffer 1
n1_cc_pos     : 0       #Buffer 1
n1_tool       : 0       #Buffer 1
n1_tloffno    : 0       #Buffer 1
n1_maxss      : 0       #Buffer 1
n1_ss         : 0       #Buffer 1
n1_spdir      : 0       #Buffer 1
n1_css_actv   : 0       #Buffer 1
n1_fr_pos     : 0       #Buffer 1
n1_ipr_actv   : 0       #Buffer 1
n1_coolant    : 0       #Buffer 1
n1_nextdc     : 0       #Buffer 1
n1_posttype   : 0       #Buffer 1
n1_cuttype    : 0       #Buffer 1
n1_lathtype   : 0       #Buffer 1
n1_gcodecc    : 0       #Buffer 1
n1_lathecc    : 0       #Buffer 1
n1_millcc     : 0       #Buffer 1
n1_y_axis     : 0       #Buffer 1
n1_x_min      : 0       #Buffer 1
n1_x_max      : 0       #Buffer 1
n1_op_id     : 0        #0091 Buffer 1
n1_tool_op   : 0        #0091 Buffer 1

fbuf 1 0 29 0 0         #0091Buffer 1
# --------------------------------------------------------------------------
#Buffer 2, recall lathe canned turning cycle line numbers
wc2           : 1       #Initial count for write buffer 2
rc2           : 1       #Initial count for read buffer 2
size2         : 0       #Buffer 2 size

fcc_subid     : 0       #Buffer 2
fcc_ng70s     : 0       #Buffer 2
fcc_ng70e     : 0       #Buffer 2

fbuf 2 0 3 0 0          #Buffer 3
# --------------------------------------------------------------------------
#Buffer 3, output strings for lathe canned turning cycles
wc3           : 1       #Initial count for write buffer 3
rc3           : 1       #Initial count for read buffer 3
size3         : 0       #Buffer 3 size

string3 : ""                 #Buffer 3

fbuf 3 0 80 1 1         #Buffer 3
# --------------------------------------------------------------------------
#0080 Buffer 4, used to sav X and Z initial values for lathe canned rough and finish #CRF
wc4           : 1       #Initial count for write buffer 3
rc4           : 1       #Initial count for read buffer 3
size4         : 0       #Buffer 3 size

crf_line      : 0     #Canned cycle line number
crf_xsav1     : 0     #Saved X value before lathe canned rough for use with lathe canned finish
crf_zsav1     : 0     #Saved Z value before lathe canned rough for use with lathe canned finish
crf_xsav2     : 0     #Saved X value before lathe canned rough for use with lathe canned finish
crf_zsav2     : 0     #Saved Z value before lathe canned rough for use with lathe canned finish

fbuf 4 0 2 0 0         #Buffer 4
# --------------------------------------------------------------------------
# Format statements - n=nonmodal, l=leading, t=trailing, i=inc, d=delta
# --------------------------------------------------------------------------
#Default english/metric position format statements
fs2 1   0.7 0.6     #Decimal, absolute, 7 place, default for initialize (:)
fs2 2   0.4 0.3     #Decimal, absolute, 4/3 place
fs2 3   0.4 0.3d    #Decimal, delta, 4/3 place
#Common format statements
fs2 4   1 0 1 0     #Integer, not leading
fs2 5   2 0 2 0l    #Integer, force two leading
fs2 6   3 0 3 0l    #Integer, force three leading
fs2 7   4 0 4 0l    #Integer, force four leading
fs2 9   0.1 0.1     #Decimal, absolute, 1 place
fs2 10  0.2 0.2     #Decimal, absolute, 2 place
fs2 11  0.3 0.3     #Decimal, absolute, 3 place
fs2 12  0.4 0.4     #Decimal, absolute, 4 place
fs2 13  0.5 0.5     #Decimal, absolute, 5 place
fs2 14  0.3 0.3d    #Decimal, delta, 3 place
fs2 15  0.2 0.1     #Decimal, absolute, 2/1 place
fs2 16  0 4 0 4t    #No decimal, absolute, 4 trailing
#Default english/metric feed format statements
fs2 17  0.2 0.1     #Decimal, absolute, 2/1 place
fs2 18  0.4 0.3     #Decimal, absolute, 4/3 place
fs2 19  0.5 0.4     #Decimal, absolute, 5/4 place
fs2 20  1 0 1 0n    #Integer, forced output
fs2 21  1 0 0 2l    #0052 Integer, forced output
fs2 22  0 3 0 3t    #0065 Integer, force 3 trailing = 3 avant la virgule     0.5 = 500
fs2 23  0 4 0 4tn    #No decimal, absolute, 4 trailing

# --------------------------------------------------------------------------
#String and string selector definitions for NC output
# --------------------------------------------------------------------------
#Address string definitions
stra        : "A"     #String for address A
strC        : "C"     #String for address C   "pas" du filetage
strd        : "D"     #String for address D
stre        : "C"     #String for address F   "pas" du filetage
strf        : "F"     #String for address F
stri        : "I"     #String for address I
strk        : "K"     #String for address K
strm        : "M"     #String for address M
stro        : "O"     #String for address O
strp        : "P"     #String for address P
strq        : "Q"     #String for address Q
stru        : "U"     #String for address U
strw        : "W"     #String for address W
srad        : "R"     #String for address R (radius)
srminus     : "R-"    #String for address R- (minus radius)
sc_minus    : "-"     #Manipulated string for signed rotary minus

#Tool note
stoper : ""                      #String for tool notes
stinsert    : ""       #String for tool notes
stinsert2 : ""                   #String for tool notes

#String definitions
sg50        : "G192"   #String for spindle clamp and work coordinate

#Cantext string definitions (spaces must be padded here)
sm00        : "M00"   #String for stop
sm01        : "M01"   #String for optional stop
strtextno   : ""           #String for cantext
strcantext  : ""          #String for cantext

sblank      : ""              #Empty string
sw_string   : ""           #String for lathe turret type settings

#ajouts pour la pointe/butée
fmt 4 m99_pointe
m99_pointe : 0
fmt 4 pointe
pointe  : 0
fmt 4 ret_pointe
ret_pointe : 0
fmt 4 fin
fin : 0
fmt 2 z_avant

fmt 2 a_

fmt   20 butee
butee : 0

fmt    4     M_zero1_apres_butee
fmt    4    M_Zero5_ptlchg

tool_op$ : 1 # Gcode 1016 pour OP de tronçonnage tool_op 67
m73     : 0 # pour ramasse pièce

fmt  "C" 11 old_cabs        #0056 C axis position
fmt  "H" 14 old_cinc        #0056 C axis position
old_cinc : 0                #0056
old_cabs : 0                #0056
fmt 4 old_cc_pos    #0050   Ajout
old_cc_pos :-1
fmt 2   old_c   #0090
old_c : -99999

# Fraisage/tournage
fmt 4  usinage
fmt 4  old_usinage
usinage : 0 # 0 départ ensuite 1=tour 2=fraisage

# -------- pour le transfer
fmt     2  z_serrage
fmt     2  x_serrage
fmt     4  transfert
transfert  : 0
fmt     2 debut_broche
debut_broche : 1
# -----------

#posttype : 0
fmt 4 nbr_cycles    #0006
nbr_cycles : 0

#0012 pour modif entete
fmt 3   entete_     #0012
fmt 3   entetequestion
longTexte :0        #0013

fmt 2 change_nom    #0030

sguillemet : ""  #0040

fmt 2 fin_cycle #0033
fin_cycle : 0

fmt     2   stck_wdth$  #0068 Maximum Stock Diameter

#fmt "M" 2 _spindle_2
fmt  "M" 4 _spindle_2
_spindle_2  : 0

#0122 --------------------
fmt    4 blocage_broche1
fmt    4 blocage_broche2
blocage_broche1 : 1        #69     #0056
blocage_broche2 : 0         #269    #0056

#0066 Taraudage rigide sur la face avant "G384 ...T"
#******Mori Série SL-S********
sens_taraud : ""
staraud_D_cote : "T1"     #A droite BrocheS
staraud_D_face_B1 : "T2"  #A droite Broche 1
staraud_G_face_B2 : "T2"  #A gauche Broche 2
staraud_G_face_B1 : "T3"  #A gauche Broche 1
staraud_D_face_B2 : "T3"  #A droite Broche 2
staraud_G_cote : "T4"     #A gauche BrocheS

fmt  2  old_Z   #0073

#0081
fmt "SUREP. X= " 11 xstck_
fmt "Z= " 11 zstck_
fmt "F" 2 n_tap_thds$

#0084 pour erreur fin de cycle d'ébauche avec interpolation
sposi_G2 : "G2"
sposi_G3 : "G3"
fmt 7 posi_INTERPO_G2
fmt 7 posi_INTERPO_G3

fmt 7 g112  #0121

fmt 4    macro_perc_profond
fmt 4     reglage_pp

#0123 --------------------- DONNEES OUTILS ------------------------
#gcode 20007 autres donnees outils *fraisage*
fmt    5 pilot_dia
fmt   5 flute_len
fmt   5 oa_len
fmt    5 shldr_len
fmt    5 arbor_dia
fmt    5 hldr_dia
fmt    5 hldr_len
fmt    5 spindle_ccw
fmt    5 sfm
fmt    5 fpt
fmt    5 metric

#gcode 20102 donnees outil *tournage*
fmt    5  orient_tool
fmt    5  angle_clearance_tool
fmt    5  angle_rake_tool
fmt    5  width_tool
fmt    5  height_tool
fmt    5  centre1_r_tool
fmt    5  centre2_r_tool
fmt    5  comp_to_centre_rayon_tool

#gcode 20104 données plaquette "générale" *tournage*
fmt    5  asci
fmt    5  ic_diam
fmt    5  length
fmt    5  corner_rad
fmt    5  thickness
fmt    3  mat_insert
fmt    5  insert_typ
fmt    5  mm_inch

#gcode 20108 données outils de perçage "générale" *tournage*
fmt    5  type_percage
fmt    5  diam_foret_tour
fmt    5  shank_diam
fmt    5  tip_included_angle
fmt    5  flute_length
fmt    5  length_cutting_diam
fmt    5  flute_helix_angle
fmt    5  number_flutes
fmt    5  chanf_ales_taraud
fmt    5  tip_diam_f_a_c
fmt    5  shoulder_angle_f_a_c
fmt    5  pas_taraud
fmt    5  type_taraud

#gcode 20104 donnees plaquette *tournage*
asci        : 0
ic_diam     : 0     #INCERT (PLAQUETTE) DIAMETRE/LARGEUR
length      : 0     #HAUTEUR DE LA PLAQUETTE DANS LE SENS DES X OU LONGUEUR DE FORET
corner_rad  : 0     #RAYON EN BOUT DE PLAQUETTE
thickness   : 0     #?
mat_insert  : 0     #MATIERE DE L OUTIL
insert_typ  : 0     #IDEM à tool_typ$  1= Outil à fileter, 2= Outil à gorge...
mm_inch     : 0
s_insert_Tour : ""

fmt    5 long_stinsert2
# --------------------------------------------------------------------------
# Error message strings
# --------------------------------------------------------------------------
saxiserror  : "ERROR-WRONG AXIS OF ROTATION, ROTATE ON X AXIS OF WCS"
sindxerror  : "WARNING-INDEX ANGLE DOES NOT MATCH POST SETTING ('ctable')"
ssignerror  : "WARNING-SIGNED AXIS POSITIONING MOVE OVER 360 DEGREES"
swrkserror  : "WARNING-WORK OFFSET IS CHANGED IN A SUBPROGRAM"
stoperror   : "ERROR-AXIS SUBSTITUTION MUST USE THE TOP TOOLPLANE"
scutterror  : "ERROR-A VALID CUT TYPE WAS NOT FOUND, CHECK ROTARY SETTINGS"
sfccerror   : "ERROR-MATCHING G70 FINISH PROFILE WAS NOT FOUND"
s5drlerror  : "ERROR-5 AXIS DRILLING REQUIRES LONG CYCLE ('usecan..')"
slthrmerror : "ERROR-ROTATE/MIRROR SUBPROGRAM NOT ALLOWED WITH LATHE PATH"
smilrmerror : "ERROR-ROTATE/MIRROR PROGRAM ROUTINE NOT ALLOWED"
smny50error : "ERROR-G50 AND HOME ('mi1') DOES NOT SUPPORT MULTIPLE TOOL SUBPROGRAM"
shomeserror : "ERROR-HOME ('mi1') DOES NOT SUPPORT TRANSFORM SUBPROGRAM"
symoterror  : "WARNING-Y AXIS MOTION AND ('y_axis_mch') NOT SET"

# --------------------------------------------------------------------------
# General G and M Code String select tables
# --------------------------------------------------------------------------
# Strings for switch based on planes, see psw_str_mult
sxg02   : "G2"       #Circular interpolation CW
sxg03   : "G3"       #Circular interpolation CCW
# --------------------------------------------------------------------------
# Motion G code selection
sg00    : "G0"       #Rapid
sg01    : "G1"       #Linear feed
sg02    : "G2"       #Circular interpolation CW
sg03    : "G3"       #Circular interpolation CCW
sg04    : "G4"       #Dwell
sgcode : ""          #Target for string

fstrsel sg00 gcode$ sgcode 5 -1
# --------------------------------------------------------------------------
# Motion G code selection, plane 1
sg00_1  : "G0"       #Rapid
sg01_1  : "G1"       #Linear feed
sg02_1  : "G2"       #Circular interpolation CW
sg03_1  : "G3"       #Circular interpolation CCW
sg04_1  : "G4"       #Dwell
sgcode1 : ""         #Target for string

fstrsel sg00_1 gcode$ sgcode1 5 -1
# --------------------------------------------------------------------------
# Motion G code selection, plane 2
sg00_2  : "G0"       #Rapid
sg01_2  : "G1"       #Linear feed
sg02_2  : "G2"       #Circular interpolation CW
sg03_2  : "G3"       #Circular interpolation CCW
sg04_2  : "G4"       #Dwell
sgcode2 : ""         #Target for string

fstrsel sg00_2 gcode$ sgcode2 5 -1
# --------------------------------------------------------------------------
# Strings for switch based on planes, see psw_str_mult
sxg17   : "G17"      #XY plane code  (AXIAL)
sxg19   : "G19"      #YZ plane code  (RADIAL)
sxg18   : "G18"      #XZ plane code  (TOURN.)
swstr : ""              #Target for string

fstrsel sxg17 rslt_plc swstr 3 -1
# --------------------------------------------------------------------------
# Select work plane G code
sg17    : "G17"      #XY plane code (AXIAL)
sg19    : "G19"      #YZ plane code  (RADIAL)
sg18    : "G18"      #XZ plane code  (TOURN.)
sgplane : ""            #Target string

fstrsel sg17 plane$ sgplane 3 -1
# --------------------------------------------------------------------------
#Select english/metric code
sg20    : "G20"      #Inch code
sg21    : "G21"      #Metric code
smetric : ""         #Target string

fstrsel sg20 met_tool$ smetric 2 -1
# --------------------------------------------------------------------------
#Select reference return code
sg28    : "G28"      #First reference point return
sg30    : "G30"      #Second reference point return
sg28ref : ""         #Target string

fstrsel sg28 ref_ret sg28ref 2 -1
# --------------------------------------------------------------------------
#0031 Strings for switch based on planes, see psw_str_mult
sxg41   : "G41"     #0050 Cutter compensation left  G41
sxg42   : "G42"     #0050 Cutter compensation right G42
# --------------------------------------------------------------------------
# Cutter compensation G code selection, plane 0
sg40    : "G40"      #Cancel cutter compensation
sg41    : "G41"      #Cutter compensation left
sg42    : "G42"      #Cutter compensation right
sccomp : ""          #Target for string

fstrsel sg40 cc_pos$ sccomp 3 -1
# --------------------------------------------------------------------------
# Cutter compensation G code selection, plane 1
sg40_1  : "G40"      #Cancel cutter compensation
sg41_1  : "G41"      #Cutter compensation left
sg42_1  : "G42"      #Cutter compensation right
sccomp1 : ""         #Target for string

fstrsel sg40_1 cc_pos$ sccomp1 3 -1
# --------------------------------------------------------------------------
# Cutter compensation G code selection, plane 2
sg40_2  : "G40"      #Cancel cutter compensation
sg41_2  : "G41"      #Cutter compensation left
sg42_2  : "G42"      #Cutter compensation right
sccomp2 : ""         #Target for string

fstrsel sg40_2 cc_pos$ sccomp2 3 -1
# --------------------------------------------------------------------------
# Select canned cycle type, profile is direction of finish profile vector
sthdg32 : "G32"      #Cycle type G32
sthdg76 : "G86"      #Cycle type G76
sthdg92 : "G92"      #Cycle type G92
sthdg33 : "G86"      #G33 Cycle type G32 with alternating position
sthdgcode : ""       #Target for string

fstrsel sthdg32 thdtype$ sthdgcode 4 -1
# --------------------------------------------------------------------------
# Select canned cycle type
sg70    : "G70"      #Cycle type G70
sg71    : "G71"      #Cycle type G71
sg72    : "G72"      #Cycle type G72
sg73    : "G73"      #Cycle type G73
sg74    : "G74"      #Cycle type G74
sg75    : "G75"      #Cycle type G75
scclgcode : ""       #Target for string

fstrsel sg70 gcodecc scclgcode 6 1

# PERCAGES DE FRAISAGE SUR LA FACE --------------------------------------------------------------------------
# Canned drill cycle string select
sg80_f  : "G83"      #drill face
sg80_fd : "G83"      #drill face w/dwell
sg81_f  : "G83"      #peck face
sg81_fd : "G83"      #peck face w/dwell
sg82_f  : "G83"      #chpbrk face
sg82_fd : "G83"      #chpbrk face w/dwell
sg83_f  : "G84"     #G84 tap right face
sg83_fd : "G84"     #G84 tap left face
sg84_f  : "G85"      #bore1 face
sg84_fd : "G85"      #bore1 face w/dwell
sg85_f  : "G86"      #bore2 face
sg85_fd : "G88"     #bore2 face w/dwell
sg86_f  : "G87"      #misc1 face
sg86_fd : "G87"      #misc1 face w/dwell
sg87_f  : "G8?"      #misc2 face
sg87_fd : "G8?"      #misc2 face w/dwell
sgdrillf : ""        #Target for string

fstrsel sg80_f drlgsel sgdrillf 16 -1
# PERCAGES DE FRAISAGE AU DIAMETRES --------------------------------------------------------------------------
sg80_c  : "G87"      #drill cross
sg80_cd : "G87"      #drill cross w/dwell
sg81_c  : "G87"      #peck cross
sg81_cd : "G87"      #peck cross w/dwell
sg82_c  : "G87"      #chpbrk cross
sg82_cd : "G87"      #chpbrk cross w/dwell
sg83_c  : "G88"      #88tap right cross
sg83_cd : "G88"      #88tap left cross
sg84_c  : "G89"      #bore1 cross
sg84_cd : "G89"      #bore1 cross w/dwell
sg85_c  : "G86"      #bore2 cross
sg85_cd : "G88"      #bore2 cross w/dwell
sg86_c  : "G87"      #misc1 cross
sg86_cd : "G87"      #misc1 cross w/dwell
sg87_c  : "G8?"      #misc2 cross
sg87_cd : "G8?"      #misc2 cross w/dwell
sgdrillc : ""        #Target for string

fstrsel sg80_c drlgsel sgdrillc 16 -1
# --------------------------------------------------------------------------
# Select incremental or absolute G code
sg90    : "G90"      #Absolute code
sg91    : "G91"      #Incremental code
sgabsinc : ""        #Target string

fstrsel sg90 absinc$ sgabsinc 2 -1
# --------------------------------------------------------------------------
# RPM/CSS code selection
sg97    : "G97"      #RPM
sg96    : "G96"      #CSS
sg9697 : ""          #Target for string

fstrsel sg97 css_actv$ sg9697 2 -1
# --------------------------------------------------------------------------
# Feed mode G code selection
sg98    : "G98"      #=0 UPM MM/MN
sg99    : "G99"      #=1 UPR MM/TOUR
sgfeed : ""          #Target for string

fstrsel sg98 ipr_actv$ sgfeed 2 -1
# --------------------------------------------------------------------------
# C axis cycles
sg107   : "CYL"     	#G107 	C axis cylindrical interpolation enable
sg108   : "CYL OFF"     #C axis cylindrical interpolation disable
sg112   : "FACE"     	# C axis face polar interpolation enable
sg113   : "FACE OFF"    # C axis face polar interpolation disable
# --------------------------------------------------------------------------
#Canned drill cycle reference height
sg198   : "G98"    #Reference at initht
sg199   : "G99"    #Reference at refht
sgdrlref : ""        #Target for string

fstrsel sg198 drillref sgdrlref 2 -1
# --------------------------------------------------------------------------
# Generate string for spindle, lathe
sm04    : "M4"      # M04 Spindle reverse - no coolant
sm05    : "M5"      # Spindle off     - no coolant
sm03    : "M3"      # M03 Spindle forward - no coolant
sm14    : "M4"      # M4 Spindle reverse - coolant
sm05c   : "M5"      # Spindle off     - coolant
sm13    : "M3"      # M13 Spindle forward - coolant
spindle_l : ""       #Target for string

fstrsel sm04 g_spdir spindle_l 6 -1
# --------------------------------------------------------------------------
#0042 Coolant M code selection for V9 style coolant
# Note: To enable V9 style coolant, click on the General Machine Parameters icon
#   in the Machine Definition Manager, Coolant tab, enable first check box
#   Output of V9 style coolant commands in this post is controlled by scoolant
sm09    : "M9"       #Coolant Off
sm08    : "M8"           #Coolant Flood
sm08_1  : "M54"       #Coolant Mist
sm08_2  : "M55"       #Coolant Tool
scoolant : ""        #Target for string

fstrsel sm09 coolant$ scoolant 4 -1
# --------------------------------------------------------------------------
#0042 Coolant output code selection for X style coolant
# Note: To enable X style coolant, click on the General Machine Parameters icon
#   in the Machine Definition Manager, Coolant tab, disable first check box
#   Output of X style coolant commands in this post is controlled by pcan, pcan1, & pcan2
scool50    : "M8 (ARROSAGE PRINCIPAL ON)"                 #Coolant 1 on value
scool51    : "M9 (ARROSAGE PRINCIPAL OFF)"                 #Coolant 1 off value
scool52    : "M54 (ARROSAGE TOURELLE ON)"                 #Coolant 2 on value
scool53    : "M55 (ARROSAGE TOURELLE OFF)"                 #Coolant 2 off value
scool54    : "M80 (SOUFFLAGE TOURELLE ON)"                #Coolant 3 on value
scool55    : "M81 (SOUFFLAGE TOURELLE OFF)"                #Coolant 3 off value
scool56    : "M50 (ARROSAGE CONTRE BROCHE ON)"    #Coolant 4 on value
scool57    : "M51 (ARROSAGE CONTRE BROCHE OFF)"   #Coolant 4 off value
scool58    : "M8(Coolant5=ON)"    #Coolant 5 on value
scool59    : "M9(Coolant5=OFF)"   #Coolant 5 off value
scool60    : "M8(Coolant6=ON)"    #Coolant 6 on value
scool61    : "M9(Coolant6=OFF)"   #Coolant 6 off value
scool62    : "M8(Coolant7=ON)"    #Coolant 7 on value
scool63    : "M9(Coolant7=OFF)"   #Coolant 7 off value
scool64    : "M8(Coolant8=ON)"    #Coolant 8 on value
scool65    : "M9(Coolant8=OFF)"   #Coolant 8 off value
scool66    : "M8(Coolant9=ON)"    #Coolant 9 on value
scool67    : "M9(Coolant9=OFF)"   #Coolant 9 off value
scool68    : "M8(Coolant10=ON)"   #Coolant 10 on value
scool69    : "M9(Coolant10=OFF)"  #Coolant 10 off value
scoolantx : ""                    #Target for string

fstrsel scool50 coolantx scoolantx 20 -1

# suivant la configuration "arrosage" dans la def CN: couper ou pas TOUS les arrosages !
#X coolant has the option - First coolant off command shuts off ALL coolant options
sall_cool_off  : "M09" #Coolant off command output with all_cool_off

#-----------------------------------------------------------------------
# Table rotation direction, index
sindx_cw   : "M22"    #Rotate CW code
sindx_ccw  : "M21"    #Rotate CCW code
sindx_mc : ""        #Target for string

fstrsel sindx_cw indx_mc sindx_mc 2 -1
# --------------------------------------------------------------------------
# C axis mode
sm45    : "CAX ;C ON BG"      #M23 C axis enable
sm46    : "CAX OFF ;C OFF BG"      #M24 C axis disable
sm245   : "M125 (C ON BD)"      #broche 2 M23 C axis enable
sm246   : "M126 (C OFF BD)"      #broche2 M24 C axis disable

# --------------------------------------------------------------------------
# Tailstock M code selection
sm26    : "M118"      #Tailstock retracted
sm25    : "M117"      #Tailstock engaged
stlstk : ""          #Target for string

fstrsel sm26 tlstk stlstk 2 -1
# --------------------------------------------------------------------------
# Generate string for spindle, mill         #M13/M14 uniquement outils tournants de fraisage
sm52    : "M3.S2"      #14 Spindle reverse - no coolant
sm55    : "M5.S2"      # Spindle off     - no coolant
sm51    : "M4.S2"      # Spindle forward - no coolant
sm54    : "M2044"      # FR Spindle reverse - coolant
sm55c   : "M2055"      # FR Spindle off     - coolant
sm53    : "M2033"      # FR Spindle forward - coolant
spindle_m : ""       #Target for string

fstrsel sm52 g_spdir spindle_m 6 -1
# --------------------------------------------------------------------------
# Chute M code selection
sm73    : "M73"      #Chute retracted
sm74    : "M74"      #Chute engaged
schute : ""          #Target for string

fstrsel sm73 chute schute 2 -1

# --------------------------------------------------------------------------
#0122 Blocages et déblocages des broches
s_bloc_B_G        : "M105 ;BLOCAGE BROCHE DE GAUCHE"
s_bloc_B_D        : "M10Y ;BLOCAGE BROCHE DE DROITE"
s_debloc_B_G    : "M106 ;DEBLOCAGE BROCHE DE GAUCHE"
s_debloc_B_D    : "M10Z (DEBLOCAGE BROCHE DE DROITE)"

# --------------------------------------------------------------------------
# Define the gear selection code
flktbl  1       3       #Lookup table definition - table no. - no. entries
        40      0       #Low gear range
        41      400     #Med gear range
        42      2250    #Hi gear range

# --------------------------------------------------------------------------
#0042 Define coolant binary value for X style coolant
flktbl  2       20      #Lookup table definition - table no. - no. entries
        1       50      #Coolant 1 on value
        2       51      #Coolant 1 off value
        4       52      #Coolant 2 on value
        8       53      #Coolant 2 off value
        16      54      #Coolant 3 on value
        32      55      #Coolant 3 off value
        64      56      #Coolant 4 on value
        128     57      #Coolant 4 off value
        256     58      #Coolant 5 on value
        512     59      #Coolant 5 off value
        1024    60      #Coolant 6 on value
        2048    61      #Coolant 6 off value
        4096    62      #Coolant 7 on value
        8192    63      #Coolant 7 off value
        16384   64      #Coolant 8 on value
        32768   65      #Coolant 8 off value
        65536   66      #Coolant 9 on value
        131072  67      #Coolant 9 off value
        262144  68      #Coolant 10 on value
        524288  69      #Coolant 10 off value

# --------------------------------------------------------------------------
# Toolchange / NC output Variable Formats
# --------------------------------------------------------------------------
fmt  "T" 4  toolno      #Tool number
fmt  "G" 4  g_wcs       #WCS G address
fmt  "P" 4  p_wcs       #WCS P address
fmt  "S" 4  speed       #Spindle Speed
fmt  "S2=" 4  speed_fr
fmt  "M" 4  gear        #Gear range
fmt  "S" 4  maxss$       #RPM spindle speed
# --------------------------------------------------------------------------
fmt  "N" 4  n$           #Sequence number
fmt  "X" 2  xabs        #X position output
fmt  "Y" 2  yabs        #Y position output
fmt  "Z" 2  zabs        #Z position output
fmt  "R" 2  zzabs       #Z position pour le filetage Z fin -0.2
fmt  "U" 3  xinc        #X position output
fmt  "V" 3  yinc        #Y position output
fmt  "W" 3  zinc        #Z position output
fmt  "C" 11 cabs        #C axis position
fmt  "H" 14 cinc        #C axis position
fmt  "B" 4  indx_out    #Index position
fmt  "I" 3  iout        #Arc center description in X
fmt  "J" 3  jout        #Arc center description in Y
fmt  "K" 3  kout        #Arc center description in Z
fmt  "R" 2  arcrad$      #Arc Radius
fmt  "F" 18 feed        #Feedrate
fmt  "P" 11 dwell$       #Dwell en usinage en secondes
fmt  "P" 22 dwell_2      #22 Dwell en cycle de perçages ... en milième de secondes
fmt  "M" 5  cantext$     #Default cantext
fmt  "Z" 2  crad         #C axis start radius, G107
fmt  "H" 2  tlrad$       #C axis cancel, G112, currently using C position
# --------------------------------------------------------------------------
#Move comment (pound) to output colon with program numbers
fmt  "O" 7  progno$      #Program number
#fmt ":" 7   progno      #Program number
fmt  "O" 7  main_prg_no$ #Program number
#fmt ":" 7   main_prg_no #Program number
fmt  "O" 7  sub_prg_no$  #Program number
#fmt ":" 7   sub_prg_no  #Program number
fmt  "U" 2  sub_trnsx$   #Rotation point
fmt  "V" 2  sub_trnsy$   #Rotation point
fmt  "W" 2  sub_trnsz$   #Rotation point

#0074
fmt  "U" 2  sub_trnsx_   #Translation point
fmt  "U" 2  old_sub_trnsx_
#fmt  V  2   sub_trnsy$   #Translation point
fmt  "W" 2  sub_trnsz_   #Translation point
fmt  "W" 2  old_sub_trnsz_
# --------------------------------------------------------------------------
# Drill output
# --------------------------------------------------------------------------
fmt  "R" 2  refht_a     #Reference height
fmt  "R" 2  refht_i     #Reference height
fmt  "X" 2  initht_x    #Initial height, mapped X
fmt      2   initht_y    #Initial height, mapped Y
fmt  "Z" 2  initht_z    #Initial height, mapped Z
fmt  "X" 2  refht_x     #Reference height, mapped X
fmt      2   refht_y     #Reference height, mapped Y
fmt  "Z" 2  refht_z     #Reference height, mapped Z
fmt  "X" 2  depth_x     #Depth, mapped X
fmt      2   depth_y     #Depth, mapped Y
fmt  "K" 2  depth_z     #Depth, mapped Z
fmt  "Z" 2  depth$      #0052 fin Z G81...
fmt  "R" 2  refht$       #0052 Garde pour percage
fmt  "Q" 22  peck1$     #11 0065 First peck increment (positive)
fmt  "K" 2  peck2$       #Second or last peck (positive)
fmt  "P" 21  peckclr$     #0052 Safety distance
fmt  "R" 2  retr$        #Retract height
fmt  "Q" 2  shftdrl$     #Fine bore tool shift
fmt  "F" 2  shftdrl_     #0064 Valeur de l'avance retour en alésage alésoire
#0054 cycle perçage en macro
fmt  "W" 2  peck1_      # 1ère plongée
fmt  "C" 2  peck2_      # plongées mini
fmt  "B" 2  peckclr_    # Tolerance de retour
fmt  "D" 11 dwell_      # Tempo au fond
#
fmt  "Z" 2  depth_      #Z intermediaire G83...
# --------------------------------------------------------------------------
# Thread output
# --------------------------------------------------------------------------
fmt  "I" 11  thddepth$    #2 Thread height absolute
fmt  "B" 11  thdfirst$    #2 First depth cut in thread
fmt  "I" 11  thddepth_    #2 Thread height absolute
fmt  "B" 11  thdfirst_    #2 First depth cut in thread
fmt  "L" 2  thdlast$     #2 Last depth cut in thread
fmt  "" 22 thdfinish$   #2 G76 thread finish allowance
fmt  "Q" 3  thdrdlt     #Thread R delta G92 and G76
fmt  "44U" 3  thd_dirx    #Incremental X move for G76 mult starts
fmt  "55W" 3  thd_dirz    #Incremental Z move for G76 mult starts
fmt  "V" 5  nspring$     #Number of spring cuts
fmt  "L" 5   thdpull     #G76 thread pull off
fmt  "A" 5   thdang      #G76 threading angle
fmt  "Q" 2  x_finInc
fmt  "Q" 2  x_finAbs
fmt  "X" 2  x_debut_fil
fmt  "Z" 2  z_debut_fil
fmt  "X" 2  old_X
# --------------------------------------------------------------------------
# Canned cycle output format (do not change order, used by buffer 2)
# --------------------------------------------------------------------------
fmt  "U" 2  depthcc
fmt  "R" 2  clearcc
fmt  "U" 2  xstckcc
fmt  "W" 2  zstckcc
fmt  "R" 4  ncutscc
fmt     2   stepcc
fmt  "P" 4  ng70s       #P line number in canned cycle
fmt  "Q" 4  ng70e       #Q line number in canned cycle
fmt  "N" 4  n70s        #0006 N debut cycle
fmt  "N" 4  n70e        #0006 N fin cycle
fmt  "U" 2  g73x        #Stored offset of canned cycle rough cut G73
fmt  "V" 2  g73y        #Stored offset of canned cycle rough cut G73
fmt  "W" 2  g73z        #Stored offset of canned cycle rough cut G73
fmt  "P" 2  grvspcc
fmt  "Q" 2  grvdpcc
# --------------------------------------------------------------------------
# +
fmt  "T" 4 t$
#fmt     9 tloffno
fmt  " R" 12 tcr$

fmt "DIAM " 2 tldia$
fmt "OUTIL- "       4   tnote       # Note format
fmt " CORRECT- "    4   toffnote    # Note format
fmt 4 hold_t
hold_t  : 0
fmt 4 num
num     : 0
fmt 4 hold_num
hold_num : 0
fmt   9  old_tloffno
fmt   9  old_tlngno
fmt  "D" 4  speed_ret       #Spindle Speed return
fmt "F" 9 pas
fmt     2 Y_maxi        #0087
# --------------------------------------------------------------------------
# Parameter information lookup tables, see pparameter
#
# POUR GERER CES PARAMETRES EN VX IL FAUT VALIDER L ECRITURE DANS LA DEF ARMOIRE
# DANS FICHIERS - ECRITURE DE L'INFO CN D'OPERATION
#
# --------------------------------------------------------------------------
fprmtbl 1 5 #Rough cut parameters
        13343 depthcc       #V9 10200 depthcc
        10407 clearcc       #V9 10201 clearcc
        10202 xstckcc
        10203 zstckcc
        10214 directcc

fprmtbl 2 4 #Finish cut parameters
        13341 ncutscc       #V9 10100 ncutscc
        10101 depthcc
        10102 xstckcc
        10103 zstckcc

fprmtbl 3 7 #Groove cut parameters
        13358 stepcc
        13359 xstck_    #0081
        13360 zstck_    #0081
        13138 directcc
        13352 dopeckcc
        10316 depthcc
        13364 clearcc

fprmtbl 104 4 #Thread cut parameters
        10811 xmaj_thd
        10813 zstrt_thd
        10814 zend_thd
        10819 face_thd

fprmtbl 17000   7   #0045 Table Number, Size - Machine Definition parameter table
        17391   axis_label   #Axis label - 1=X,2=Y,3=Z
        17402   rot_dir      #Rotary direction
        17408   rot_index    #Index or continuous
        17409   rot_angle    #Index step
        17410   rot_type     #Rotary type
        17101   all_cool_off #First coolant off command shuts off ALL coolant options
        17102   v9_coolant   #Use V9 coolant option

# Control Definition Parameters
fprmtbl 18000   1    #Table Number, Size
#       Param   Variable to load value into
        18171   write_ops    #Enable write NC operation information

# Toolpath Group Parameters
fprmtbl 19000   0    #Table Number, Size
#       Param   Variable to load value into

#0059 --------------------------------------------------------
fmt "C_ORDI" 2 cc_computer$      # correction ordinateur
fmt          2 old_cc_computer
fmt "C_ARMO" 2 cc_pos$           # correction Armoire
fmt          2 type_comp        # type de correction
fmt          2 info_corr
fmt          4 old_op_id

#fmt            4 _cc       #prmcode$ 15346
                        #0 = ordi
                        #1 = armoire
                        #2 = usure
                        #3 = usure inverse
                        #4 = sans

#fmt            4 _sens_cc  #prmcode$ 15347
                        #0 = gauche
                        #1 = droite

#0071 Ajout en tant que garde fou pour éviter des valeurs différentes d'origines dans une même OP
fmt     2   plan_usi_Z
fmt     2   plan_usi_X
fmt     2   plan_usi_Y
fmt     2   rud_usi_X
fmt     2   rud_usi_Y
fmt     2   rud_usi_Z
fmt     2   old_plan_usi_Z
fmt     2   old_plan_usi_X
fmt     2   old_plan_usi_Y
fmt     2   old_rud_usi_X
fmt     2   old_rud_usi_Y
fmt     2   old_rud_usi_Z


#0059 Table de l'affichage du type de correction
stc0   : "CORREC. AUCUNE"
stc1   : "CORREC. ARMOIRE D."
stc2   : "CORREC. ARMOIRE G."
stc3   : "CORREC. ORDI. D."
stc4   : "CORREC. ORDI. G."
stc5   : "CORREC. USURE + ORDI. D."
stc6   : "CORREC. USURE + ORDI. G."
stc7   : "CORREC. USURE INVERSE D."
stc8   : "CORREC. USURE INVERSE G."
stype_comp : ""

fstrsel  stc0 type_comp stype_comp 9 -1

#--------------------------------------------------------------------------
# Tool Comment / Manual Entry Section
# --------------------------------------------------------------------------
pparameter$      #Information from parameters
      #~prmcode$, "=", sparameter$, e$      #0040 pour afficher tous les parametres
      if prmcode$ = 10000, stoper = sparameter$
      if prmcode$ = 20103, stinsert2 = sparameter$ #nom de la plaquette
      result = fprm (abs(lathecc))
      #if prmcode$ = 15346, _cc = sparameter$       #0059
      #if prmcode$ = 15347, _sens_cc = sparameter$  #0059
      if prmcode$ = 15163, plan_usi_Z = rpar(sparameter$, 1)    #0071   aussi dans nci 1013 place 6
      if prmcode$ = 15164, plan_usi_X = rpar(sparameter$, 1)    #0071   aussi dans nci 1013 place 6
      if prmcode$ = 15165, plan_usi_Y = rpar(sparameter$, 1)    #0071   aussi dans nci 1013 place 6

      if prmcode$ = 15178, rud_usi_X = rpar(sparameter$, 1)     #0071   aussi dans nci 1027 place 10 = X
      if prmcode$ = 15179, rud_usi_Y = rpar(sparameter$, 1)     #0071   aussi dans nci 1027 place 11 = Y
      if prmcode$ = 15180, rud_usi_Z = rpar(sparameter$, 1)     #0071   aussi dans nci 1027 place 12 = Z

      #if prmcode$ = 15366, rud2_usi_X = rpar(sparameter$, 1)   #0071   aussi dans nci 1027 place 10
      #if prmcode$ = 15367, rud2_usi_Y = rpar(sparameter$, 1)   #0071   aussi dans nci 1027 place 10
      #if prmcode$ = 15368, rud2_usi_Z = rpar(sparameter$, 1)   #0071   aussi dans nci 1027 place 10
      if prmcode$ = 10811, x_debut_fil = rpar(sparameter$, 1)     #


#0045 --------------------------------------------------------------------------
pset_mach       #Set post switches by reading machine def parameters
      #Reset variables prior to MD read
      y_axis_mch = no$    #Reset to zero - Set from Axis Combination

      rd_mch_ent_no$ = syncaxis$  #Retrieve machine parameters based on current axis combination - read from .nci G950 line
      rd_md$       #Read machine definition parameters - calls pmachineinfo$

      #We only need these set at toolchange (and start of file).  No need to set them each time a user may call rd_md

# --------------------------------------------------------------------------
# Machine definition and control definition parameter capture:
# --------------------------------------------------------------------------
pmachineinfo$   #Machine information parameters postblock
      #rd_mach is used to call pmachineinfo postblock and read the parameters of the selected axis
      #combination machine entity set in rd_mch_ent_no.
      #rd_cd is used to call pmachineinfo postblock and read the active control definition parameters
      #rd_tlpathgrp is used to call pmachineinfo postblock and read the active toolpath group parameters
      #"-->pmachineinfo", ~prmcode$, "  ", ~sparameter$, e$  #Do not uncomment if being called from pprep$ - see pprep comment

      #Read parameter lookup tables -
      if prmcode$ >= 17000 & prmcode$ < 18000, result = fprm(17000) #Run the parameter table for Machine Definition Parameters
      #Leave lines below commented until you enter values in related lookup tables
      if prmcode$ >= 18000 & prmcode$ < 19000, result = fprm(18000) #Run the parameter table for Control Definition Parameters
      #if prmcode$ >= 19000 & prmcode$ < 19900, result = fprm(19000) #Run the parameter table for Toolpath Group Parameters

      if axis_label = 2, y_axis_mch = yes$    #Y axis in axis combination found

# --------------------------------------------------------------------------
# Tool Comment / Manual Entry Section
# --------------------------------------------------------------------------
ptoolcomment    #Comment for tool
      tnote = abs(t$)
      toffnote = tloffno$
      strtool$ = ucase(strtool$)
      stoper = ucase(stoper)    #sens de l'outil
      stinsert2 = ucase(stinsert2)
      long_stinsert2 = strlen(stinsert2)
      #"(", *tnote, *toffnote, ")", e$

      "(", *strtool$, p_aff_orient_t_fr, ")", e$    #0073 *stoper,
      spaces$ = 0
      if posttype$ = two & opcode$ <> 109 & opcode$ <> 105 & long_stinsert2 > 6,
        "(", *stinsert, *stinsert2, ")", e$     #*stoper,
      #else,
        #"(", *stoper, " ", *strtool$, ")", e$
      spaces$ = 1

        if opcode$ = 103, pcan1, pbld, n$, "(AU DEPART-CORRECTEURS IDENTIQUES-)", e$
        if opcode$ = 103, pcan1, pbld, n$, "(GEOMETRIE ET USURE)", e$

pcomment$        #Comment from manual entry (must call pcomment2 if booleans)
      pcomment2

pcomment2       #Comment from manual entry
            scomm$ = ucase(scomm$)
        if entete_ =0 ,
            [
            if gcode$ = 1005, pcan1, pbld, n$, "(", scomm$, ")", e$     #FONCTION MACHINE avec numéro de ligne
            if gcode$ = 1006, pcan1, pbld, n$,scomm$, e$                #Usinage commentaire - en code
            if gcode$ = 1007, "(", scomm$, ")",                        #Entree Manuelle - en commentaire avec le mouvement sans e$
            if gcode$ = 1008, pcan1, pbld, n$,"(", scomm$, ")", e$      #Commentaire d'operation
            if gcode$ = 1026, scomm$                                    #Entree Manuelle - en code avec le mouvement sans e$
            ]
        if entete_ = 1 & gcode$ = 1006 & scomm$ <> svide, ptextentete      #0012 pour informer l'entete prog.
        #if entete_ = 1 & gcode = 1008 & scomm, "(", 34, scomm, 34, ")"  #0012 sur la ligne "TEXTE DU RUD"


# AJOUT POUR QUESTIONS ENTETE --------------------------------------
fmt 4 gamme

#sclient : ""
#fq 1 sclient "Client :"
#spiece : ""
#fq 2 spiece "Désignation piece :"
sclient : ""
fq 2 sclient "CLIENT"
snumplan : ""
fq 3 snumplan "Numéro de plan :"
sindiceplan : ""
fq 4 sindiceplan "Indice plan :"
sindiceprog : ""
fq 5 sindiceprog "INDICE DU PROGRAMME"
sorigine : ""
fq 6 sorigine "ORIGINE PIECE"
s_phase : ""
fq 7 s_phase "PHASE"
s_commentaire : ""
fq 8 s_commentaire "COMMENTAIRE"
# --------------------------------

fq 10 schange_nom_fichier "Numéro de programme //snouv_nom// existant, ENTREZ UN NOUVEAU NUMERO"#0030 progno
fmt 2 remplace
remplace : 1
fq 11 remplace "Numéro de programme //snouv_nom// existant, LE REMPLACER ?      0 pour NON - 1 pour OUI"#0030

#----------------------
fmt 2    brut_Z_mini
fmt 2    brut_Z_en_plus_devant
fmt    2    brut_DIAM
fmt    2    brut_DIAM_inter
brut_Z_mini : 0
brut_Z_en_plus_devant : 0
brut_DIAM : 0
brut_DIAM_inter : 0

fq 15 brut_Z_mini                 "position de la face arrière du brut en - (moins) :"
fq 16 brut_Z_en_plus_devant      "Valeur en + sur la face avant :"
fq 17 brut_DIAM                 "Diamètre EXTER du brut :"
fq 18 brut_DIAM_inter             "Diamètre INTER du brut :"

# --------------------------------------------------------------------------
# Start of File and Toolchange Setup
# --------------------------------------------------------------------------
pheader$         #Start of file

            sclient = ucase (sclient)
            snumplan = ucase (snumplan)
            smcname$ = ucase (smcname$)
            sindiceplan = ucase (sindiceplan)
            sindiceprog = ucase (sindiceprog)
            s_phase= ucase (s_phase)
            s_commentaire = ucase (s_commentaire)
            sorigine = ucase (sorigine)


        sguillemet = no2asc(34) #0040
        hold_t = 0

        #"%", e$
        if change_nom = 1,
            [
            pnom_nc
            ptest_nom
            spaces$ = 0  #0030
            snomprogentete = ucase(snomprogentete)
            #*progno$, e$ #0030
            #*progno$, "(", snomprogentete, ")", e$ #0030
            "(", *snom_entete,  ")", e$  #0300  snom_entete,
            spaces$ = 1  #0030
            ]
        else, spaces$ = 0, "(", smcname$, ")", e$  #"(", sprogname$,")",    *progno$,
        spaces$ = 1

        #pbld, n$, *smetric, e$
        entete_ = 1 #0012
        " ",e$
        #"(CONTROLE 1ER ARTICLE D APRES )", e$
        #"(PLAN DE FINITION CLIENT)",e$
        #"(ET GAMME D USINAGE)",e$
        #" ",e$
        #"(LE .", date$, " A ", time$, ")", e$

        if entetequestion = 1,  #0012
            [
             q2, q3, q4, q5, q7, q8, q6,
           "(DATE PHC LE ", date$," A ", time$, ")", e$
           "(NON TESTE)", e$
           "(CLIENT ", sclient, ")", e$
           "(NUM PLAN ", snumplan, ")", e$
           "(DESSIN MASTERCAM - ", smcname$, ")", e$
           "(INDICE PLAN ", sindiceplan, ")", e$
           "(INDICE PROG ", sindiceprog, ")", e$
           "(PHASE ", s_phase, ")", e$
           "( ", s_commentaire, ")", e$
           "(ORIGINE", sorigine, ")", e$
            #"( MORI SEIKY OP .", soperation, ")", e$
            "( -----------)", e$
            " ", e$
            ]
        else, comment$
        #if entete_ = 1 & longTexte = 0, "(*****OP POUR MODIF*****)", e$      #0013

        while sclient = svide2, q2

        "(", spaces$ = 0, snamenc$, ")", e$                           # Nom du prog iso
        "(", spaces$ = 0, "CLIENT ", sclient, ")", e$

        #"( DEBIT DIAM.", stck_wdth$, ")", e$
        q15,q16,q17,q18

       # 35, "DGWZ[", brut_Z_mini, ",", brut_Z_en_plus_devant,",", brut_DIAM_inter, ",", brut_DIAM, "]", e$
        #"( -----------)",e$
        " ", e$ #"( )",e$
        if compensat_outil = 1, #0082
            [
            "( ATTENTION RAYONS ET LARGEURS D OUTILS )", e$     #"( ATTENTION RAYON DE PLAQUETTE )",e$
            #"( ET LARGEUR D OUTIL )",e$                        #"( ET LARGEUR D OUTIL )",e$
            "( COMPENSES DANS LE PROGRAM. )", e$                #"( COMPENSES DANS LE PROGRAM. )",e$
            #"( METTRE LE RAYON DE FRAISE DANS LA GEOM. )",e$
            "( -----------)",e$
            ]
        " ", e$
        #"(LISTE D OUTILS)",e$
        entete_ = 0 #0012

p_entete_dur

        " ", e$
        "(MORS=*)", e$
        "(LONGUEUR SORTIE MORS=*MM)", e$
        "(PRESSION M.=*B)", e$
        "(TU=** SEC)", e$
        " ", e$


lsof0$           #Start of file for tool zero, lathe
      lsof$

lsof$            #Start of file for non-zero tool number, lathe

    old_plan_usi_X = plan_usi_X, old_plan_usi_Y = plan_usi_Y, old_plan_usi_Z = plan_usi_Z   #0071
    old_rud_usi_X = rud_usi_X, old_rud_usi_Y = rud_usi_Y, old_rud_usi_Z = rud_usi_Z

    #"( )", e$
    spaces$ = 1
    p_entete_dur
    "G80 G40 G18 G99", e$
    #pbld, n$, "M98 P1", e$
    #pbld, n$, *sgcode, "G53 X0 Z0", e$ #pfxout, pfzout, e$
    35, "MCS G0 XP290 ZP292", e$

    #if butee = 1, pbutee
    sav_cc_1013 = cc_1013$                                   #0050 1/17/03
    ltlchg$

msof0$           #Start of file for tool zero, mill
      msof$

msof$            #Start of file for non-zero tool number, mill

        p_entete_dur
          "G80G40G18G98", e$
          " ", e$
        mtlchg$

ltlchg$          #Toolchange, lathe  Changement d'outil "TOUR"
        toolchng = one
        old_cc_computer = -1 #0059 pour forcer l'affichage de la correction de rayon au changement d'outil
        gcode$ = zero
        copy_x = vequ(x$)
        pcc_capture   #Capture LCC ends, stop output RLCC
        c_rcc_setup$   #Save original in sav_xa and shift copy_x for LCC comp.
        pcom_moveb    #Get machine position, set inc. from c1_xh
        c_mmlt$        #Position multi-tool sub, sets inc. current if G54...
        pannul_trans_inc    #0074
        #ptoolcomment
        #comment
        old_usinage = usinage
        usinage = 1
        #num = num + 1
        #pm_deblocage_broches    #0056
        if reglage_pp = 1,
            [
            "*********** ", e$
            "home type : ", *home_type, e$
            "*************", e$
            ]
        if home_type < two, #Toolchange G50/home/reference position
            [
            sav_xh = vequ(copy_x)
            sav_absinc = absinc$
            absinc$ = zero
            pmap_home   #Get home position, xabs        #retour aux origines
            ps_inc_calc #Set start position, not incremental
            #Toolchange home position
            #if home_type = one & hold_t >0 & pointe = 0,    # **************home_type = one*********
            #pbld, n$, "G0 G28 U0. V0.", e$, pbld, n$, "G0 G53 Z-173.", e$              #pbld, n, *sgcode, pfxout, pfyout, pfzout, e$
            if css_start_rpm & old_usinage <> 2, prpm_fin, e$
            if home_type = one & hold_t >0 & pointe = 1, pret_om_pointe # & ret_pointe =0
            else,
                [
                #Toolchange g50 position
                #pbld, n$, *sg28ref, "U0.", [if y_axis_mch, "V0."], "W0.", e$
                #pmap_home    # ********* ajouté **********
                #toolno = t * 100 + zero
                #pbld, n$, "N", *num ,e$
                #if home_type = m_one, pbld, n$, t, *toolno, e$     # *sgcode, #pour afficher un G0 avec
                #else, pbld, n$, *sg50, pfxout, pfyout, pfzout, e$
                ]
            pe_inc_calc #Update previous
            absinc$ = sav_absinc
            copy_x = vequ(sav_xh)
            ]
        perreur_V_pl_ou_rud #0071
        #if tool_op$ = 216 & speed >0, pcan1, pbld, n$, "M5", e$ #si op Butée et S >0 =Arret de broche
        if butee = 1 & M_zero1_apres_butee = 1, pcan1, pbld, n$, "M01", e$
        if butee = 1 & M_zero1_apres_butee = 1, pcan1, pbld, n$, " ", e$   #"( )", e$
        #pcan
        ret_pointe = 0
        if tool_op$ <> 216 & (pointe = 0) & (hold_t >0), pret_om
        butee = 0
        if spindle_no$ > 0, toolno = t$  # cote broche2
            else, toolno = t$
        old_tloffno = tloffno$  #correcteur diam.
        old_tlngno = tlngno$    #correcteur long.
        num = num + 1    #t$ * 100
        hold_num = num
        if tool_op$ = 216,
            [
            n$, "(TEST FIN DE BARRE)", e$
            n$, "M95(CONTROLE DE CHUTE ON)", e$
            n$, "/M98P8001", e$
            n$, "M96(CONTROLE DE CHUTE FIN)", e$
            ]
        pbld, ptoolcomment
        if tool_op$ <> 216,
            [
            pcan1, pbld, 
            #pcan1, pbld, n$, *sgcode, "G53 X0 Z0", e$ # pfxout, pfzout, e$
            #prv_posttype$ = two, pcan1, pbld, n$, "G99 G18 ", e$    #*sgfeed,
            pcan1, pbld, n$, pcaxis_off_l, e$
            #if rc1 > two & prv_posttype$ <> two, pcan1, pbld, n$, *sgcode, "G53 X0 Z0", e$ # pfxout, pfzout, e$  # SI AVANT = FRAISAGE
            if css_start_rpm,
                [
                pcssg50, # CSS output AFTER a G97S???? RPM spindle startup
                ]
            else,
                [
                if tool_op$ <> 216, pcan1, pbld, n$, "N", num, "M8", e$
                ]
            #pcan1, pbld, n$, pwcs, e$
            pcan1, pbld, n$, *toolno, "D1", e$ # *sgcode,
            pcan1, pbld, n$, pfscool, strcantext, e$
            ]
        #" ", e$
        if tool_op$ = 216, pcan1, pbld, n$, *toolno, "D1", e$ # *sgcode, ***************************
        if tool_op$ = 67, troncon = 1   #0063
        if spindle_no$ > 0, pcan1, pbld, n$, "(CORRECTEUR + 40 A DROITE)", e$
        pcan1, pbld, n$, pfsgplane, e$
        hold_num = num
        comment$
            #n$, pfsgplane, e$
        #if op_id$ <> 2, pcan1, pbld, n$, *sm08, e$  #*m69,
            #pcaxis_off_l  # M46/M246   Postblock for lathe transition
        pcom_moveb    #Reset machine position, set inc. from last position
        pspindle
        #Added for 'css_start_rpm' logic (09/05/01)
        if css_actv$,
            [
            if css_start_rpm, prpm # Direct RPM startup for programmed CSS
            else,
                pcss # NO RPM start - just output the CSS  #pbld,
            ]
        else, # Direct RPM was programmed
            [
            if tool_op$ <> 216, prpm # Output programmed RPM
            ]
        sav_absinc = absinc$
        if home_type > one, absinc$ = zero
        if tool_op$ = 67 & avance_broche_2 = 0, pcan1, pbld, n$, *sm73, e$ # ramasse pièce #0063 OUI SANS LA BROCHE 2
        if tool_op$ = 67, m73 = 1
        ipr_actv$ = 1   #0083 force l'avance en mm/tour
        # Modifié pour approche Z puis X avec la pointe
        pcan
        if pointe = 0 & opcode$ <> 109, pcan1, pbld, n$, psccomp, *sgcode, pfxout, pyout, pfzout, # opcode 109 pour la butée
            strcantext, e$  #pfscool,
        if pointe = 1, pcan1, pbld, n$, psccomp, *sgcode, pyout, pfzout,
            strcantext, e$  #pfscool,
        if pointe = 1, pcan1, pbld, n$, pfxout, e$
        pcan2
        if lcc_cc_pos, plcc_cc_pos  #Use sav_xa to position with comp. LCC
        pcom_movea    #Update previous, pcan2
        ps_inc_calc   #Reset current
        absinc$ = sav_absinc
        #Added for 'css_start_rpm' logic (09/05/01)
        if css_start_rpm, pcss # CSS output AFTER a G97S???? RPM spindle startup   pbld,
        c_msng$        #Position single-tool sub, sets inc. current if G54...
        toolchng = zero
        #if tool_op = 216, pbutee   # pour aller à -BUTEE-
        hold_t = t$  # pour incrémenter l'appel d'outil dans le M99 P*
        if opcode$ = 104, old_X = xabs, z_debut_fil = zabs


mtlchg$          #Toolchange, mill
        old_c = -9999   #0090
        toolchng = one
        old_cc_pos = -1 #0076 pour forcer l'affichage de la correction de rayon au changement d'outil
        gcode$ = zero
        copy_x = vequ(x$)
        pcom_moveb    #Get machine position, set inc. from c1_xh
        c_mmlt$        #Position multi-tool sub, sets inc. current if G54...
        pannul_trans_inc
        #ptoolcomment
        #comment$
        old_usinage = usinage
        usinage = 2
        #num = num + 1
        if home_type < two, #Toolchange G50/home/reference position
            [
            sav_xh = vequ(copy_x)
            sav_absinc = absinc$
            absinc$ = zero
            pmap_home   #Get home position, xabs
            ps_inc_calc #Set start position, not incremental
            #Toolchange home position
            #if home_type = one,
                #[
                #pcan1, pbld, n$, "G0 G28 U0. V0.", e$     #pbld, n, *sgcode, pfxout, pfyout, pfzout, e
                #pcan1, pbld, n$, "G0 G53 Z-173.", e$
                #pcan1, pbld, n$, " ", e$
                #]
            #else,
                #[
                #Toolchange g50 position/reference
                #pbld, n, *sg28ref, "U0.", [if y_axis_mch, "V0."], "W0.", e
                #pmap_home         # ********* ajouté **********
                #toolno = t$ * 100 + zero
                #if home_type = m_one, pcan1, pbld, n$, *sgcode, *toolno, e$
                #else, pcan1, pbld, n$, *sg50, pfxout, pfyout, pfzout, e$
                #]
            pe_inc_calc #Update previous
            absinc$ = sav_absinc
            copy_x = vequ(sav_xh)
            ]
        if butee = 1, pcan1, pbld, n$, "M01", e$
        if butee = 1, n$, " ", e$    #"( )", e$
        ret_pointe = 0
        if (pointe = 0) & (hold_t >0), pret_om  #(butee = 0) & (pointe = 0) & (hold_t >0)
        if (pointe = 1) & (hold_t >0), pret_om_pointe
        butee = 0
        if spindle_no$ > 0, toolno = t$ * 100 + t$ +16   #tloffno$ cote broche2
        else, toolno = t$ #tloffno$
        old_tloffno = tloffno$
        num = num + 1    #t$ * 100
        #n$, "N", *num, e$
        #n$, "G0 G53 X0 Y0 Z0", e$ # *xh$, "Y0", *zh$, e$
        #pcaxis_on_m   # M45/M245    Postblock for mill transition  #0089
        n$, *sgfeed, pfsgplane, e$
        #n$, pwcs, e$
        #pcan1, pbld, n$, "G53 Z-173.", e$
        if millcc, cabs = zero, cinc = zero  #Force C0 if G12.1/G07.1   #0089
        pcan1, pbld, n$, *toolno, "D1" e$
        if spindle_no$ > 0, pcan1, pbld, n$, "(CORRECTEUR + 40 A DROITE)", e$
        hold_num = num
        ptoolcomment
        comment$
        #n$, "M25", e$
        #pcan1, pbld, n$, "G28 C0 H0 V0", e$  # Retour à l'origine sur axe
        pcom_moveb    #Reset machine position, set inc. from last position
        pcaxis_on_m   #Postblock for mill transition    #008
        pcan
        if millcc, cabs = zero, cinc = zero  #Force C0 if G12.1/G07.1   #0089
        sav_absinc = absinc$
        if home_type > one, absinc$ = zero
        #pcan1, pbld, n$, *sgcode, pwcs, pfxout, pfyout, pfzout, strcantext, e$
        pspindle
        prpm
        pcan1, pbld, n$, pfscool, e$
        pcan1, pbld, n$, psccomp, *sgcode,  pfzout, strcantext, e$
        pcan1, pbld, n$, pfxout, pfyout, pfcout, e$
        pm_blocage_brocheS  #0122
        old_c = cabs    #0056
        pindex
        pcom_movea    #Update previous, pcan2
        ps_inc_calc   #Reset current
        absinc$ = sav_absinc
        c_msng$        #Position single-tool sub, sets inc. current if G54...
        toolchng = zero
        if millcc, pmillccb #Set mill conversion
        hold_t = t$   # pour incrémenter l'appel d'outil dans le M99 P*
        !lturret$, !op_id$, !cuttype, !mill5$, !millcc
        old_m5 = m5$

ltlchg0$         #Call from NCI null tool change, lathe
      copy_x = vequ(x$)
      c_rcc_setup$   #Save original in sav_xa and shift copy_x for LCC comp.
      pcom_moveb    #Get machine position, set inc. from last position
      c_mmlt$        #Position multi-tool sub, sets inc. current if G54...
      pannul_trans_inc  #0074
      comment$
      pcan2 #0005
      toolno = t$
      if tloffno$ <> old_tloffno,
            [
            if tloffno$ > 12, "( CORRECTEUR DE DROITE )", e$
            if tloffno$ < 13, "( CORRECTEUR DE GAUCHE )", e$
            pcan1, pbld, n$, toolno, e$
            ]
      old_tloffno = tloffno$
      pbld, n$, psgplane, e$
      pcaxis_off_l  # M46/M246  Postblock for lathe transition
      pspindle
      pnullspindle
      perreur_V_pl_ou_rud   #0071
      #pcan1, pbld, n$, pscool,e$
      if home_type > one & workofs$ <> prv_workofs$,
        [
        sav_absinc = absinc$
        absinc$ = zero
        pcan1, pbld, n$, psgcode, pwcs, pfxout, pfyout, pfzout, e$
        pe_inc_calc #Update previous
        ps_inc_calc #Set current inc.
        absinc$ = sav_absinc
        ]
      #0042 Output cutter comp before each finish pass of      # 1/17/03
      #finishing groove canned cyle                            # 1/17/03
      if gcode$ = one, plinout                                 # 1/17/03
      else,                                                    # 1/17/03
      [                                                        # 1/17/03
        if lathecc = 3, pcan1, pbld, n$, sccomp, e$                   # 1/17/03
        if tool_op$ = 201, !cc_pos$                              ### 5/28/04
        prapidout                                              # 1/17/03
      ]
      if lcc_cc_pos, plcc_cc_pos  #Use sav_xa to position with comp. LCC
      pcom_movea
      toolchng0 = zero
      c_msng$ #Single tool subprogram call
      !op_id$, !cuttype, !tool_op$, !lturret$, prv_millcc = zero


pm_blocage_brocheS  #0056
        if reglage_pp = 1,
            [
            "*********** ", e$
            "affichage pour réglage PP ", e$
            *mi4$, *cuttype, "blocage_broche", blocage_broche1, *millcc, *y_axis_mch, e$
            " C", *c$, " oldc", *old_c, " cabs", *cabs, *rotaxis$, *rotary_type$, *tool_op$, e$
            "*********** ", e$
            ]
        if spindle_no$ = 0 & g112 <> 1 | millcc, pm_broche_1  #BROCHE 1
        if spindle_no$ > 0 & g112 <> 1, pm_broche_2  #BROCHE 2

pm_broche_1
        if rotary_type$ = 2 | millcc, n$, s_debloc_B_G, e$, blocage_broche1 = 0 # millcc | cabs <> old_c |
            else,  n$, s_bloc_B_G, e$, blocage_broche1 = 1

pm_broche_2
        if rotary_type$ = 2, n$, s_debloc_B_D, e$, blocage_broche2 = 0 # millcc | cabs <> old_c |
            else,  n$, s_bloc_B_D, e$, blocage_broche2 = 1


pm_f_blocage    #FORCE POUR AXE C ENTRE 2 ************non utilisé *************
      if millcc = 0,
        [
        if spindle_no$ = 0 & blocage_broche1 = 0,
            [
            pbld, n$, s_bloc_B_G, e$
            blocage_broche1 = 1
            ]
        if spindle_no$ = 1 & blocage_broche1 = 0,
            [
            pbld, n$, s_bloc_B_D, e$
            blocage_broche2 = 1
            ]
        old_c = c$  #0090
        ]


pm_f_deblocage
     #if millcc = 0 & ( c$ <> old_c | tool_op$ = 55),  #0090 55 = taraudage rigide (cabs <> old_cabs | cinc <> old_cinc)

     if rotary_type$ <> 3,
        [
        if spindle_no$ = 0 & blocage_broche1 = 1,
            [
            pbld, n$, s_debloc_B_G, e$
            blocage_broche1 = 0
            ]
        if spindle_no$ = 1 & blocage_broche2 = 1,
            [
            pbld, n$, s_debloc_B_D, e$
            blocage_broche2 = 0
            ]
        ]


mtlchg0$         #Call from NCI null tool change, mill
      # n$, "toto la joie", e$
      if prv_millcc & (not(millcc) | cuttype <> prv_cuttype | (millcc & spindle_no$ <> prv_spindle_no$)),
        [
        pmillcca #End mill conversion
        prv_millcc = zero
        ]
      if mi4$ = 1, pm_blocage_brocheS   #0056    #0089
      copy_x = vequ(x$)
      pcom_moveb    #Get machine position, set inc. from last position
      c_mmlt$        #Position multi-tool sub, sets inc. current if G54...
      pannul_trans_inc
      #comment$
      pcan
      #
      if spindle_no$ > 0, toolno = t$ # cote broche2
        else, toolno = t$
      #if toolno <> old_tloffno, pbld, n$, "SALUT3", gcode$, toolno, e$
      #old_tloffno = tloffno$
      #
      pcan2 #0005

      #if tloffno$ <> old_tloffno,   # CORRECTION AU RAYON
           # [
            #toolno = t$
            ##pcan1, pbld, n$, "G0 G53 X0 Y0 Z0", e$ # *xh$, "Y0", *zh$, e$
            #if tloffno$ <> t$, pbld, n$, *toolno, "( 2EME CORRECT. RAYON )", e$
            #if tloffno$ = t$, pbld, n$, *toolno, "( 1ER CORRECT. RAYON )", e$
            #old_tloffno = tloffno$
            #]
     # if tlngno$ <> old_tlngno & tlngno$ <> tloffno$,   # CORRECTION EN LONGUEUR
      #      [
       #     #pcan1, pbld, n$, "G0 G53 X0 Y0 Z0", e$ # *xh$, "Y0", *zh$, e$
        #    toolno = t$
         #   if tlngno$ <> t$, pbld, n$, *toolno, "( 2EME CORRECT. LONG. )", e$
          #  if tlngno$ = t$, pbld, n$, *toolno, "( 1ER CORRECT. LONG. )", e$
           # old_tlngno = tlngno$
            #]

      pbld, n$, psgplane, e$
      pspindle
          #n$, "toto 007", e$
     # pcaxis_on_m   # M45/M245  Postblock for mill transition
          #n$, "toto 123456", e$
      pnullspindle

      #pbld, n$, pscool,e$
      if reglage_pp = 1, " C", *c$, " oldc", *old_c, " cabs", *cabs, *rotaxis$, *rotary_type$, *tool_op$, "g112", *g112, e$
     # "voir" , *old_m5 "et nouveau" , *m5$,e$
      if old_m5 <> m5$, n$, s_debloc_B_G ,e$  #0122
         if home_type > one & workofs$ <> prv_workofs$,
        [
        sav_absinc = absinc$
        absinc$ = zero
        pbld, n$, psgcode, pwcs, pfxout, pfyout, pfzout, pfcout, e$
        pe_inc_calc #Update previous
        ps_inc_calc #Set current inc.
        absinc$ = sav_absinc
        ]
      pindex

      ppos_cax_lin  #Position C axis, toolplane or CL
      if millcc,    #0091
        [
        pmillccb  #Set mill conversion
        pcom_moveb
        ]
      if g112 = 1 | gcode$ = one, plinout   #0121
      else, prapidout
      if old_m5 <> m5$ , pm_blocage_brocheS  #0056 & (blocage_broche2 = 0 | blocage_broche1 = 0),
      comment$
      pcom_movea    #Update previous, pcan2
      toolchng0 = zero
      c_msng$ #Single tool subprogram call
      !lturret$, !op_id$, !cuttype, !mill5$, !millcc
      #old_m5 = m5$

fmt "" 2 old_m5
fmt "" 2 m5$
fmt "" 2 Caff
pq$              #0091 Setup post based on switch settings
      result = newfs(11, cdelta_calc)  #Format for 3 place precision

pmiscreal$      #0091 Call on misc reals
      if tooltable_active$ | toolchng <> 2, # 1011 call on tool table re-read and normal process
        [
        if tooltable_active$,
          [
          rc1 = one
          size1 = rbuf (one, zero)
          if cc_1013$ = zero, cc_pos$ = zero
          ]
        if rc1 < size1, preadcur_nxt
        if lathecc = three | c1_tool_op = 62,
          [
          sav_cc_1013 = cc_1013$
          cc_1013$ = zero
          ]
        ]

ptoolend$        #0091 Retour pt entre 2 usinages sans forcément retourner au pt changement d'outil *** outil TOUR ***
                #Read from buffer 1 for prv_, current and next tool info
                #end tool here, current and next valid
      sav_rev = rev #Axis Sub does not update to rev
      pcan
      if n1_gcode <> 1000,
        [
        if tool_op$ = 51, millcc_flag = one # pour afficher le G113 avec "pmillcca"
        if millcc,                      #0089
            [
            pmillcca  #End mill conversion
            ]
        toolno = t$
        sav_gcode = gcode$
        gcode$ = zero

        if v9_coolant, [coolant$ = zero, pbld, n$, pscool, e$]
          if all_cool_off,
            [
            #all coolant off with a single off code here
            if coolant_on, pbld, n$, sall_cool_off, e$
            coolant_on = zero
            ]
          else,
            [
            local_int = zero
            coolantx = zero
            while local_int < 20 & coolant_on > 0,
              [
              coolantx = and(2^local_int, coolant_on)
              local_int = local_int + one
              if coolantx > zero,
                [
                coolantx = local_int
                # pbld, n$, scoolantx, e$    pas d'affichage des arrêts d'arrosage sur cette CN. C'est le M98 P... qui gèrent
                ]
              coolantx = zero
              ]
            coolant_on = zero
            ]

        #pmillcca
        if posttype$ = two, pl_retract      #annulation C et T
        else, pm_retract
        if n1_gcode <> 1003,
            [
            #if prog_stop = 1, pbld, n$, *sm01, e$
            #if prog_stop = 2, pbld, n$, *sm00, e$
            #n$, " ", e$
            ]
        gcode$ = sav_gcode
        ]
      else, #Null toolchange
        [
        if n1_posttype <> posttype$, pcan1, pbld, n$, pnullstop, strcantext, e$
        ]
      pcan2
      #Update current variables to prv_ needed in comparisons
      !posttype$
      #0091 if rc1 < size1, preadcur_nxt
      #0050 1/17/03
      # When canned grooving, set cc_1013 to zero so that the cutter comp
      # value called out on the NCI 1013 line will be ignored.  cc_1013
      # should be restored to it's previous value in 'prcc_call_end'.
      #if tool_op$ = 208 | tool_op$ = 62,                         # 1/17/03
        #[                                                        # 1/17/03
        #sav_cc_1013 = cc_1013$                                   # 1/17/03
        #cc_1013$ = zero                                          # 1/17/03
        #] # 1/17/03

pl_retract      # Retour pt changement d'outil *** outil TOUR ***
        # Retract tool based on next tool gcode, lathe (see ptoolend)
      cc_pos$ = zero
      if home_type = one,
        [
        perreur_z_retour_inter  #0073
        pmap_home   #Get home position, xabs
        ps_inc_calc #Set inc.
        pbld, n$, psccomp, e$
        #0053 pcan1, pbld, n$, *sgcode, pfxout, pfyout, pfzout, e$ # *toolno,   pour annulation correct. "T100"
        pbld, n$, pnullstop, strcantext, e$
        ]
    else,
        [
        #Retract to reference return
        perreur_z_retour_inter  #0073
        pbld, n$, `sgcode, psccomp, e$
        if home_type = m_one, pbld, n$, *toolno, "D1", e$
        pcan1, pbld, n$, *sg28ref, "U0.", [if y_axis_mch, "V0."], "W0.",
          pnullstop, strcantext, e$
        if home_type > m_one, pbld, n$, *toolno, e$
        ]
    blocage_broche1 = 69 #BROCHE 1
    # Ajouté/Modifié
        #pmap_home   #Get home position, xabs
        #ps_inc_calc #Set inc.
                    #pbld, n$, psccomp, e$
        #if pointe = 0, pcan1, pbld, n$, *sgcode, pfxout, pfyout, pfzout, e$ # *toolno,    pour annulation correct. "T100"
                    #pbld, n, pnullstop, strcantext, e

pm_retract      #Retract tool based on next tool gcode, mill (see ptoolend)
      if stck_spindle$ = 0 & blocage_broche1 = 1, pbld, n$, s_debloc_B_G, e$
      if stck_spindle$ = 1 & blocage_broche2 = 1, pbld, n$, s_debloc_B_D, e$
      if home_type = one,
        [
        pmap_home   #Get home position, xabs
        if frc_cinit, cabs = zero
        ps_inc_calc #Set inc.
        #0076
        cc_pos$ = 0
        pbld, n$, psccomp, e$
        #0053 pcan1, pbld, n$, *sgcode, pfxout, pfyout, pfzout, protretinc,
        #0053  *toolno, strcantext, e$
        #0053 pbld, n$, pnullstop, e$
        #protretinc  #0053 pour initialiser le C à zéro
        pbld, n$, "M5", e$
        "", e$
        #pcaxis_off_l  #appelé au debut du tournage      M46/M246   Postblock for lathe transition
        ]
      else,
        [
        #Retract to reference return
        pbld, n$, `sgcode, psccomp, e$
        if home_type = m_one, pbld, n$, *toolno, "D1", e$
        #pcan1, pbld, n$, *sgcode, "G53 X0 Y0 Z0", e$ # pfxout, "Y0", pfzout, e$
        #pcan1, pbld, n$, *sg28ref, "U0.", [if y_axis_mch, "V0."], "W0.",
          #protretinc, pnullstop, strcantext, e$
        if home_type > m_one, pbld, n$, *toolno, e$
        ]
        #pbld, n$, *toolno, e$  #0053 remise à 0 du correcteur T



protretinc      #0091 Reset the C axis revolution counter
      if frc_cinit,
        [
        rev = zero
        sav_rev = zero
        cabs = zero
        csav = zero
        c_wnd = zero
        prvc_wnd = zero
        indx_out = zero
        if c_axistype = one | c_axistype = four,
          [
          if home_type = one, pfcout
          else,
            [
            cinc = zero
            *cinc
            ]
          ]
        else,
          [
          pindxcalc
          if c_axistype = three,
            [
            indx_out = cabs
            e$, pbld, n$, pindex
            ]
          else, pfcout
          ]
        !csav, !cabs, !c_wnd
        ]

peof0$           #End of file for tool zero
      peof$

peof$            #End of file for non-zero tool
        ptoolend$
        comment$
        fin = 1
        # Ajouté
        pannul_trans_inc    #0074
        if pointe = 1, pret_om_pointe
        #if pointe = 0, pret_om
        #pcan1, pbld, n$, "G0 G28 U0.", e$
        #pcan1, pbld, n$, "G0G53Z-173.", e$
        #if stck_spindle$ = 0 & blocage_broche1 = 1, pbld, n$, s_debloc_B_G, e$
        #if stck_spindle$ = 1 & blocage_broche2 = 1, pbld, n$, s_debloc_B_D, e$
        n$, "G0 G139", e$
        n$, 35, "MCS G0 XP290 ZP292", e$
        n$, "M05", e$
        #n$, "toto zrgzergzergzergzerg", e$
        #n$, "M60 (OUVERTURE DE LA PORTE)", e$
        if tool_op$ <> 67, pcan1, pbld, n$, "M30", e$   #mandrin lopin
        if tool_op$ = 67,           #tronconnage barre
            [
            pcan1, pbld,n$, "M00", e$
            pcan1, pbld,n$, "M99", e$
            ]
        #n$, "M30", e$
        mergesub$
        clearsub$
        mergeaux$
        clearaux$
        "%", e$

pwcs            #G54+ coordinate setting at toolchange
      #if home_type > one,
        #[
        #sav_frc_wcs = force_wcs
        #if sub_level, force_wcs = zero
        #if workofs <> prv_workofs$ | (force_wcs & toolchng),
          #[
          #if sub_level, result = mprint(swrkserror)
          #if workofs < 6,
            #[
            #g_wcs = workofs + 54
            #*g_wcs
            #]
          #else,
            #[
            #p_wcs = workofs - five
            #"G54.1", *p_wcs
            #]
          #]
        #force_wcs = sav_frc_wcs
        #!workofs
        #]

        if workofs$ <> prv_workofs$ | (force_wcs & toolchng),
            [
            # G54 pour la broche de gauche et G55 pour la broche de droite
            if spindle_no$ = 0, g_wcs = 54
            if spindle_no$ > 0, g_wcs = 55
            g_wcs
            prv_workofs$ = workofs$
            #workofs$ = 0
            ]


#Rc1 is used to flag the SOF, rc1 = two at SOF
pcaxis_off_l    #Toolchange C axis disable, lathe, check prv_ to current
      if rc1 > two & prv_posttype$ <> two,
        [
        if spindle_no$ > 0, pbld, n$, sm246, "(DESACTIVATION DE L AXE C BROCHE2)", e$  # M245 "tournage broche 2
        else, pbld, n$, spaces$ = 0, 35, sm46, e$ # ";DESACTIVATION DE L AXE C BROCHE1", e$
        spaces$ = 0,
        ]

pcaxis_on_m     #Toolchange C axis enable, mill, check prv_ to current
      #if (rc1 = two | prv_posttype$ = two),
        #[
        pbld, n$, "M05", e$
        if spindle_no$ > 0, pbld, n$, sm245, "(ACTIVATION DE L AXE C BROCHE2)", e$  # M245 "tournage broche 2
        else, pbld, n$, spaces$ = 0, 35, sm45, e$ # ";ACTIVATION DE L AXE C BROCHE1", e$
        spaces$ = 0,
        if nextdc$ = three, pbld, n$, "(M49)", e$  #Disable tap
        #]

plcc_cc_pos     #Position for lathe canned cycle cutter comp. enable
                #Position saved in prcc_setup
      pe_inc_calc   #Update previous
      copy_x = vequ(sav_xa)
      pcom_moveb    #Get machine position, set inc. from previous
      #Force comp from the finish profile
      compok = one
      cc_pos$ = n1_cc_pos
      if gcode$ = zero, prapidout
      else, plinout
      lcc_cc_pos = zero


pgear           #Use spindle gear range, find gear from RPM at X min.
      if use_gear = one,
        [
        if lathtype = zero | lathtype = two, x_min$ = c1_x_max
        else, x_min$ = c1_x_min
        x_min$ = x_min$ + c1_tox  #Correction for workshift
        if x_min$ = zero, x_min$ = 0.001
        if css_actv$ = zero, gear_spd = speedrpm
        else, gear_spd = (conversion * g_speed) / (pi$ * abs(x_min$) * two)
        gear = frange(one, gear_spd)
        *gear
        ]

pmbroche2   # ajoute 10 à la fonction de rotation de broche 2
    if posttype$ = two & spindle_no$ > 0, #fonction M pour la broche 2 (; M13, M14)
        [                   # (spdir 1 = M3, 2 = M4)
        _spindle_2 = g_spdir
        if spdir$ = 1, _spindle_2 = 103   # M203 BROCHE 2 EN M3
        if spdir$ = -1, _spindle_2 = 104  # M204 BROCHE 2 EN M4
        ]
        else, _spindle_2 = g_spdir


prpm            #Output for start spindle
    pmbroche2           # *spindle_no$, retourne 0=broche gauche 1=broche droite
      speed = speedrpm
      if butee = 1, speed = 0
      if posttype$ = two & spindle_no$ = 0, pbld, n$, *sg97, *speed, *spindle_l, pgear, e$    # tour broche1
      if posttype$ = two & spindle_no$ > 0, pbld, n$, *sg97, *speed, *_spindle_2, pgear, e$    # tour broche2
      if posttype$ <> two, pbld, n$, *sg97, "S2=200", e$, n$, *spindle_m, e$
      speed_fr = speed
      if posttype$ <> two, pbld, n$, *speed_fr, e$, n$, *spindle_m, e$
      if posttype$ <> two, perreur_s_frais_0    #0067 #0200

prpm_fin
    pmbroche2           # *spindle_no$, retourne 0=broche gauche 1=broche droite
      speed = speedrpm
      if butee = 1, speed = 0
      if posttype$ = two & spindle_no$ = 0 & speed >0, n$, *sg97, *speed, spindle_l, e$ # tour broche1
      if posttype$ = two & spindle_no$ > 0 & speed >0, n$, *sg97, *speed, _spindle_2, e$ # tour broche2

prpmnull       #Output for RPM at NULL tlchg (don't force spindle 'M' code)
      speed = speedrpm
    # modifié ajouté#
      #if posttype$ = two,
        #pbld, n$, *sg97, *speed, spindle_l, pgear, e$  # Lathe mode spindle
      #else,
        #[  #Milling mode spindle
         ##result = nwadrs(strp, speed) #Different letter than 'S' for mill spindle?
         #pbld, n$, *sg97, *speed, spindle_m, e$
         #result = nwadrs(strs, speed) #Reset to 'S' for next single speeed output
        #]
      !css_actv$ #Added (8/27/2002) #0049

pcssg50         #Output Constant surface speed clamp
      if tool_op$ = 67, #0068
            [
            if stck_wdth$ <> 45, maxss$ = 1000
            if stck_wdth$ < 30, maxss$ = 1600
            if stck_wdth$ < 20, maxss$ = 2000
            if stck_wdth$ < 10, maxss$ = 2500
            ]
      if css_actv$, pbld, n$, *sg50, *maxss$, e$

pcss            #Output Constant surface speed
    pmbroche2
      speed = g_speed
      if css_actv$ & spindle_no$ = 0, pbld, n$, *sg9697, *speed, spindle_l, e$
      if css_actv$ & spindle_no$ > 0, pbld, n$, *sg9697, *speed, _spindle_2, e$
      !speed
      perreur_S_G96 #0072/0200


#Toolchange setup, spindle output, pspindle must be called first
pnullspindle  #Null toolchange and dwell spindle change, g_speed is input
      if prv_css_actv$<>css_actv$ | prv_g_spdir<>g_spdir
         | prv_speed<>g_speed,
        [
        #Switch G97/G96 or direction at null or dwell
        #Stop the spindle if direction changes
        #0051 if prv_g_spdir <> g_spdir, pbld, n$, pnullstop, e$
        if css_actv$,
          [
          speed = g_speed
          pnullg50
          if prv_speed <> speed | prv_css_actv$<>css_actv$, pcss #(09/05/01)
          ]
        else,
          [
          if (prv_speed<>g_speed | prv_g_spdir<>g_spdir | prv_css_actv$<>css_actv$)
             & g_speed, prpmnull #(09/05/01)
          ]
        ]
      else, pnullg50

pnullg50      #Change G50 clamp speed at null or dwell
      if prv_maxss$ <> maxss$ & css_actv$, pcssg50

pnullstop     #Stop spindle at null, dwell or tool end
      sav_spdir = g_spdir
      if cool_w_spd = zero, g_spdir = one
      else, g_spdir = one + (fsg2(coolant$) * three)
      #pour afficher les arrets de broche #if posttype$ = two, spindle_l,
      #         #else, spindle_m
      g_spdir = sav_spdir

pspindle        #Spindle speed calculations for RPM
      if maxss$ = zero | maxss$ > max_speed, maxss$ = max_speed
    if pointe = 1, maxss$ = max_speedm4  # S1800 maxi avec la pointe
      if css_actv$,
        [
        #Spindle speed calculations for strt_spd w/CSS
        speedx = abs(xa)
        if opcode$ = 104, speedx = abs(c1_x_min)
        if opcode$ = 105, speedx = abs(tcr$)
        if speedx < 0.001,speedx = 0.001
        speedrpm = (conversion * g_speed) / (pi$ * speedx * two)
        ]
      else, speedrpm = g_speed
      #zero indicates spindle off (not a mistake)
      if speedrpm,
        [
        if speedrpm > maxss$, speedrpm = maxss$
        if speedrpm < min_speed, speedrpm = min_speed
        ]
      #Spindle speed for RPM with lathe drill, thread
      if opcode$ = 104 | opcode$ = 105, css_actv$ = zero
      if css_actv$ = zero, g_speed = speedrpm


pset_g_speed    #Set the spindle control variables from the read variables
      g_speed = abs(ss$)
      if cool_w_spd, g_spdir = fsg3(spdir$) + (fsg2(coolant$) * 3)
      else, g_spdir = fsg3(spdir$)
      if g_speed = zero, g_spdir = one # if RPM = '0', output 'M05' #0045
      if spd_rev, pswtchspin

pswtchspin      #Reverse spindle direction
      if g_spdir > two, g_spdir = abs (g_spdir - five) + three
      else, g_spdir = abs (g_spdir - two)

preadcur_nxt    #Read current and next tool record
      c1_gcode = rbuf (one, rc1)     #Current tool record
      #Place buffered variables in post global variables
      cuttype = c1_cuttype
      lathtype = c1_lathtype
      lathecc = c1_lathecc
      gcodecc = c1_gcodecc
      y_axis = c1_y_axis
      millcc = c1_millcc
      n1_gcode = rbuf (one, nc1)     #Next tool record
      if cuttype = one, cc_1013$ = one
      else, cc_1013$ = zero
      if lathecc<>zero & lathecc<>4, compok = zero
      else, compok = one

ptlchg1002$      #Call at actual toolchange with tlchng_aft
      whatline$ = four #Required for vector toolpaths
      pset_mach   #0049 Set rotary switches by reading machine def parameters
      pmatrix_su
      pmap_plane
      pset_turret
      pset_g_speed
                            #0049
#CNC<<ORIGINAL>>      toolend_flg = one     #0049
#CNC<<MSG-ERREUR(2594)>> Echec du traitement de type de sortie d'instruction PP!, , Label non défini[*23], Echec du traitement de type de sortie d'instruction PP!, , Label attendu mais non trouvé[*35]
#CNC<<MSG-ERREUR(2594)>> Illegal character(s) encountered
      if gcode$ = 1000,
        [
        #Null toolchange    #0049
        if millcc & prv_mi4$ = mi4$, cutpos2$ = sav_cutpos2
        if cc_stop_fcc & rcc_flg$ = 6, no_nc_out$ = one
        ]
      else,
        [
        #Toolchange and Start of file
        if gcode$ = 1002,
          [
          #Actual toolchange
          preset_mod
          ]
        prv_xia = vequ (c1_xh)
        prv_feed = c9k
        pnt_at_zero = zero
        ]
      #Mill canned cycle initialze at toolchange
      arcoutput$ = sav_arcout
      if millcc,    #axe C
        [
        #R arc output
        arcoutput$ = one
        if cuttype = four,
          [
          crad = rotdia$/two
          ]
        else,
          [
          breakarcs$ = zero
          breakarcsxz$ = zero
          breakarcsyz$ = zero
          ]
        ]
      iout = zero
      kout = zero
      !mi4$ #0049

preset_mod    #0091 Reset the mode flags and map during motion blocks
      breakarcs$   = breakarcss
      breakarcsxz$ = breakarcsxzs
      breakarcsyz$ = breakarcsyzs
      cir_at_zero = zero
      linarc$ = zero
      brklinestype$ = zero

# --------------------------------------------------------------------------
# Motion NC output
# --------------------------------------------------------------------------
ptool_insp      #0091 Tool inspection point
      #Modify following lines to customize output for tool inspection points
      if posttype$ = two, #Lathe tool inspection point
        [
        "(TOOL INSPECTION POINT - POST CUSTOMIZATION MAY BE REQUIRED)", e$
        if prmcode$ = 29999, #Only output tool insp comment if one was entered with this insp point
          [
          sparameter$ = ucase(sparameter$)
          pbld, n$, *sm00, "(", sparameter$, ")", e$
          ]
        else, pbld, n$, *sm00, e$      #Output just the stop if no comment
        #pbld, n$, *sgcode, *toolno, e$ #Restate tool number
        pbld, n$, pfsgplane, e$        #Restate plane code
        prpm # Output programmed RPM   #Restate spindle
        prv_feed = c9k                 #Set prv_values to c9k to force them out with next moves
        prv_gcode$ = c9k
        prv_workofs$ = c9k
        if coolant$, prv_coolant$ = c9k
        ]
      else, #Mill tool inspection point
        pbld, n$, *sm00, "(TOOL INSPECTION POINT - POST CUSTOMIZATION REQUIRED)", e$


prapidout       #0091 Output to NC, linear movement - rapid
      if lathecc = zero,
        [
        if millcc_flag & (abs(cuttype) = four | abs(cuttype) = two) & cutpos2$ = zero,  #Polar interpolation is active & Y-axis subs or Right face or Left face & before start point of operation geometry
          [
          if abs(cuttype) = four,  #Y-axis substitution, output C first on separate line
            [
            pcan1, pbld, n$, pexct, [if g112= 1, "G1", else, psgcode], pcout, [if g112= 1, "F500"], e$ #0121
            pbld, n$, pexct, pxout, pyout, pzout, pscool, strcantext, e$
            ]
          else,  #Right or Left face cut, output Z last on separate line
            [
            pcan1, pbld, n$, pexct, "G1", pxout, pyout, pcout, pscool, strcantext, "F500", e$ #0121
            pbld, n$, pexct, psgcode, pzout, e$
            ]
          ]
        else,
            pcan1, pbld, n$, psgplane, pexct, [if g112= 1, "G1", else, psgcode], psccomp, pxout, pyout,
            pzout, pcout, [if g112= 1, "F500"], pscool, strcantext, e$  #pwcs,   #0121
        ]
      else,  #Lathe canned turning cycle
        [
        pcan1, pbld, n$, pexct, psgcode, psccomp, pxout, pyout, pzout, pcout, pscool, strcantext, e$
        ]
      if rpd_typ$ = 7, ptool_insp      #Tool inspection point

plinout         #Output to NC, linear movement - feed
      pcan1, pbld, n$, psgplane, sgfeed, pexct, [if g112= 1, "G1", else, psgcode], psccomp, pxout,
        pyout, pzout, pcout, [if g112= 1, "F500", else, pfr], strcantext, e$    #pscool, #0121
      paramcomp #0059
      if rpd_typ$ = 7, ptool_insp      #Tool inspection point

pcirout         #Output to NC, circular interpolation
	# AXE C usinage de "FACE" --> G6 et I J en ABSOLU
      pcan1, pbld, n$, psgplane, sgfeed, pexct, [if g112= 1, *sgcode, "G6", else, psgcode], psccomp, pxout,
        pyout, pzout, pcout, parc, pfr, strcantext, [spaces$ = 0, if g112=1, "(", *arcrad$, ")", spaces$ =1 ], e$  #pscool,

pl_ncoutput     #Movement output
      #pcc_capture   #0080/0049 Capture LCC ends, stop output RLCC  #0089
      pcom_moveb    #Get machine position, set inc. from last position
      pcan
      c_rcc_setup$   #Save original in sav_xa and shift copy_x for LCC comp.
      if gcode$ = zero, prapidout
      if gcode$ = one, plinout
      if gcode$ > one & gcode$ < four, pcirout
      if lcc_cc_pos, plcc_cc_pos  #Use sav_xa to position with comp. LCC
      pcom_movea    #Update previous, pcan2

pm_ncoutput     #Movement output
      if millcc, pmillccb #Set mill conversion  #axe C  #0089
      pcom_moveb    #Get machine position, set inc. from last position
      pcan
      pindex
      ppos_cax_lin  #Position C axis, toolplane or CL
      if gcode$ = zero, prapidout
      if gcode$ = one, plinout
      if gcode$ > one & gcode$ < four, pcirout
      pcom_movea    #Update previous, pcan2
      ppos_pnt_zero #Update to detect point at zero
      #if millcc, pmillcca #End mill conversion  #axe C

pdwl_spd$        #Output to NC, spindle, dwell changes
      pset_g_speed
      pspindle
      comment$
      pnullspindle
      pcan#
      if fmtrnd(dwell$), pdwell1
      else, pcan1, pbld, n$, strcantext, e$
      pcan2

mrapid$          #Output to NC of linear movement - rapid, mill
      copy_x = vequ(x$)
      pm_ncoutput

pzrapid$         #Linear movement in Z axis only - rapid, mill
      copy_x = vequ(x$)
      pm_ncoutput

pz$              #Linear movement in Z axis only - at feedrate, mill
      copy_x = vequ(x$)
      pm_ncoutput

mlin$            #Output to NC of linear movement - feed, mill
      copy_x = vequ(x$)
      pm_ncoutput

mcir$            #Output to NC of circular interpolation, mill
      pshft_map_ijk
      copy_x = vequ(x$)
      pm_ncoutput

lrapid$          #Rapid linear movement, lathe
      copy_x = vequ(x$)
      if lathecc = 3, pbld, n$, sccomp, e$        #0049 1/17/03
      pl_ncoutput

llin$            #Linear line movement - at feedrate, lathe
      copy_x = vequ(x$)
      pl_ncoutput

lcir$            #Circular interpolation, lathe
      pshft_map_ijk
      copy_x = vequ(x$)
      pl_ncoutput

pmx$             #Output to NC of Multisurf Rotary, mill
      copy_x = vequ(x$)
      pm_ncoutput

#Pre-process rotary motion control flags, mill
pmx0$            #5 ax Drill
      if cuttype = five,
        [
        if drill5$ = one, z$ = initht$ * z_mult
        else,
          [
          if fr$ =  -2,gcode$ = zero
          else, gcode$ = one
          ]
        ]
plin0$           #0091 Pre-linear movement postblock
      if posttype$ <> two,
        [
        preset_mod
        if y_axis = zero & c_axistype <> three,
          [
          #Set brklinestype
          if millcc = zero,
            [
            #if abs(cuttype) = two, brklinestype$ = six
            #if cuttype = three, brklinestype$ = four
            ]
          if cuttype = four & rev_brkflag,  #Break rotation flag (set in pcoutrev)
            [
            brklinestype$ = 11  #Break all lines, use brklineslen$ for segment length
            #brklineslen$ = pi$ * rotdia$        #Break every 360 degrees
            brklineslen$ = pi$ * rotdia$ / four  #Break every 90 degrees
            rev_brkflag = zero  #Reset flag
            ]
          ]
        ]

pcir0$           #0091 Pre-circular interpolation postblock
      pmap_plane
      if posttype$ <> two,
        [
        preset_mod
        pshft_map_xc
        if y_axis = zero & millcc = zero,
          [
          #Set linarc, breakarcs and cir_at_zero
          if fmtrnd(xca) = zero & fmtrnd(yca) = zero,
            [
            #Set breakarcs and cir_at_zero
            breakarcs$   = zero
            breakarcsxz$ = zero
            breakarcsyz$ = zero
            #C axis move
            if mach_plane = zero,
              [
              cir_at_zero = one
              czero_csav = csav
              ]
            #Arc output
            if mach_plane = two, cir_at_zero = m_one
            ]
          if cir_at_zero = zero, linarc$ = one
          ]
        if millcc_flag & abs(cuttype = two) & plane$ > zero, linarc$ = one  #Linearize all arcs other than XY plane when G12.1
        if millcc_flag & cuttype = four,  #Force Radius output and break arcs if G07.1
          [
          breakarcs$ = one   #Break XY arcs, 0 = no, 1 = quadrants, 2 = 180deg. max arcs
          arctype$ = five    #XY Arc center 1=abs, 2=St-Ctr, 3=Ctr-St, 4=unsigned inc., 5 = R no sign, 6 = R signed neg. over 180
          if plane$ > zero, linarc$ = one  #Linearize all arcs other than XY plane when G07.1
          ]
        ]
      !ynci$
# --------------------------------------------------------------------------
# Motion output components
# --------------------------------------------------------------------------
pdwell1         #Dwell output
      gcode$ = four  #for implied dwells
      pcan1, pbld, n$, *sgcode, *dwell$, strcantext, e$

pbld            #Canned text - block delete
      if bld, '/'

pfbld           #Force block delete
      "/"

psgplane        #Machining plane
      if y_axis_mch, sgplane
      !plane$

pfsgplane       #Force machining plane
      if y_axis_mch, *sgplane
      !plane$

pexct           #Canned text - exact stop
      if exact, 'G9'

psgcode         #Output the Gcode based on the current plane
      if c_ax_flp,
        [
        #Reverse arc direction for c_axis flip
        if gcode$ = two | gcode$ = three,
          [
          sav_gcode = gcode$
          #gcode$ = abs (gcode$ - five)
          gcode$ = (5 - gcode$)  #G02->G03 or G03->G02    #0049 1/17/03
          ]
        ]
      if plane$ = zero, `sgcode
      if plane$ = one, `sgcode1
      if plane$ = two, `sgcode2
      if c_ax_flp, gcode$ = sav_gcode

psccomp         #Output the cutter compensation based on the current plane
      if compok,
      [
        if plane$ = zero & old_cc_pos <> cc_pos$,       #0050 if plane$ = zero, sccomp  FRAISAGE RADIALE & TOURNAGE
            [
                if cc_pos$ = 0, "G40"
                if cc_pos$ = 1, "G41"
                if cc_pos$ = 2, "G42"
                old_cc_pos = cc_pos$
            ]
            #"xxxx", *plane$, " cc_pos", *cc_pos$, " CC_COMPUT ", *cc_computer$,
        #if plane$ = zero, sccomp, old_cc_pos = -1  #0069 FRAISAGE RADIAL
        if plane$ = one, sccomp1, old_cc_pos = -1   #0069 FRAISAGE AXIAL   old_cc_pos = -1 pour forcer l'affichage de la prochaine correction
        if plane$ = two, sccomp2, old_cc_pos = -1   #0069   TOURNAGE
        ]

pfxout          #Force X axis output
      if g112=1, xabs = xabs/2
	  if absinc$ = zero, *xabs, !xinc
      else, *xinc, !xabs

pxout           #X output
      #"*** abs", *absinc$, "xabs", *xabs, "xinc", *xinc, "****",   #0057
      #if gcode$ < 2 ,#on interdit les rampes
      #[
      if g112=1, xabs = xabs/2
	  if absinc$ = zero, xabs, !xinc
      else, xinc, !xabs
      #]

pfyout          #Force Y axis output
      if y_axis_mch,
        [
        if absinc$ = zero, *yabs
        else, *yinc
        ]
      else, pchecky
      !yabs, !yinc

pyout           #Y output
      if y_axis_mch,
        [
        if absinc$ = zero, yabs
        else, yinc
        ]
      else, pchecky
      !yabs, !yinc

pchecky         #Y output should not happen on a c-axis lathe
       if not(toolchng) & yinc, [if (mprint(symoterror, 2) = 2), exitpost$]

pfzout          #Force Z axis output
      if absinc$ = zero, *zabs, !zinc
      else, *zinc, !zabs
      old_Z = zabs  #0073

pzout           #Z output
      if absinc$ = zero, zabs, !zinc
      else, zinc, !zabs
      old_Z = zabs  #0073

pfcout          #Force C axis output
      if posttype$ <> two & c_axistype <> three,
        [
        if c_axistype = one | c_axistype = four,
          [
          cabs = cabs -90
          if absinc$ = zero, *cabs, !cinc
          else, *cinc, !cabs
          ]
        else, #Signed direction, no incremental
          [
          if indx_mc = zero, result = nwadrs(sc_minus, cabs)
          else, result = nwadrs(str_cax_abs, cabs)
          cabs = cabs -90
          *cabs
          !c_wnd, !cabs, !cinc
          ]
        ]

pcout           #C axis output
      if posttype$ <> two & c_axistype < three,
        [
        if c_axistype = one | c_axistype = four,
          [
          if g112 <> 1, cabs = cabs -90
          if absinc$ = zero, cabs, !cinc
          else, cinc, !cabs
          if g112 <> 1, if absinc$ = zero, old_c = cabs
          if g112 <> 1, else, old_c = cinc
          ]
        else, #Signed direction, modality on c_wnd, no incremental
          [
          if prv_c_wnd <> c_wnd,
            [
            if g112 <> 1, cabs = cabs -90
            if indx_mc = zero, result = nwadrs(sc_minus, cabs)
            else, result = nwadrs(str_cax_abs, cabs)
            *cabs
            ]
          !c_wnd, !cabs, !cinc
          ]
        ]


pindex          #Index output
      if c_axistype = three,
        [
        pbld, n$, `sindx_mc, indx_out, e$
        !cabs, !cinc
        ]

#parc            #Select the arc output
      #if arcoutput$ = zero,
        #[
        ##Arc output for IJK
        #if arctype$ = one,
          #[
          ##Arc output for IJK, absolute
          #iout = (iout + dia_shift) * dia_mult
          #jout = (jout + y_shift) * y_mult
          #kout = (kout + z_shift) * z_mult
          #if c_ax_flp, iout = -iout
          #]
        #else,
          #[
          ##Arc output for IJK, start/center
          #iout = iout * dia_mult
          #jout = jout * y_mult
          #kout = kout * z_mult
          #if c_ax_flp, iout = -iout
          #]
        #iout, kout, jout
        #]
      #else,
        #[
        ##Arc output for R
        #if abs(sweep$)<=180 | arcoutput$=one, result = nwadrs(srad, arcrad$)
        #else, result = nwadrs(srminus, arcrad$)
        #*arcrad$
        #]

parc            #0050 Select the arc output
      #Setup for arctype setting
      if (posttype$ = 2 & (larctypexz$ = one | larctypexz$ = four)) |
        (posttype$ = 1 &(plane$ = zero & (arctype$ = one | arctype$ = four)) |   #XY Plane
        (plane$ = one & (arctypeyz$ = one | arctypeyz$ = four)) | #YZ Plane
        (plane$ = two & (arctypexz$ = one | arctypexz$ = four))),  #XZ Plane
        [
        result = newfs(two, i$)
        result = newfs(two, j$)
        result = newfs(two, k$)
        result = newfs(two, iout)
        result = newfs(two, jout)
        result = newfs(two, kout)
        ]
      else,
        [
        result = newfs(three, i$)
        result = newfs(three, j$)
        result = newfs(three, k$)
        result = newfs(three, iout)
        result = newfs(three, jout)
        result = newfs(three, kout)
        ]

      if (posttype$ = 2 & (plane$ = 2 & larctypexz$ < five)) |
        (posttype$ = 1 & ((plane$ = 0 & arctype$ < five) |
        (plane$ = 1 & arctypeyz$ < five) |
        (plane$ = 2 & arctypexz$ < five))),
        [
        #Arc output for IJK
        if (posttype$ = 2 & (plane$ = 2 & larctypexz$ = one)) |   #XZ plane - Lathe
          (posttype$ = 1 & ((plane$ = zero & arctype$ = one) |    #XY Plane - Mill
          (plane$ = one & arctypeyz$ = one) |                     #YZ Plane - Mill
          (plane$ = two & arctypexz$ = one))),                    #XZ Plane - Mill
          [
          #Arc output for IJK, absolute
          iout = (iout + dia_shift) * dia_mult
          jout = (jout + y_shift) * y_mult
          kout = (kout + z_shift) * z_mult
          if c_ax_flp, iout = -iout
          ]
        else,
          [
          #Arc output for IJK, start/center
          iout = iout * (dia_mult/abs(dia_mult))
          jout = jout * y_mult
          kout = kout * z_mult
          if c_ax_flp, iout = -iout
          ]
        if g112=1, [
			iout = iout/2
			*iout, kout, *jout
			]
		else, iout, kout, jout
        !i$, !j$, !k$
        ]
      else,
        [
        #Arc output for R
        if abs(sweep$)<=180 |
          (posttype$ = 2 & (plane$ = 2 & larctypexz$ = five)) |               #XZ Plane - Lathe
          (posttype$ = 1 & ((plane$ = 0 & arctype$ = five) |                  #XY Plane - Mill
          (plane$ = 1 & arctypeyz$ = five) |                                  #YZ Plane - Mill
          (plane$ = 2 & arctypexz$ = five))), result = nwadrs(srad, arcrad$)  #XZ Plane - Mill
        else, result = nwadrs(srminus, arcrad$)
        *arcrad$
        ]

pffr            #Output feedrate, force
      if ipr_actv$ = zero, pfr_m
      else, pfr_l
      perreur_avance_tour   #0200
      *feed

pfr             #Output feedrate
      if ipr_actv$ = zero, pfr_m
      else, pfr_l
      perreur_avance_tour   #0200
      `feed

pfr_m           #Format feedrate for mill
      result = nwadrs(strf, feed)
      result = newfs (17, feed)

pfr_l           #Format feedrate for lathe
      if opcode$ = 104,
        [
        #Format feedrate for lathe thread
        result = nwadrs(stre, feed)
        result = newfs (19, feed)
        ]
      else,
        [
        result = nwadrs(strf, feed)
        result = newfs (18, feed)
        perreur_av_tour_forte   #0067 0200
        ]

pscool          #Coolant is seperate code
      if cool_w_spd = zero, scoolant
      !coolant$

pfscool         #Coolant is seperate code, force
      if cool_w_spd = zero, *scoolant
      !coolant$

pcc_capture     #Capture ends of canned turning path, stop output w/rough
      #Stop output in rough only lathe canned cycles
      #between rough and finish paths
      if cc_stop_fcc & rcc_flg$ = 6 & lathecc <> 2, no_nc_out$ = one
      #Capture vector for G73 cycle
      if rpd_typ$ = 6 & abs(lathecc) = two,
        [
        if rcc_flg$ = one, lcc_xcst = vequ (copy_x)
        if rcc_flg$ = three, lcc_xcend = vequ (copy_x)
        ]

pcom_moveb      #Common motion preparation routines, before
      pshft_map_xa
      pxyzcout
      ps_inc_calc

ppos_cax_lin    #Position C if from CL
      if (prv_pnt_at_zero) & c_axistype <> three,
        [
        #Output to NC, C axis movement only - rapid deg/min
        sav_gcode = gcode$
        sav_feed = feed
        gcode$ = one
        if millcc = zero,
          [
          feed = maxfrdeg
          pbld, n$, psgcode, pfcout, pffr, e$
          ]
        else, pbld, n$, psgcode, pfcout, pfr, e$
        gcode$ = sav_gcode
        feed = sav_feed
        ]

pcom_movea      #Common motion preparation routines, after
      #pcan2
      pe_inc_calc

ppos_pnt_zero   #Position C if from CL
      !pnt_at_zero
      pnt_at_zero = zero

#Mill canned cycle output
pmillccb        #Cross/Face canned cycle code, before
      #if c1_millcc = n1_millcc & n1_millcc & n1_gcode = 1000 & cutpos2$ = three,
            #[
            #sav_cutpos2 = two
            #cutpos2$ = two
            #]
      ##if cutpos2$ = one,  ##0089
      if millcc_flag = zero,
        [
        millcc_flag = one  #ZERO 0086
        result = newfs(two, cabs)
        result = newfs(two, cinc)
        #if stck_spindle$ = 0, pbld, n$, s_debloc_B_G, e$, blocage_broche1 = 0
        #if stck_spindle$ = 1, pbld, n$, s_debloc_B_D, e$, blocage_broche2 = 0
        #Cross/Face canned cycle start code
        if abs(cuttype) = two,
          [
          #Face canned cycle start code, G112 (break ramp)
          #pbld, n$, sgfeed, sgcode, e$
          pbld, n$, "(X= VALEUR AU DIAM.)", e$
          pbld, n$, "(C= VALEUR DE DEPLAC. COMME AU FRAISAGE)", e$
          pbld, n$, "(VALEUR A PLAT DEPUIS L ORIGINE)", e$
          pbld, n$, "(C= AXE PERPENDICULAIRE A X)", e$
		  pbld, n$, "(I J= CENTRE DU R EN ABSOLU)", e$
          pbld, n$, spaces$ = 0, 35, *sg112, 91, "X,C", 93, spaces$ = 1, e$    #format FACE[X,C] ou FACE[X,C,Z] ça MARCHE 
          prv_xabs = c9k, prv_xinc = c9k, prv_cabs = c9k, prv_cinc = c9k
          compok = one
          spaces$ = 1
          g112 = 1  #0121
          ]
        else,
          [
          #Cross canned cycle start code, G107
          sav_gcode = gcode$, gcode$ = zero
          sav_cabs = cabs, cabs = zero
          pbld, n$, pfsgplane, "W0.", "H0.", e$
          cabs = sav_cabs
          pbld, n$, "(X= VALEUR CONSTANTE DE PLONGE AU DIAM.)" , e$
          pbld, n$, "(C= VALEUR ANGULAIRE ABSOLU)", e$
          pbld, n$, "(Z= DIAMETRE DE DEVELOPPE)", e$
          #pbld, n$, *sgcode, *sgfeed, *sg107, *crad, e$
		  pbld, n$, *sgcode, *sgfeed, e$
		  pbld, n$, spaces$ = 0, 35, *sg107, 91, "X,C,", *crad, 93, spaces$ = 1, e$ 
          gcode$ = sav_gcode
          ]
        ]
      if cutpos2$ > zero & cutpos2$ < four,
        [
        #Change rapid to highest possible feedrate
        if gcode$ = zero,
          [
          gcode$ = one
          feed = maxfeedpm
          ]
        ]

pmillcca        #Cross/Face canned cycle code, after    ##0089
      if millcc_flag,
        [
        millcc_flag = zero
        result = newfs(11, cabs)
        result = newfs(14, cinc)
        !cabs, cabs = zero
        #if abs(prv_cuttype) = two, pbld, n$, spaces$=0, 35, *sg113, 91, "X,C", 93, spaces$=1, e$, g112 = 0  #0121 Face
		if abs(prv_cuttype) = two, pbld, n$, spaces$=0, 35, *sg113, spaces$=1, e$, g112 = 0  #0121 Face
        else, pbld, n$, spaces$=0, 35, *sg108, spaces$=1, e$, n$, pfcout, e$  #Cross
        cabs = prv_cabs
        ]

#0200-------------------------------------------------------------------------
serreurPas_fil  : "Erreur - Filetage INFORMER LA VALEUR DU PAS"
#serreurTar2    "Erreur - Taraud INFORMER LA VALEUR DU PAS"
#serreurCC_Cor  "ATTENTION PRISE DE CORRECTION SUR UN CERCLE"
serreurFin_cycle : "CYCLE D EBAUCHE MAL DEFINI"
serreur_Axe_c   : "ATTENTION DEVALIDER LE --MI4-- A 0 POUR VALEURS XY"
serreur_av_tour : "ATTENTION AVANCE DE TOURNAGE MM/MN !!!!"
serreur_av_tour_forte   : "ATTENTION AVANCE DE TOURNAGE FORTE !!!! verifier le choix d'avances suivant la bibliothèque outil, -page outil-"
serreur_s_frais_0 : "ATTENTION --S-- FRAISAGE = 0 !!!!"
serreur_surepG71 : "ATTENTION VERIFIER SURREPAISSEURS EN EBAUCHES = 0!!!"
serreur_V_pl_ou_rud : "ATTENTION VALEURS DANS LE RUD OU PLAN ONT CHANGEES"    #0071
serreur_S_G96   : "Erreur - G96 TROP ELEVE A VERIFIER"    #0072
serreur_Z_retour    : "Erreur - Z DANS LA PIECE AVANT RETOUR OM"  #0073
serreur_G2_G3_fin_cycle : "Erreur fin de cycle d'ébauche - finition par une INTERPOLATION!"   #0084
serreur_Y_maxi  : "Erreur dépassement des limites en -Y- avec l'outil ! <= 110mm "  #0087
serreur_Axe_c2   : "ATTENTION -fraisage - INFORMER MI4" #0088

perreurPas_fil  #"Erreur - Filetage INFORMER LA VALEUR DU PAS"
            if thdlead$ = 0.999, [
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", t$, e$
            result = mprint(serreurPas_fil)
            exitpost$
            ]

#perreurTaraud  #"Erreur - Taraud avec un autre cycle"
            #if paramT2 = 4 | paramT2 = 5, [        #if tool_typ$ = 3 | tool_typ$ = 4,
            #"ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", t$, e$
            #result = mprint(serreurTar)
            #exitpost$
            #]

#perreurTaraud2 #"ATTENTION PAS DE VALEUR DE ***PAS***"
            #if thdlead$ = 0.999, [
            #"ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", t$, e$
            #result = mprint(serreurTar2)
            #exitpost$
            #]

#perreurCC_COR  #"ATTENTION PRISE DE CORRECTION OU ANNULATION SUR UN CERCLE"
            #if cc$ =41 | cc$ = 42 | cc$ =40 | cc$ = 140, [
            #"ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", t$, e$
            #result = mprint(serreurCC_Cor)
            #exitpost$
            #]

perreurFin_cycle    #"CYCLE D EBAUCHE MAL DEFINI" #0033
            if fin_cycle = 0, [
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, e$
            result = mprint(serreurFin_cycle)
            exitpost$
            ]

perreur_Axe_c   #"ATTENTION DEVALIDER LE --MI4-- A 0 POUR VALEURS XY"
            #"cuttype", *cuttype, *mi4$, "Y", *y_axis_mch, "millcc", *millcc, e$
            if mi4$ = 0 & (cuttype = 2 | cuttype = 3) & y_axis_mch & millcc = 1, [
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, e$
            result = mprint(serreur_Axe_c)
            exitpost$
            ]

perreur_avance_tour #"ATTENTION AVANCE DE TOURNAGE MM/MN !!!"
            if ipr_actv$ = 0 & cuttype = 1, [       #feed > 1  & opcode$ <> 4 sgfeed = g98 &
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_av_tour, *ipr_actv$, e$
            result = mprint(serreur_av_tour)
            ]

perreur_av_tour_forte   #0067 "ATTENTION AVANCE DE TOURNAGE TROP FORTE - verifier le choix d'avances suivant la bibliothèque outil, -page outil-!!!"
            if feed > 1, [
            feed, "(ATTENTION A L AVANCE: ", *feed, ")", e$
            result = mprint(serreur_av_tour_forte, op_id$ )
            ]

perreur_s_frais_0   #0067 "ATTENTION FRAISAGE AVEC S=0 !!!"
            if speed = 0, [
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_s_frais_0, e$
            result = mprint(serreur_s_frais_0)
            ]

perreur_surepG71    #"ATTENTION VERIFIER SURREPAISSEURS EN EBAUCHES = 0!!!"
            if xstckcc = 0 | zstckcc = 0, [
            #"ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_surepG71, e$
            result = mprint(serreur_surepG71)
            ]

perreur_V_pl_ou_rud     #"ATTENTION VALEURS DANS LE RUD OU PLAN ONT CHANGEES"   #0071
            #"gggggggggggg", *plan_usi_X, *plan_usi_Y, *rud_usi_Z, *old_rud_usi_X, *old_rud_usi_Y, *old_rud_usi_Z, e$
            if  (plan_usi_X <> old_plan_usi_X) | (plan_usi_Y <> old_plan_usi_Y) | (plan_usi_Z <> old_plan_usi_Z) |
                (rud_usi_X <> old_rud_usi_X) | (rud_usi_Y <> old_rud_usi_Y) | (rud_usi_Z <> old_rud_usi_Z) & spindle_no$ = 0,
                [
                "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_V_pl_ou_rud, e$
                result = mprint(serreur_V_pl_ou_rud)
                ]
            old_plan_usi_X = plan_usi_X, old_plan_usi_Y = plan_usi_Y, old_plan_usi_Z = plan_usi_Z
            old_rud_usi_X = rud_usi_X, old_rud_usi_Y = rud_usi_Y, old_rud_usi_Z = rud_usi_Z

perreur_S_G96   #"Erreur - G96 TROP ELEVE A VERIFIER"   #0072
            if speed > 600 & css_actv$ = 1, [
            result = mprint(serreur_S_G96)
            ]


perreur_z_retour_inter # "Erreur - Z DANS LA PIECE AVANT RETOUR OM" #0073
            if orient$ > 2 & tool_typ$ <> 1, #OUTILS INTER, FORETS... # pas pour l outil à fileter
                [
                if reglage_pp = 1, n$, "******", e$, *orient$, *tool_typ$, "z ", *old_Z, e$, n$, "*********", e$
                if spindle_no$ = 0,     # Broche de GAUCHE
                    [
                    if old_Z <= 0,
                        [
                        #*old_z, e$
                        "ATTENTION ERREUR --BROCHE 1--- OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_Z_retour, e$
                        result = mprint(serreur_Z_retour)
                        ]
                    ]
                if spindle_no$ = 1,     # Broche de DROITE
                    [
                    if old_Z >= 0 & orient$ <> 6, #orient 6 = outils exter
                        [
                        #*old_z, e$
                        "ATTENTION ERREUR --BROCHE 2--- OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_Z_retour, e$
                        result = mprint(serreur_Z_retour)
                        ]
                    ]
                ]


perreur_G2_G3_fin_cycle #0084 pour erreur fin de cycle d'ébauche avec interpolation
        if posi_INTERPO_G2 | posi_INTERPO_G3, [
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, serreur_G2_G3_fin_cycle, e$
            result = mprint(serreur_G2_G3_fin_cycle)
            exitpost$
            ]

perreur_Axe_c2   #"ATTENTION -fraisage - INFORMER MI4"  #0088
            #"cuttype", *cuttype, *mi4$, "Y", *y_axis_mch, "millcc", *millcc, e$
            if mi4$ = -1 & y_axis_mch = 1, [                    #cuttype = 2 &  & millcc = 1
            "ATTENTION ERREUR OP: ", op_id$, " AVEC OUTIL ", *t$, e$
            result = mprint(serreur_Axe_c2)
            exitpost$
            ]

# --------------------------------------------------------------------------
# Drilling
# --------------------------------------------------------------------------
pdrill0$         #Pre-drill postblock call
      #"avant perçage",
      if cuttype = five, #Don't allow 5 axis, rests at toolchange
        [
        usecandrill$ = zero
        usecanpeck$ = zero
        usecanchip$ = zero
        usecantap$ = zero
        usecanbore1$ = zero
        usecanbore2$ = zero
        usecanmisc1$ = zero
        usecanmisc2$ = zero
        ]
      else,
        [
        if abs(cuttype) < three, mdrl_dir = zero
        else, mdrl_dir = one
        x$ = xnci$
        y$ = ynci$
        z$ = refht$
        copy_x = vequ(x$)
        pshft_map_xa
        pxyzcout
        refht_x = vequ(xabs)
        z$ = depth$
        copy_x = vequ(x$)
        pshft_map_xa
        pxyzcout
        depth_x = vequ(xabs)
        z$ = zdrl$
        copy_x = vequ(x$)
        pshft_map_xa
        pxyzcout
        zdrl_x = vequ(xabs)
        z$ = initht$  #Initial is last
        copy_x = vequ(x$)
        pshft_map_xa
        pxyzcout
        initht_x = vequ(xabs)
        znci$ = initht$
        ps_inc_calc
        ]


pdrlcommonb     #Canned Drill Cycle common call, before
      if gcode$ = 81,
        [
        if drillcyc$ = three, drlgsel = fsg1 (-g_speed) + drillcyc$ * two #Tap
        else, drlgsel = fsg2 (dwell$) + drillcyc$ * two
        if initht$ <> refht$, drillref = zero
        else, drillref = one
        prv_refht_a = c9k
        prv_refht_i = c9k
        prv_dwell$ = zero
        ]
      if mdrl_dir = zero, #Set Z to depth   #percage sur la face
        [
        zia = fmtrnd(depth_z)
        zinc = zia - prv_zia
        ]
      else,               #Set X to depth   #percage sur le diamètre
        [
        xia = fmtrnd(depth_x)
        xinc = xia - prv_xia
        ]
      xabs = vequ (depth_x)
      comment$
      pcan

pgdrlout        #Drill Gcode output #0062
      if mdrl_dir = zero, *sgdrillf #percage sur la face
      else, *sgdrillc   #percage sur le diamètre

prdrlout        #R drill position *******VALEUR DE R AU RAYON**********
      if mdrl_dir = zero, refht_a = refht$ - initht$    #mdrl_dir = zero percage sur la face    #0061 refht_a = refht_z
      else, refht_a = (refht$ - initht$)    #refht_x        #percage sur le diamètre
      refht_i = refht$ - initht$
      if absinc$ = zero, refht_a, !refht_i
      else, refht_i, !refht_a
      #"**", *initht$, "**" #pt de depart en haut
      #"**R", *refht$, "**" #pt de depart de percage AU RAYON
      #"**x", *refht_x, "**"    #pt depart de percage en X
      #refht_x = initht$ - refht_x
      #"**x", *tosz$, "**"
      #"**x", *refht_x, "**"    #pt depart de percage en X

ldrill$          #Canned drill cycle, lathe
      #Use this postblock to customize lathe drilling cycles 0 - 7
      pdrlcommonb
       gcode$ = 0        #0001 perso cycle
            #pcan1, pbld, n, *sgcode, *x, *initht_z
            #if refht <> initht_z, pcan1, pbld, n, sgcode, *refht_z
        #peckclr$ = peckclr$ *1000
        "(PERCAGE SIMPLE)", e$
        if refht_z >= 0, pcan1, pbld, n$, *sgfeed, "G83", *depth$, *refht$, pffr, strcantext, e$ #0010 Sans le Z     retr, e    *peck2$, *peck1$, *peckclr$,
        if refht_z < 0,pcan1, pbld, n$, *sgfeed, "G83", *depth$, *refht$, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) retr, e *peck2$, *peck1$, *peckclr$,  *refht_z,
       pcom_movea

lpeck$           #Canned peck drill cycle, lathe

      #0054 ldrill$
        peck1_ = peck1$
        peck2_ = peck2$
        peckclr_ = peckclr$
        dwell_ = dwell$
        dwell_2 = dwell$
        refht_a = (refht$ - initht$)
        if macro_perc_profond = 1,
            [
            "", e$
            "(GARDER LE CYCLE QUI EST ACTIF)", e$
            "(SUR CETTE C.N.)", e$
            "", e$
            "(PERCAGE PROFOND DEGRESSIF)", e$
            "(P- NOM SOUS-PROGRAM.)", e$
            "(K- FOND DU TROU)", e$
            "(W- PRONFONDEUR 1ERE PLONGEE)", e$
            "(C- PROFONDEUR MINI)", e$
            "(B- GARDE -RETOUR-)", e$
            "(A- TEMPO. A L EXTER.)", e$
            "(D- TEMPO. DANS LA MATIERE A CHAQUE PASSE)", e$
            if refht_z >= 0, pcan1, pbld, n$, *sgfeed, "G65 P8500", *depth_z, *peck1_, *peck2_, peckclr_, "A0", dwell_, pffr, strcantext, e$ #0010 Sans le Z     retr, e
            if refht_z < 0,pcan1, pbld, n$, *sgfeed, "G65 P8500", *depth_z, *refht_z, *peck1_, *peck2_, peckclr_, "A0", dwell_, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) retr, e
            ]

        #affichage pour le SL153 et SL15
        refht_a = (refht$ - initht$)
        depth_ = depth$
        depth_ = depth_ / 2

        if refht_z >= 0,
            [
            #pcan1, pbld, n$, "(", "G74", *refht$, ")", e$
            #pcan1, pbld, n$, "(", "G74", *depth$, *peck1$, pffr, strcantext, ")", e$ #0010 Sans le Z     retr, e
            pcan1, pbld, n$, *sgfeed, "G83", *depth_, *refht_a, *peck1$, *dwell_2, pffr, strcantext, e$ #0010 Sans le Z     retr, e
            peck1$ = peck1$ / 2
            refht_a = (refht_a - depth_)* -1
            pcan1, pbld, n$, *depth$, *refht_a, *peck1$, e$ #0010 Sans le Z     retr, e
            pcan1, pbld, n$, "G80", e$ #0010 Sans le Z     retr, e
            ]
        if refht_z < 0,
            [
            #pcan1, pbld, n$, "(", "G74", *refht$, ")", e$
            #pcan1, pbld, n$, "(", "G74", *depth$, *refht_z, *peck1$, pffr, strcantext, ")", e$ #0010 Avec le Z (perçage dans un trou) retr, e
            pcan1, pbld, n$, *sgfeed, "G83", *depth_, *refht_a, *peck1$, *dwell_2, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) retr, e
            peck1$ = peck1$ / 2
            pcan1, pbld, n$, *depth$, *refht_a, *peck1$, e$ #0010 Avec le Z (perçage dans un trou) retr, e
            pcan1, pbld, n$, "G80", e$ #0010 Sans le Z     retr, e
            ]

lchpbrk$         #Canned chip break cycle, lathe
      gcode$ = zero
      prv_dwell$ = zero
      @dwell$
      comment$
      pcan
      pe_inc_calc
      xabs = vequ(refht_x)
      ps_inc_calc
      pcan1, pbld, n$, sgcode, pzout, strcantext,e$
      pe_inc_calc
      xabs = vequ(depth_x)
      ps_inc_calc
      if old_new_sw = one,
        [
        pbld, n$, *sg74, *peckclr$, e$
        result = nwadrs (strq, peck1$)
        ]
      else, result = nwadrs (strk, peck1$)
      pcan1, pbld, n$, *sg74, pfzout, *peck1$, pffr, strcantext, e$
      prv_gcode$ =  -1
      if refht$ <> initht$,
        [
        gcode$ = zero
        xabs = vequ(refht_x)
        ps_inc_calc
        pe_inc_calc
        xabs = vequ(initht_x)
        ps_inc_calc
        pbld, n$, sgcode, pfzout, e$
        ]
      pcom_movea

ltap$            #Canned tap cycle, lathe
      gcode$ = zero
      prv_dwell$ = zero
      @dwell$
      comment$
      pcan
      pe_inc_calc
      xabs = vequ(refht_x)
      ps_inc_calc
      pcan1, pbld, n$, sgcode, pzout, strcantext, e$
      pe_inc_calc
      xabs = vequ(depth_x)
      ps_inc_calc
      opcode$ = 104 #thread address from feedrate
      pbld, n$, "(CYCLE DE TARAUDAGE DECOMPOSE)", e$
      pbld, n$, "(TARAUD FLOTANT)", e$
      pbld, n$, *sthdg32, pfzout, pffr, e$
      if dwell$, pdwell1
      pe_inc_calc
      xabs = vequ(refht_x)
      ps_inc_calc
      pswtchspin
      pbld, n$, pnullstop,e$
      pbld, n$, *sthdg32, pfzout, "M04", e$ #*spindle_l,
      if dwell$, pdwell1
      prv_gcode$ =  -1
      #pbld, n$, pnullstop,e$
      pswtchspin
      if refht$ <> initht$,
        [
        gcode$ = zero
        pe_inc_calc
        xabs = vequ(initht_x)
        ps_inc_calc
        pbld, n$, sgcode, pfzout, "M04", e$ #*spindle_l,
        ]
      pbld, n$, spindle_l, e$
      opcode$ = 81 #Restore opcode
      pcom_movea

lbore1$          #Canned bore #1 cycle, lathe   #0064
      #ldrill$
      shftdrl_ = shftdrl$
      n$, "G1", depth$, pffr, e$
      if dwell$ >0, n$, "G4", *dwell$, e$
      n$, "G1", pfzout, *shftdrl_, e$   #0003

lbore2$          #Canned bore #2 cycle, lathe
      ldrill$

lmisc1$          #Canned misc #1 cycle, lathe
      ldrill$

lmisc2$          #Canned misc #2 cycle, lathe
      ldrill$

mdrill$          #Canned drill cycle, mill
      pdrlcommonb
      #pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,
        #pcout, prdrlout, dwell$, pffr, strcantext, e$

         "(PERCAGE SIMPLE)", e$
        if refht_z >= 0, pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,     #0062 "G83",
            pcout, prdrlout,  pffr, strcantext, e$ #0010 Sans le Z   pgdrlout,  *refht$,  retr, e *peck1$, *peck2$,     *peckclr$,
        if refht_z < 0,pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,   #0062 "G83",
            pcout, prdrlout, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) pgdrlout, *refht_z,  retr, e *peck1$, *peck2$,  *peckclr$,

        #if refht_z >= 0, pcan1, pbld, n$, "G83", *depth$, *refht$, *peck1$, *peckclr$, pffr, strcantext, e$ #0010 Sans le Z     retr, e    *peck2$,
        #if refht_z < 0,pcan1, pbld, n$, "G83", *depth$, *refht_z, *refht$, *peck1$, *peckclr$, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) retr, e *peck2$,
      blocage_broche1 = 69  #0056
      pcom_movea

mpeck$         #Canned peck drill cycle, mill
      pdrlcommonb
      #pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,
        #pcout, prdrlout, *peck1$, dwell$, pffr, strcantext, e$
        dwell_2 = dwell$
        "(PERCAGE PROFOND)", e$
        if refht_z >= 0, pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,     #0062 "G83",
            pcout, prdrlout, *peck1$, pffr, strcantext, e$ #0010 Sans le Z     retr, e *peck2$, pgdrlout,   *dwell_2,
        if refht_z < 0,pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,       #0062 "G83",
            pcout, prdrlout, *peck1$, *dwell_2, pffr, strcantext, e$ #0010 Avec le Z (perçage dans un trou) retr, e  *peck2$,  *refht_z, pgdrlout,
        blocage_broche1 = 69    #0056
        pcom_movea

mchpbrk$       #Canned chip break cycle, mill
      mpeck$

mtap$          #Canned tap cycle, mill
      pdrlcommonb
      if cuttype = 3 & spdir$ = 1, sens_taraud = staraud_D_cote, e$, "(TARAUD. RIGIDE EN X A DROITE)", e$   # T1
      if cuttype <> 3 & spindle_no$ = 0 & spdir$ = 1, sens_taraud = staraud_D_face_B1, e$, "(TARAUD. RIGIDE EN Z A DROITE B1)", e$  # T2
      if cuttype <> 3 & spindle_no$ > 0 & spdir$ = -1, sens_taraud = staraud_G_face_B2, e$, "(TARAUD. RIGIDE EN Z A GAUCHE B2)", e$ # T2
      if cuttype <> 3 & spindle_no$ = 0 & spdir$ = -1, sens_taraud = staraud_G_face_B1, e$, "(TARAUD. RIGIDE EN Z A GAUCHE B1)", e$ # T3
      if cuttype <> 3 & spindle_no$ > 0 & spdir$ = 1, sens_taraud = staraud_D_face_B2, e$, "(TARAUD. RIGIDE EN Z A DROITE B2)", e$  # T3
      if cuttype = 3 & spdir$ = -1, sens_taraud = staraud_G_cote, e$, "(TARAUD. RIGIDE EN X A GAUCHE)", e$  # T4
      #"**", *cuttype, "**", *millcc, "**", *spindle_no$, "**", *spdir$, "**", *g_spdir, "**", *spindle_l, e$

      speed_ret = speed * 1.5   #D
      #pas = feed / speed
      refht_a = refht$ #R
      n$, *spindle_m, "S0", e$
      "(OUTIL TOURNANT)", e$
      "(-A VERIFIER- HORS MATIERE)", e$
      #"(D = VITESSE DE ROTATION EN RETRAIT)", e$
      #pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,
        #pcout, prdrlout, pffr, strcantext, e$
        if drlgsel = 6, n$, "G99", e$, n$, "M29", *speed, e$
      pcan1, pbld, n$, pgdrlout, pxout, pyout, pzout,   #*sgdrlref,
        pcout, refht_a, *n_tap_thds$, strcantext, e$  #pffr,    sens_taraud, speed_ret,
      blocage_broche1 = 1  #0122
      pcom_movea

mbore1$        #Canned bore #1 cycle, mill
      mdrill$

mbore2$        #Canned bore #2 cycle, mill
      mdrill$

mmisc1$        #Canned misc #1 cycle, mill
        dwell_2 = dwell$
      pdrlcommonb
      pcan1, pbld, n$, *sgdrlref, pgdrlout, pxout, pyout, pzout,
        pcout, prdrlout, *shftdrl$, dwell_2, pffr, strcantext, e$
      blocage_broche1 = 69  #0056
      pcom_movea

mmisc2$        #Canned misc #2 cycle, mill

mdrill_2$      #Canned drill cycle repeat, mill
      pdrlcommonb
      p_m_drill_C
      pcan1, pbld, n$, pxout, pyout, pzout, prdrlout,
      pfr, strcantext, e$   #dwell$,
      blocage_broche1 = 1  #0122
      pcom_movea

mpeck_2$       #Canned peck drill cycle repeat, mill
      #mdrill_2$
      pdrlcommonb
      p_m_drill_C
      pcan1, pbld, n$, sgdrlref, pgdrlout, pxout, pyout, pzout, prdrlout,
      *peck1$, dwell$, pfr, strcantext, e$
      pcom_movea

mchpbrk_2$     #Canned chip break cycle repeat, mill
      mdrill_2$

mtap_2$        #Canned tap cycle repeat, mill
      #mdrill_2$
      pdrlcommonb
      p_m_drill_C
      pcan1, pbld, n$, pxout, pyout, pzout, refht$,
      dwell$, strcantext, e$
      pcom_movea

mbore1_2$      #Canned bore #1 cycle repeat, mill
      mdrill_2$

mbore2_2$      #Canned bore #2 cycle repeat, mill
      mdrill_2$

mmisc1_2$      #Canned misc #1 cycle repeat, mill
      mdrill_2$

mmisc2_2$      #Canned misc #2 cycle repeat, mill
      mdrill_2$

pdrlcst$         #Custom drill cycles 8 - 19 (user option)
      #Use this postblock to customize drilling cycles 8 - 19
      pdrlcommonb
      "CUSTOMIZABLE DRILL CYCLE ", pfxout, pfyout, pfzout, pfcout, e$
      pcom_movea

pdrlcst_2$       #Custom drill cycles 8 - 19 (user option)
      #Use this postblock to customize drilling cycles 8 - 19
      pdrlcommonb
      "CUSTOMIZABLE DRILL CYCLE ", pfxout, pfyout, pfzout, pfcout, e$
      pcom_movea

pcanceldc$     #Cancel drill cycle
      xabs = vequ (initht_x) #Position to return
      ps_inc_calc
      pe_inc_calc #Update to current location
      gcode$ = zero
      pcan
      if drlgsel <> 5 & drlgsel <> 6,   #0066
        pcan1, pbld, n$, sgcode, "G80", strcantext, e$
        else,
        pcan1, pbld, n$, sgcode, "G80", strcantext, e$
        if blocage_broche1 = 1, pm_f_deblocage
      pcan2

p_m_drill_C
          #pcan1, pbld, n$, "G80", e$
          pcan1, pbld, n$, pcout, e$

# --------------------------------------------------------------------------
# Version 9+ MiscOps Section
# --------------------------------------------------------------------------
#Miscellaneous Variables Common to all Miscops operations
#Format as needed

#Integers
#miscops_mi1, miscops_mi2, miscops_mi3,
#miscops_mi4,  miscops_mi5, miscops_mi6,
#miscops_mi7, miscops_mi8, miscops_mi9,
#miscops_mi10

#Reals
#miscops_mr1, miscops_mr2, miscops_mr3,
#miscops_mr4, miscops_mr5, miscops_mr6,
#miscops_mr7, miscops_mr8, miscops_mr9,
#miscops_mr10
#
# --------------------------------------------------------------------------
#Format Assignments and Initializations
# --------------------------------------------------------------------------
fmt "Z" 2 stck_init_z$           #Initial Z position of the stock (900-902,904,905)
fmt "Z" 2 stck_final_z$          #Final Z position of the stock (900-902,904,905)
fmt "B" 2 stck_final_z           #0063 Final Z position of the stock (900-902,904,905)  DEPLACEMENT DE LA PIECE/BROCHE
fmt   2 stck_chuk_st_z$          #Initial Z axis Chuck Position (900-903)
fmt "X" 2 stck_chuk_st_x$        #Initial X axis Chuck Position (900-903)
fmt   2 stck_chuk_end_z$         #Final Z axis Chuck Position (900-903)
fmt "X" 2 stck_chuk_end_x$       #Final X axis Chuck Position (900-903)
fmt "W" 3 stck_chuk_st_dz$       #Destination chuck Z axis reference position before transfer (900)
fmt "U" 3 stck_chuk_st_dx$       #Destination chuck X axis reference position before transfer (900)
fmt "W" 3 stck_chuk_end_dz$      #Destination chuck Z axis reference position after transfer (900)
fmt "U" 3 stck_chuk_end_dx$      #Destination chuck X axis reference position after transfer (900)
fmt "Z" 2 stck_clear$            #Stock clearance value for stock pull operation (902)
fmt "X" 2 stck_tool_x$           #Tool X axis position for bar stop / puller (902)
fmt "Z" 2 stck_grip$             #Grip length value for stock pull operation(902)

fmt "F" 18 stk_adv_fr           #Used with Lathe Stock Advance (Bar-Feed/Pull) function (NCI 902).
fmt "F" 18 stck_appr_fr$         #Used with Lathe Stock Advance (Bar-Feed/Pull) function (NCI 902)

#Flags
stck_op$         : 0             #0 Stock advance operation method (902)
                                #(0=Push stock,1=Push stock with Use Tool Stop option,2=Pull stock)
stck_spindle$    : 0             #Active spindle with stock to transfer (900-902)
                                #0=Left Spindle,1=Right Spindle
clmp_op$         : 0             #The selected Operation mode: 0=Clamp,1=Un-clamp,2=Re-position (903)
clmp_spindle$    : 0             #Active spindle for clamp/unclamp 0=Left Spindle,1=Right Spindle (903)
tlstck_on$       : 0             #Retract or engage the tailstock (0=Retract,1=Engage) (904)

texte     : 1        # autorise les commentaires

# --------------------------------------------------------------------------
#Postblock Section -comments only!
# --------------------------------------------------------------------------
pstck_trans$     #NCI code = 900 available variables:
                #if (miscops_mr1 = 0) | (miscops_mr2 = 0), "MANQUE LES INFOS DE TRANSPHERE SUR PARAM OPTIONNEL, exitpost
                #n, stck_spindle, stck_init_z, stck_final_z, e
                #n, stck_chuk_st_z, stck_chuk_st_x, e
                #n, stck_chuk_end_z, stck_chuk_end_x, e
                #n, stck_chuk_st_dz, stck_chuk_st_dx, e
                #n, stck_chuk_end_dz, stck_chuk_end_dx, e


                if debut_broche = 1,    #****TRANSFERT DE PIECE SEUL
                    [
                    avance_broche_2 = 1 #0063
                    pcan1, pbld, n$, "M98 P1", e$
                    pret_om
                    z_serrage = stck_chuk_end_dz$ + stck_final_z$ + 2
                    pcan1, pbld, n$, "(DEBUT TRANSFERT DE PIECE)", e$
                    pcan1, pbld, n$, "M09", e$
                    pcan1, pbld, n$, "M98 P1", e$
                    pcan1, pbld, n$, "M00", e$
                    pcan1, pbld, n$, "G99G18M26", e$
                    pcan1, pbld, n$, "M21 (OUVERTURE BROCHE2)", e$
                    pcan1, pbld, n$, *toolno, "D1", e$
                    pcan1, pbld, n$, "M98 P1", e$
                    #pcan1, pbld, n$, "G0Z0", e$
                    #pcan1, pbld, n$, "M51 (SOUFFLAGE BROCHE 1)", e$
                    pcan1, pbld, n$, "M81 (SOUFFLAGE BROCHE 2)", e$
                    pcan1, pbld, n$, "G97S200M3", e$    #speed,
                    pcan1, pbld, n$, "M58 (SYNCHRO BROCHES ON)", e$
                    pcan1, pbld, n$, "G0G54A5", e$
                    pcan1, pbld, n$, "G4X3", e$
                    pcan1, pbld, n$, "G1A", z_serrage, "G98F200", e$
                    #pcan1, pbld, n$, "M59 (ARRET SOUFFLAGE BROCHE 1)", e$
                    pcan1, pbld, n$, "M80 (ARRET SOUFFLAGE BROCHE 2)", e$
                    pcan1, pbld, n$, "M20 (FERMETURE BROCHE 2)", e$
                    pcan1, pbld, n$, "G4X1", e$
                    pcan1, pbld, n$, "M11 (OUVERTURE BROCHE 1)", e$
                    pcan1, pbld, n$, "G4X1", e$
                    #pcan1, pbld, n$, "G97M3S0 (DEBUT TEST RUPTURE TRONCONNEUR)", e$
                    #pcan1, pbld, n$, "M57 (SYNCHRO. BROCHES OFF)", e$
                    pcan1, pbld, n$, "G55", e$
                    pcan1, pbld, n$, "G28A0", e$
                    pcan1, pbld, n$, "M5", e$
                    pcan1, pbld, n$, "M57 (SYNCHRO. BROCHES OFF)", e$    # annul. synch. broches M34/M35
                    #pcan1, pbld, n, "G53Z-230.", e
                    pcan1, pbld, n$, "G99", e$
                    pcan1, pbld, n$, "(FIN TRANSFERT)", e$

                    if stck_spindle$ = 0, transfert = 1  #"(Xfer Part from Broche Gauche)", e
                    #if stck_spindle = 1, "(Xfer Part from Broche droite)", e
                    ]
                    else,
                    [   #****TRANSFERT EN DEPLACEMENT DE LA PIECE
                    if troncon = 0, #0063 sans le tronconnage
                        [
                        avance_broche_2 = 1 #0063
                        pcan1, pbld, n$, "()", e$
                        #pcan1, pbld, n$, "(DEBUT DEPLACEMENT DE PIECE)", e$
                        pcan1, pbld, n$, "(MOUVEMENT BROCHE 2)", e$
                        pcan1, pbld, n$, "M11 (OUVERTURE BROCHE 1)", e$
                        pcan1, pbld, n$, "G4X1.", e$
                        pcan1, pbld, n$, "G1", *stck_final_z, "F0.5", e$
                        pcan1, pbld, n$, "G4X1.", e$
                        pcan1, pbld, n$, "M10 (FERMETURE BROCHE 1)", e$
                        pcan1, pbld, n$, "G4X1.", e$
                        #pcan1, pbld, n$, "(FIN DEPLACEMENT DE PIECE)", e$
                        pcan1, pbld, n$, "()", e$
                        ]
                    if troncon = 1, #0063 après le tronconnage
                        [
                        avance_broche_2 = 1 #0063
                        pcan1, pbld, n$, "()", e$
                        #pcan1, pbld, n$, "(DEBUT RETOUR OM BROCHE 2)", e$
                        #pcan1, pbld, n$, "M83 (TEST D EFFORT DE BROCHE)", e$
                        pcan1, pbld, n$, "M57 (FIN SYNCHRO. BROCHES)", e$
                        pcan1, pbld, n$, "M83(TEST COUPE - FIN TEST)", e$
                        pcan1, pbld, n$, "M3S200 (RUPTURE TETON)", e$
                        pcan1, pbld, n$, "G4X0.5", e$
                        pcan1, pbld, n$, "G28A0(RETOUR O.M. BROCHE 2)", e$
                        pcan1, pbld, n$, "M5", e$
                        #pcan1, pbld, n$, "(FIN RETOUR OM BROCHE 2)", e$
                        ]
                    #pcan1, pbld, n$, "(FIN TRANSFERT)", e$
                    ]
                debut_broche = 0


pstck_flip$      #NCI code = 901 available variables:
                #stck_spindle, stck_init_z, stck_final_z,
                #stck_chuk_st_z, stck_chuk_st_x,
                #stck_chuk_end_z, stck_chuk_end_x
                pcan1, pbld, n$, "G0 G28 U0.", e$
                pcan1, pbld, n$, "G0 G53 Z-173.", e$
                "M00", e$
                "(ARRET POUR ROTATION PIECE)", e$
                "(EMPLACEMENT A MODIFIER)", e$


pstck_bar_fd$    #NCI code = 902 available variables:

                if reglage_pp = 1,
                    [
                    "xxxxxxxxxxxx", e$
                    n$, *stck_spindle$, *stck_init_z$, *stck_final_z$, e$
                    n$, *stck_chuk_st_z$, *stck_chuk_st_x$, e$
                    n$, *stck_chuk_end_z$, *stck_chuk_end_x$, e$
                    n$, *stck_chuk_st_dz$, *stck_chuk_st_dx$, e$
                    n$, *stck_chuk_end_dz$, *stck_chuk_end_dx$, e$
                    *stck_grip$, *stck_init_z$, stck_final_z$
                    *stck_tool_x$, *stck_op$, *stck_clear$, e$
                    *stck_chuk_st_z$, *stck_chuk_st_x$
                    *stck_chuk_end_z$, *stck_chuk_end_x$, e$
                    "xxxxxxxxxxxx", e$
                    ]

                #op_id$ = 2 pour la butée

                #[
                 # if stck_op$ = 0, "(Push stock -"
                 # if stck_op$ = 1, "(Push stock with Use Tool Stop option -"
                 # if stck_op$ = 2, "(Pull stock -"
                 # if stck_spindle$ = 0, "from Left Spindle)", e$
                 # if stck_spindle$ = 1, "from Right Spindle)", e$
                #]
                z_avant = stck_final_z$             #stck_init_z$
                #z_avant = z_avant + 2.5
                butee = 1

                z_avant = abs(z_avant)
                a_ = stck_init_z$
                a_ = abs(a_)

                pmap_home
                spaces$ = 0
                #A=longueur piece finie
                #B=LARG. TRONCONNAGE
                #C=SUREP. FACE
                #F=ORIGINE G54 G55
                #T=NUM OUTIL BUTEE
                #Z=G53 Z PT CHANGEMENT D OUTIL
                #U=G53 Z PT CHANGEMENT D OUTIL
                #X=POS BUTEE EN X
                #P=CHOIX S/PROG 1=NORMALE 2=ANTI-COLLISION(MOUV. Z ET X)
                #n$, "G65P6002", "A", a_, "B", z_avant, "F54", t$, "Z", "U", stck_chuk_st_x$, e$
                #spaces$ = 1
                #pcan1, pbld, n$, pfxout, pfzout, e$

                #**BON AVEC UN POUSSE BARRE**
                n$, "G0", *stck_final_z$, e$
                n$, "G0", *stck_tool_x$, "Y0", e$
                n$, *stck_init_z$, e$    #z_avant, e$   #*stck_init_z, e
                n$, "M26 (OUVERTURE DES MORS)", e$
                n$, "G4 K.5 (TEMPO)", e$
                n$, "G1 G94", *stck_final_z$, "F1000", e$
                n$, "M27 (FERMETURE DES MORS)", e$
                n$, "G4 K1", e$
                n$, "G95", e$
                n$, "G0 G91 Z10.", e$
                n$, "G90", e$
                n$, "G0 G53 X0", e$
                n$, "G0 G53 Z0", e$
                n$, "M1", e$
                #**

                #n$, "G0 X0", *stck_final_z$, e$
                #n$, "M0", e$
                #n$, "G1 G98", *z_avant, "F1000", e$

                pmap_home   # A mettre pour valider le bloc suivant en tant que retour aux OM
                #pcan1, pbld, n$, "G0 G99", e$   # pfxout, pfzout, e$

pchuck$          #NCI code = 903 available variables:
                if reglage_pp = 1,
                    [
                    "xxxxxxxxxxxx", e$
                    *clmp_spindle$, " = BROCHE DROITE(1) OU GAUCHE(0)", e$
                    *stck_chuk_st_z$, " = Z FIN RECUL  exemple 600MM", e$
                    *stck_chuk_end_z$, " = Z DE PRISE SERRAGE", e$
                    *stck_chuk_st_x$, " = diamètre d'ouverture des mors", e$
                    *stck_chuk_end_x$, " = diamètre de fermeture des mors", e$
                    *clmp_op$, " = The selected Operation mode : 0=Clamp,1=Un-clamp,2=Re-position, 3 Eject stock (added for X5)(903)", e$
                    "xxxxxxxxxxxx", e$
                    ]
                #pret_om
                z_serrage = stck_chuk_end_z$
                x_serrage = stck_chuk_end_x$
                x_serrage = x_serrage *2
                #pcan1, pbld, n$, "(DEBUT BROCHE)", e$

                if clmp_op$ = 0, "(FERMETURE DU MANDRIN) ",e$
                if clmp_op$ = 1, "(OUVERTURE DU MANDRIN) ",e$

                if clmp_op$ = 2,
                    [
                    if debut_broche = 1,
                        [
                        #   pcan1, pbld, n$, "G0", *toolno, e$
                        troncon = 0     #0063
                        avance_broche_2 = 1 #0063
                        pcan1, pbld, n$, "(POSITION BROCHE)",e$
                        if clmp_spindle$ = 1, "(BROCHE DROITE )", e$
                        pcan1, pbld, n$, "M98 P1", e$
                        pcan1, pbld, n$, " ", e$
                        pcan1, pbld, n$, "M09", e$
                        pcan1, pbld, n$, "G99G18M26", e$
                        pcan1, pbld, n$, "G54", e$
                        pcan1, pbld, n$, "M21 (DESSERRAGE BROCHE 2)", e$
                        pcan1, pbld, n$, "M44 (SOUFFLAGE BROCHE 2 ON)", e$
                        #pcan1, pbld, n$, "M251 (SOUFFLAGE BROCHE 2)", e$
                        pcan1, pbld, n$, "G97S200M3", e$    #speed,
                        pcan1, pbld, n$, "M58 (SYNCHRO. BROCHES ON)", e$
                        #pcan1, pbld, n$, "G0G54A", stck_chuk_st_z$, e$    #AFFICHE LE DEPART EN Z
                        pcan1, pbld, n$, "G0G54A", *stck_chuk_end_z$, e$
                        debut_broche = 0
                        ]
                        else,
                        [
                        avance_broche_2 = 1 #0063
                        pcan1, pbld, n$, "G4X1.", e$
                        pcan1, pbld, n$, "(MOUVEMENT POSITION DE SERRAGE)", e$
                        pcan1, pbld, n$, "(SUR LE DIAMETRE - ", *x_serrage, ")", e$
                        pcan1, pbld, n$, "G1A", *stck_chuk_end_z$, "F0.5", e$
                        pcan1, pbld, n$, "G4X2.", e$
                        #pcan1, pbld, n$, "M59 (SOUFLAGE BROCHE 1 OFF)", e$
                        pcan1, pbld, n$, "M45 (SOUFLAGE BROCHE 2 OFF)", e$
                        pcan1, pbld, n$, "M20 (SERRAGE BROCHE 2)", e$
                        ]
                    #debut_broche = 0
                    ]
                if clmp_spindle$ = 0,
                    [
                    n$, "(BROCHE DE GAUCHE )", e$
                    if clmp_op$ = 1, pcan1, pbld, n$, "M11 (DESSERRAGE BROCHE 1)", e$,  pcan1, pbld, n$, "M45 (SOUFFLAGE BROCHE 1 OFF)", e$
                    if clmp_op$ = 0, pcan1, pbld, n$, "M10 (SERRAGE BROCHE 1)", e$,  pcan1, pbld, n$, "M45 (SOUFFLAGE BROCHE 1 OFF)", e$
                    ]
                if clmp_spindle$ = 1,
                    [
                    n$, "(BROCHE DE DROITE )", e$
                    if clmp_op$ = 1, pcan1, pbld, n$, "M21 (DESSERRAGE BROCHE 2)", e$,  pcan1, pbld, n$, "M45 (SOUFFLAGE BROCHE 2 OFF)", e$
                    if clmp_op$ = 0, pcan1, pbld, n$, "M20 (SERRAGE BROCHE 2)", e$,  pcan1, pbld, n$, "M45 (SOUFFLAGE BROCHE 2 OFF)", e$
                    if clmp_op$ = 3, p_ejection_piece
                    ]
                #pcan1, pbld, n$, "(FIN MORS)", e$
                #pcan1, pbld, n$, "M36 (annul. synch. broches)", e$   # annul. synch. broches M34/M35


ptailstock$      #NCI code = 904 available variables:
                #tlstck_on, stck_init_z, stck_final_z
                if tlstck_on$ = 1, pointe = 1    # pour limitation de S avec la pointe
                if tlstck_on$ = 0, pointe = 0
                ret_pointe = 1
                pret_om_pointe
                if tlstck_on$ = 0, "(RECUL POINTE)", e$
                if tlstck_on$ = 0, sm26, e$
                if tlstck_on$ = 1, "(AVANCE POINTE)", e$
                #if tlstck_on$ = 1, "M216 (ACCROCHAGE POINTE)", e$
                if tlstck_on$ = 1, sm25, e$
                pbld, n$, "G4 K1", e$
                m99_pointe = 1


psteadyrest$     #NCI code = 905 available variables:

                "(TIRAGE DU BRUT AVEC UNE PINCE Position Steadyrest)", e$
        pbld, n$, stck_init_z$, e$
        pbld, n$, "MANQUE FONCTION M DE SERRAGE", e$
        pbld, n$, "G4X1", e$
        pbld, n$, "G1G98", stck_final_z$, "F2000", e$
        pbld, n$, "MANQUE FONCTION M DE DESSERRAGE", e$
        pbld, n$, "G4X1", e$
        pbld, n$, "G1G91Z7", e$
        pbld, n$, "G0G90G99", e$

p_ejection_piece

        pbld, n$, "M105 (ARRET BROCHE 2)", e$
        #pbld, n$, "M98P1", e$
        pbld, n$, "(EJECTION PIECE)", e$
        pbld, n$, "G53A0(RETOUR B2 A L ORIGINE)", e$
        pbld, n$, "M17(SORTIE RECUPERATEUR PIECE)", e$
        pbld, n$, "G1G98A-20F3000(APPROCHE EJECTION)", e$
        pbld, n$, "M21 (DESSERRAGE BROCHE 2)", e$,
        pbld, n$, "M45 (SOUFFLAGE BROCHE 2 OFF)", e$
        pbld, n$, "M50(ARROSAGE EJECTEUR ON)", e$
        pbld, n$, "G4X1.(TEMPO)", e$
        pbld, n$, "M21(OUVERTURE B2)", e$
        pbld, n$, "G4X1(TEMPO)", e$
        pbld, n$, "M66(AVANCE EJECTEUR)", e$
        pbld, n$, "G4X1.(TEMPO)", e$
        pbld, n$, "M67(RECUL EJECTEUR)", e$
        pbld, n$, "M18(RECUL RECUPERATEUR PIECE)", e$
        pbld, n$, "M51(ARROSAGE EJECTEUR OFF)", e$
        pbld, n$, "G28A0(RETOUR ORIGINE B2)", e$
        pbld, n$, "G28A0", e$
        pbld, n$, "M97(COMPTEUR PIECE)", e$


pret_om        # pour saut de bloc
        pmap_home   # "pmap_home" pour le type d'origine
        if tool_op$ = 67 & m73 = 1 & avance_broche_2 = 0, pbld, n$, "M74", e$   #0063 OUI SANS LA BROCHE 2
        if tool_op$ = 67 & m73 = 1 & avance_broche_2 = 1, avance_broche_2 = 0   #0063 réinitialise l'avance de broche à 0
        #if fin = 1 & pointe =0 & usinage = 1, pcan1, pbld, n$, "G0", pfxout, pfzout, e$   # tour
        gcode$ = 0
        if pointe =0 & usinage = 1, # tour  #if fin = 1 &
                [
                if y_axis_mch, pret_om_usi_Y
                n$, "G0 G139", e$
                n$, 35, "MCS G0 XP290 ZP292", e$
                ]
        if pointe =0 & usinage = 2,  # fraisage #if fin = 1 &
                [
                if y_axis_mch, pret_om_usi_Y
                if prv_posttype$ = two, pcan1, pbld, n$, "G0 G139", e$, n$, 35, "MCS G0 XP290 ZP292", e$ #"Y0", pfzout, e$   #en fin de tournage et passage au fraisage
                if prv_posttype$ <> two,
                    [
                    pcan1, pbld, n$, "G0 G139", e$, n$, 35, "MCS G0 XP290 ZP292", e$ #  #en fraisage
                    ]
                ]
        if annul_correct = 1, pcan1, pbld, toolno, "D1", e$    #0085 annulation du correcteur
        #if pointe =0, pcan1, pbld, n$, "G0 de pret_om", pfxout, pfzout, e$
        #coolant$ = 0,@coolant$
        pcan1, pbld, n$, "M09", e$
        if M_Zero5_ptlchg = 1, pcan1, pbld, n$, "M05", e$
        if m99_pointe = 1, pbld, n$, "M00", e$
        if m99_pointe = 0, pbld, n$, "M01", e$
        #if transfert = 0, pbld, n$, "/M99P", hold_num, e$ #*hold_t, e$ hold_num
        pbld, n$, " ",e$    #"( )",e$
        m73 = 0
        transfert = 0


pret_om_pointe  # Retour à l'origine avec les 2 broches ou la pointe
        pmap_home
        if pointe =1 & usinage = 1,  # tour #if fin = 1 &
                [
                if y_axis_mch, pret_om_usi_Y
                pcan1, pbld, n$, *sgcode, "G53 X0", e$ # pfxout, pfzout, e$
                pcan1, pbld, n$, *sgcode, "G53 Z0", e$ # pfxout, pfzout, e$
                ]
        if pointe =1 & usinage = 2,  # fraisage #if fin = 1 &
                [
                if y_axis_mch, pret_om_usi_Y
                pcan1, pbld, n$, *sgcode, "G53 X0 Y0", e$ # pfxout, "Y0", pfzout, e$
                pcan1, pbld, n$, *sgcode, "G53 Z0", e$ # pfxout, "Y0", pfzout, e$
                ]
        if annul_correct = 1, pcan1, pbld, *toolno, "D1", e$    #0085 annulation du correcteur
        pbld, n$, " ",e$    #"( )",e$
        #suivant valeurs MC
        #pcan1, pbld, n$, "G0", pfxout, e$
        #pcan1, pbld, n$, pfzout, e$
        m99_pointe = 0

pret_om_usi_Y
        #pcan1, pbld, n$, "G0 G28 U0.", e$
        #pcan1, pbld, n$, "G0 G28 U-5.", e$
        #pcan1, pbld, n$, "G28 V0.", e$


# --------------------------------------------------------------------------
# Threading output
# --------------------------------------------------------------------------
pthread0$        #Pre-thread calculations
      perreurPas_fil    #0200 #0008
      # Calculate taper delta 'X' on Acceleration Clearance distance
      thdrdlt = (((thdx2$ - thdx3$) / (thdz1$ - thdz2$)) * thdzclr$)
      # Add to the original thread 'X' difference calculation
      thdrdlt = (thdrdlt + (thdx2$ - thdx3$)) * pl_ax_m0x
      thdang = rad2deg$ * thdangle$
      thd_dirx = (thdx2$ - thdx3$) * pl_ax_m0x
      thd_dirz = (thdz1$ - thdz2$) * pl_ax_m0z
      thd_vlen = thdlead$/ nstarts$
      thd_dirx = vsa (thd_vlen, thd_dirx)
      if fr_pos$, pthreadpull
      else, thdpull = zero

pthreadpull     #Pre-thread calculations
      if thdpulloff$/(fr_pos$*10) > 0.99,thdpull = 99
      else, thdpull = (thdpulloff$/(fr_pos$*10))*100


pthdext$         #Calculation override for external thread
      #thddepth = thdlead * .61343         #Calc. thread depth
      #thdflat  = thdlead * .1667          #Calc. thread flat

pthdint$         #Calculation override for internal thread
      #thddepth = thdlead * .54127         #Calc. thread depth
      #thdflat  = thdlead * .125           #Calc. thread flat

pthdface$        #Calculation override for face thread
      #thddepth = thdlead * .61343         #Calc. thread depth
      #thdflat  = thdlead * .1667          #Calc. thread flat

pthrg32_1$       #G32 threading first
      comment$
      gcode$ = zero
      lrapid$

pthrg32_2$       #G32 threading second
      gcode$ = zero
      lrapid$

pthrg32_3$       #G32 threading third
      copy_x = vequ(x$)
      pcom_moveb
      pcan1, pbld, n$, sgfeed, *sthdgcode, pxout, pyout, pfzout_filet, pcout, pffr,
      strcantext, e$     #0003 pzout,
      pcom_movea
      prv_gcode$ = m_one

pthrg32_4$       #G32 threading fourth
      gcode$ = zero
      lrapid$

pthrg92_1$       #G92 threading
      if thdpass$ = one, pthrg92_11

pthrg92_11      #G92 threading
      comment$
      gcode$ = zero
      lrapid$
      prv_feed = m_one
      prv_zabs = c9k
      prv_thdtype$ = m_one

pthrg92_2$       #G92 threading

pthrg92_3$       #G92 threading
      copy_x = vequ (x$)
      pcom_moveb
      pcan1, pbld, n$, sgfeed, sthdgcode, pxout, pyout, pfzout_filet, pcout,
        [if thdrdlt & thdpass$ = one, *thdrdlt], pfr, strcantext, e$ #0003 pzout,
      pcom_movea
      prv_gcode$ = m_one

pthrg92_4$       #G92 threading

pg32e$           #G32/G92 threading end
      gcode$ = zero
      lrapid$

pthrg76_1$       #G76 threading start point
      gcode$ = zero
      #0058 lrapid$

pg76$            #G76 threading
      comment$
      gcode$ = zero
      #0058 lrapid$
      sav_xa = vequ(copy_x)
      if thdface$ = zero, copy_x = thdx2$
      else, copy_z = thdx2$
      if thdface$ = zero, copy_z = thdz2$
      else, copy_x = thdz2$
      pcom_moveb
      nstart_cnt = zero
      while nstart_cnt < nstarts$, pg76nstart
      pcom_movea
      prv_gcode$ =  -1
      copy_x = vequ(sav_xa)
      copy_x = copy_x + (thd_dirx * (nstarts$ - one))
      copy_z = copy_z + (thd_dirz * (nstarts$ - one))
      pcom_moveb
      pe_inc_calc
      !gcode$, !xabs, !yabs, !zabs, !xinc, !yinc, !zinc
      #thddepth$ = thddepth$ / 10    #0011
      #thdfirst$ = thdfirst$ / 10    #0011

pg76nstart      #G76 threading, for multiple starts
      if old_new_sw = zero, pg76old
      else, pg76new
      nstart_cnt = nstart_cnt + one
      if nstarts$ <> one & nstart_cnt <> nstarts$,
      pbld, n$, *sgcode, thd_dirx, thd_dirz, e$


pg76old         #G76 threading old style
      pbld, n$, *sthdgcode, pfxout, pfzout, *thdrdlt, *thddepth$,
        *thdfirst$, *thdang, pffr, e$

pg76new         #G76 threading new style
        thddepth_ = thddepth$
        thdfirst_ = thdfirst$
        #thdfinish$ = 50/1000
        #thdfinish$ = thdfinish$ /10

        #thdang = 0  #thdang * 2 # pour forcer l'affichage a 00°, annulation du calcul
        #pbld, n$, *sthdgcode, *nspring$, *thdpull, *thdang, *thdlast$, *thdfinish$, e$   #  *thdfinish$=Q50,  "Q0.01",
        #pbld, n$, *sthdgcode, pfxout, [if thdrdlt =0, pfzout_filet, else, pfzout], *thddepth_, *thdfirst_,
        #*thdrdlt, pffr, e$   #0003 pfzout --------- si filetage conique afficher le Z de MC autrement Z avec la garde de 0.2

        n$, "(G86 FILETAGE)", e$
        n$, "(TYPE: ", [if old_X < x_debut_fil, "INTER", else, "EXTER"], ")", e$
        n$, "(X = DEPART)", e$
        n$, "(Z = DEPART)", e$
        n$, "(Q = FIN X -- DIF X SI CONE )", e$
        n$, "(R = FIN Z)", e$
        n$, "(I+ = HAUTEUR FILET EN EXTER)", e$
        n$, "(I- = HAUTEUR FILET EN ENTER)", e$
        n$, "(B = PROFONDEUR PREMIERE PASSE)", e$
        n$, "(L = VALEUR PASSE DE FINITION)", e$
        n$, "(C- = PAS SUIVANT L AXE)", e$
        n$, "(C+ = PAS SUIVANT L ANGLE DU CONE)", e$
        n$, "(E = PROFONDEUR MINI)", e$
        n$, "(J = SORTIE DU FILET - APRES Q.R)", e$
        n$, "(A = ANGLE DU FILET 0 = DROIT)", e$
        n$, "( 0 A 29 = 1 COTE SUIV ANGLE)", e$
        n$, "( 30DEG = 1 COTE)", e$
        n$, "( <0DEG = 2 COTE - ZIGZAG)", e$
        n$, "(V = NOMBRE DE FILETS)", e$
        #n$, "(H = TYPE D ENTREE 0= RADIAL)", e$

        thdrdlt = x_debut_fil + ((thdrdlt * 2) * -1)
        if old_X < x_debut_fil, thddepth_ = thddepth_ * -1

        #pbld, n$, *sthdgcode, *x_debut_fil, *z_debut_fil, *thdrdlt, pfzout_filet,
           # *nspring$, *thdpull, *thdang, *thdlast$, *thdfinish$, *thddepth_, *thdfirst_,   #  *thdfinish$=Q50,  "Q0.01",
           # pffr, e$   #pfxout_fil, [if thdrdlt =0, pfzout_filet, else, pfzout],  0003 pfzout --------- si filetage conique afficher le Z de MC autrement Z avec la garde de 0.2



        pbld, n$, *sthdgcode, *x_debut_fil, *z_debut_fil, *thdrdlt, pfzout_filet,
            *nspring$, *thdang, *thdlast$, *thdfinish$, *thddepth_, *thdfirst_,   #  *thdfinish$=Q50,  "Q0.01",
            pffr, e$   #pfxout_fil, [if thdrdlt =0, pfzout_filet, else, pfzout],  0003 pfzout --------- si filetage conique afficher le Z de MC autrement Z avec la garde de 0.2




pfzout_filet    #0003 ajout pour Z fin du filetage -0.2 -Force l'affichage du Z
      zzabs = zabs
      if spindle_no$ = 1, zzabs = zabs - 0.2    #0055   Broche de gauche
      if spindle_no$ = 0, zzabs = zabs + 0.2    #0055   Broche de droite
      #"**", *spindle_no$, "**", lathtype, "**"
      if absinc$ = zero, *zzabs, !zinc#, thdrdlt = zzabs   #zabs
      else, *zinc, !zzabs


# --------------------------------------------------------------------------
# Lathe canned cycle output
# --------------------------------------------------------------------------
pg71old         #Output G71-G72 canned cycle routines, old style
      pbld, n$, *scclgcode, *ng70s, *ng70e, *xstckcc, *zstckcc,
        *depthcc, pffr, e$

pg71new         #Output G71 canned cycle routines, new style, first
      if gcodecc = 1, result = nwadrs (stru, depthcc)
      else, result = nwadrs (strw, depthcc)
      if tool_op$ = 202 | tool_op$ = 203,                     #0004 ajouté
        [
        if spindle_no$ = 1, clearcc = clearcc * -1
        pbld, n$, "G71", *depthcc, *clearcc, e$
        pbld, n$, "G71", *ng70s, *ng70e, *xstckcc, *zstckcc, pffr, e$
        perreur_surepG71
        ]
        else, pg72new

pg72new         #Output G72 canned cycle routines, new style, first #0004 ajouté
      pbld, n$, "G72", *depthcc, *clearcc, e$
      pbld, n$, "G72", *ng70s, *ng70e, *xstckcc, *zstckcc, pffr, e$

pg73old         #Output G73 canned cycle routines, old style
      pbld, n$, *scclgcode, *ng70s, *ng70e, *g73x, *g73z,
        *xstckcc, *zstckcc, *ncutscc, pffr, e$

pg73new       #Output G73 canned cycle routines, new style, first
      pbld, n$, "G73", *g73x, *g73z, *ncutscc, e$   #*scclgcode,
      pbld, n$, "G73", *ng70s, *ng70e, *xstckcc, *zstckcc, pffr, e$     #*scclgcode,

pg74old         #Output G74-G75 canned cycle routines, old style
      pbld, n$, *scclgcode, pfxout, pfzout, *grvspcc, *grvdpcc,
        *clearcc, pffr, e$

pg74new         #Output G74 canned cycle routines, new style, first
      pbld, n$, "(CYCLE DE DECOUPAGE EN -Z-)", e$
      pbld, n$, "(", *xstck_, *zstck_, ")", e$  #0081
      pbld, n$, "G74",  *clearcc, e$
      pbld, n$, *sgfeed, "G74", pfxout, pfzout, *grvspcc, *grvdpcc, pffr, e$

pg75new         #Output G75 canned cycle routines, new style, first
      pbld, n$, "(CYCLE DE DECOUPAGE EN -X-)", e$
      pbld, n$, "(", *xstck_, *zstck_, ")", e$  #0081
      pbld, n$, "G75", *clearcc, e$
      pbld, n$, *sgfeed, "G75", pfxout, pfzout, *grvspcc, *grvdpcc, pffr, e$

prcc_setup$      #Lathe canned cycle setup
                #Capture values from rough
      sav_iprcc = c1_ipr_actv
      sav_feedcc = c1_fr_pos
      if orient$ = one|orient$ = two|orient$ = five|orient$ = 6, lccdirx = one
      else, lccdirx = m_one
      if orient$ = one|orient$ = four|orient$ = five|orient$ = 8, lccdirz = one
      else, lccdirz = m_one
      if lathecc > zero, cc_stop_fcc = one
      else, cc_stop_fcc = zero
      #G74/G75
      if lathecc = three,
        [
        lcc_xcst = vequ (copy_x)
        if dopeckcc = zero,
          [
          depthcc = zero
          clearcc = zero
          ]
        if directcc > one,
          [
          gcodecc = four
          grvspcc = stepcc
          grvdpcc = depthcc
          ]
        else,
          [
          gcodecc = five
          grvspcc = depthcc
          grvdpcc = stepcc
          ]
        ]
      else,
        [
        if n1_cc_pos,
          [
          sav_xa = vequ(copy_x)
          #Shift for cutter comp. start position
          copy_x = copy_x + (lcc_move * lccdirx)
          copy_z = copy_z + (lcc_move * lccdirz)
          pcom_moveb
          compok = zero
          lcc_cc_pos = one
          ]
        else, lcc_cc_pos = zero
        ]
      if mi10$ & tool_op$ = 202 | tool_op$ = 203,     #0080 CRF
        [
        crf_xsav1 = x$
        crf_zsav1 = z$
        ]

prcc_call_st$    #Rough canned cycle start
      if tool_op$ <> 208,
        [
        sav_subout = subout$
        sav_omitsq = omitseq$
        omitseq$ = one
        extprg$ = one
        subout$ = three
        prv_gcode$ = m_one #Added (06/25/01)
        ]

prcc_call_end$   #Rough canned cycle end     INTERIEUR DES CYCLES FIXES ET FIN

      #0050 Restore cc_1013 to the value it held prior to the rough  # 1/17/03
      # groove canned cycle. cc_1013 was changed in ptoolend.    # 1/17/03
      if tool_op$ = 208 | tool_op$ = 62, cc_1013$ = sav_cc_1013     # 1/17/03

        nbr_cycles = nbr_cycles + 1 #0006
        fin_cycle = 0           #0033

      if tool_op$ <> 208,
        [
        omitseq$ = sav_omitsq
        #Close the ext file
        result = fclose (sbufname3$)
        #Open the ext file as a buffer
        #Use the size to determine the start and end sequence
        subout$ = sav_subout
        size3 = rbuf(three, zero)
        if omitseq$ = one,
          [
          ng70s = nbr_cycles *100   #0006
          n70s = ng70s  #
          ng70e = ng70s +10     #0006 (n*10) + seqinc #
          n70e = ng70e  #
          ]
        else,
          [
          if old_new_sw = zero, ng70s = (n$*10) + seqinc$
          else, ng70s = (n$*10) + (seqinc$ * two) #
          ng70e = ng70s + (seqinc$ * (size3 - one))  #
          ]
        pwrite_g70
        ]
      #Setup the stock and clearance directions
      g73x = vsub (lcc_xcst,lcc_xcend)
      if old_new_sw = zero, g73x = g73x * pl_ax_m0x
      else, g73x = g73x * dia_mult
      g73z = g73z * pl_ax_m0z
      xstckcc =  xstckcc * dia_mult * lccdirx
      zstckcc =  zstckcc * lccdirz * pl_ax_m0z
      clearcc =  clearcc * lccdirz * pl_ax_m0z
      #Write the cycle definition
      sav_feed = feed
      sav_ipr = ipr_actv$
      feed = sav_feedcc
      ipr_actv$ = sav_iprcc
      if lathecc = three,
        [
        #Setup the previous position for inc. in G74/G75 cycle
        sav_xa = vequ(xabs) #Save the cycle end
        copy_x = vequ(lcc_xcst) #The cycle start raw
        pshft_map_xa
        pxyzcout  ##The cycle start in machine terms
        ps_inc_calc #Recalculate incremental
        pe_inc_calc #Update previous at start
        xabs = vequ(sav_xa) #Restore the cycle end
        ps_inc_calc #Recalculate incremental
        ]
      if old_new_sw = zero,
        [
        if gcodecc = one, pg71new   #0001
        if gcodecc = two, pg72new
        if gcodecc = three, pg73old
        if gcodecc > three, pg74old
        ]
      else,
        [
        if gcodecc = one, pg71new   #0001
        if gcodecc = two, pg72new
        if gcodecc = three, pg73new
        if gcodecc = four, pg74new
        if gcodecc = five, pg75new
        ]
      if lathecc = three,
        [
        #Set the cycle end position at the original start
        copy_x = vequ(lcc_xcst) #The cycle start raw
        pshft_map_xa
        pxyzcout  ##The cycle start in machine terms
        ps_inc_calc #Position at start
        pe_inc_calc #Update previous
        ps_inc_calc #Recalculate incremental
        ]
      feed = sav_feed
      ipr_actv$ = sav_ipr
      if tool_op$ <> 208,
        [
        #Bug2 is off to prevent execution crashes with long strings
        bug2$ = zero
        #Write the cycle profile, sequence are written now
        rc3 = one
        while rc3 <= size3,
          [
          #Write the lathe canned cycle profile
          string3 = rbuf (three, rc3)
          if rc3 = two,
            [
            #Add the finish spindle speed to the first move
            speed = n1_ss
            pbld, *n70s, *string3, e$    #0006   *speed, pbld, *n, *string3, e
            ]
          else,
            [
            if omitseq$ = one & rc3 = size3 + one,
                [
                posi_INTERPO_G2 = strstr(sposi_G2, string3) #0084
                posi_INTERPO_G3 = strstr(sposi_G3, string3)
                perreur_G2_G3_fin_cycle
                pbld, *n70e, *string3, e$  #0006
                ]
            else, pbld, n$, *string3, e$
            fin_cycle = 1   #0033
            ]
          ]
        #Close the buffer
        result = fclose (three)
        #Remove the ext file
        result = remove (sbufname3$)
        bug2$ = sav_bug2
        ]
        if gcodecc < four, perreurFin_cycle #0200 #0033

pfcc_call$       #G70 recall output postblock
      if cc_stop_fcc = zero,
        [
        pread_g70
        if foundcc = zero, result = mprint(sfccerror)
        ]
      no_nc_out$ = zero
      cc_stop_fcc = zero

pread_g70       #Read G70 recall buffer
      foundcc = zero
      size2 = rbuf (two, zero)
      wc2 = one
      while wc2 <= size2 & foundcc = zero,
        [
        fcc_subid = rbuf (two, wc2)
        if fcc_subid = sub_op_id$,
          [
          gcodecc = zero
          ng70s = fcc_ng70s
          ng70e = fcc_ng70e
          pbld, n$, *scclgcode, *ng70s, *ng70e, e$
          foundcc = one
          ]
        ]

pwrite_g70      #0080 Write G70 recall buffer
      fcc_subid = sub_op_id$
      fcc_ng70s = ng70s
      fcc_ng70e = ng70e
      fcc_subid = wbuf (two, rc2)
      if mi10$ & tool_op$ = 202 | tool_op$ = 203,     #CRF
        [
        #Set the crf_flg to indicate that it's a canned rough and finish
        #Must be set after the output of the N (indicator of the end of the shape) so we can replace the Z coordinate at the right time.
        crf_line = sub_op_id$
        crf_xsav1 = wbuf(4,crf_line)
        prv_xabs = c9k
        ]

# --------------------------------------------------------------------------
#Subprogram output
#sub_trnstyp$ - 0=mirror, 1=rotate, 2=scale, 3=translate
#sub_trnmthd$ (mirror) - 0=X axis, 1=Y axis, 2=line
#sub_trnmthd$ (rotate) - 0=tplane, 1=tplane origin only, 2=coordinates
# --------------------------------------------------------------------------
pmiscint$        #Capture the top level absinc for subprograms
      if sub_level$ <= zero, absinc$ = mi2$
      ref_ret = mi3$
      home_type = mi1$  #0049 06/02/05

psub_call_m$     #Call to main level, single tool
      psub_call_trans
      #n$, "(PASSE ", sub_sec_no$, "SUR ", sub_totl_no$, ")", e$
          #  "Subprogram number ", sub_op_id$, e$
          #  "Actual operation ID", sub_grp_id$, e$
          #  "Transform/non-transform indicator", sub_ref_id$, e$
          #  "Iteration counter", sub_sec_no$, e$
          #  "Total number of instances", sub_totl_no$, e$

psub_call_mm$    #Call to main level, multiple tools
      psub_call_trans

psub_call_trans #Translate level calls from toolchange, user
      #Mirror and coordinate rotate subs not allowed with lathe
      if sub_trnstyp$ <> three & posttype$ = two, result = mprint(slthrmerror)
      if (sub_trnstyp$ = one & sub_trnmthd$ = two)
      | sub_trnstyp$ = zero, result = mprint(smilrmerror)
      sav_absinc = absinc$
      pindex
      if home_type > one,
        [
        if sub_mny_t$,
          [
          absinc$ = zero
          pbld, n$, *sgcode, pwcs, pfxout, pfyout, pfzout, pfcout, e$
          pe_inc_calc
          ps_inc_calc
          ]
        ]
      else,
        [
        #if home_type = one, result = mprint(shomeserror)
        else,
          [
          if sub_mny_t$, result = mprint(smny50error)
          ]
        #Apply G50 shift and correct incremental position
        if sub_sec_no$ & sub_trnstyp$ = three,
          [
          sub_trnsx$ = vmap(sub_trnsx$, hmtx1)
          sub_trnsx$ = vscl(m_one, sub_trnsx$)
          sub_trnsx$ = sub_trnsx$ * dia_mult
          sub_trnsy$ = sub_trnsy$ * y_mult
          sub_trnsz$ = sub_trnsz$ * z_mult

          #0074
          if sub_trnsx$ <> 0 & cuttype = one,   # = tournage
            [
            dia_mult2 = dia_mult/2
            sub_trnsx$ = sub_trnsx$ * dia_mult2
            sub_trnsy$ = sub_trnsy$ * y_mult
            sub_trnsz$ = sub_trnsz$ * z_mult
            sub_trnsx_ = sub_trnsz$
            sub_trnsz_ = ((sub_trnsx$ / 2) * -1) - old_sub_trnsz_
            #if (pointe = 0) & (hold_t >0), pret_om #(butee = 0) & (pointe = 0) & (hold_t >0)
            #if (pointe = 1) & (hold_t >0), pret_om_pointe
            pbld, n$, "G10 P1", *sub_trnsx_, *sub_trnsz_, e$
            old_sub_trnsx_ = sub_trnsx_ + old_sub_trnsx_
            old_sub_trnsz_ = sub_trnsz_ + old_sub_trnsz_
            ]

          if cuttype <> one, pbld, n$, "G10", *sub_trnsx$, [if y_axis_mch, *sub_trnsy$],
            *sub_trnsz$, e$     #0074   if cuttype <> one,          *sg50

          prv_xia = vadd(prv_xia, sub_trnsx$)
          ps_inc_calc
          ]
          #0074
        #if toolchng = zero | home_type < two,
          #[
          #pbld, n$, *sgcode, pfxout, pfyout, pfzout, pcout, e$ #pfcout,    retour OM suivant valeur MC machine
          #pe_inc_calc
          #ps_inc_calc
          #]
        ]
      absinc$ = sav_absinc
      result = nwadrs(strp, main_prg_no$)
      main_prg_no$ = main_prg_no$ +1000
      pbld, n$, "M98", *main_prg_no$, e$
      prv_feed = c9k #Force feed in sub

psub_st_m$       #Header in main level
      result = nwadrs(stro, main_prg_no$)
      " ", e$
      *main_prg_no$, "(", snomprogentete, ")", e$
      spaces$ = 0
      n$, "(ET DU ", smcname$, ")", e$
      n$, "(", strtool$, ")", e$
      spaces$ = 1

psub_end_m$      #End in main level
      n$, "M99", e$

psub_call_s$     #Call to sub level
      if tool_op$ = 201,  pread_g70
      else, foundcc = zero

      if foundcc = zero,
        [
        if sub_trnstyp$ <> 3, sub_level$ =  -1
        else,
          [
          result = nwadrs(strp, sub_prg_no$)
          sub_prg_no$ = sub_prg_no$ + 1000 #Add sub number offset
          pbld, n$, "M98", *sub_prg_no$, e$
          ]
        ]

psub_st_s$       #Header in sub leveln
      result = nwadrs(stro, sub_prg_no$)
      " ", e$
      *sub_prg_no$, e$

psub_end_s$      #End in sub level
      n$, "M99", e$

pannul_trans_inc    #0074 annulation des décalages
    if sub_trnsx_ | sub_trnsz_ <> 0,
        [
        old_sub_trnsx_ = old_sub_trnsx_ * -1
        old_sub_trnsz_ = old_sub_trnsz_ * -1
        pbld, n$, "G10 P1", *old_sub_trnsx_, *old_sub_trnsz_, e$
        sub_trnsx_ =0, sub_trnsz_ = 0
        ]

# --------------------------------------------------------------------------
# Canned Text
#0049 --------------------------------------------------------------------------
pcan            #Canned text - before output call   AVANT
      strcantext = sblank
      if cant_no$ > zero,
        [
        if cant_pos1$ = zero | cant_pos1$ = three, pcant_1
        if cant_pos2$ = zero | cant_pos2$ = three, pcant_2
        if cant_pos3$ = zero | cant_pos3$ = three, pcant_3
        if cant_pos4$ = zero | cant_pos4$ = three, pcant_4
        if cant_pos5$ = zero | cant_pos5$ = three, pcant_5
        if cant_pos6$ = zero | cant_pos6$ = three, pcant_6
        if cant_pos7$ = zero | cant_pos7$ = three, pcant_7
        if cant_pos8$ = zero | cant_pos8$ = three, pcant_8
        if cant_pos9$ = zero | cant_pos9$ = three, pcant_9
        if cant_pos10$ = zero | cant_pos10$ = three, pcant_10
        if cant_pos11$ = zero | cant_pos11$ = three, pcant_11
        if cant_pos12$ = zero | cant_pos12$ = three, pcant_12
        if cant_pos13$ = zero | cant_pos13$ = three, pcant_13
        if cant_pos14$ = zero | cant_pos14$ = three, pcant_14
        if cant_pos15$ = zero | cant_pos15$ = three, pcant_15
        if cant_pos16$ = zero | cant_pos16$ = three, pcant_16
        if cant_pos17$ = zero | cant_pos17$ = three, pcant_17
        if cant_pos18$ = zero | cant_pos18$ = three, pcant_18
        if cant_pos19$ = zero | cant_pos19$ = three, pcant_19
        if cant_pos20$ = zero | cant_pos20$ = three, pcant_20
        pbld, n$, strcantext, e$
        strcantext = sblank
        ]

pcan1           #Canned text - with move    PENDANT
      strcantext = sblank
      if cant_no$ > zero,
        [
        if cant_pos1$ = one | cant_pos1$ = four, pcant_1
        if cant_pos2$ = one | cant_pos2$ = four, pcant_2
        if cant_pos3$ = one | cant_pos3$ = four, pcant_3
        if cant_pos4$ = one | cant_pos4$ = four, pcant_4
        if cant_pos5$ = one | cant_pos5$ = four, pcant_5
        if cant_pos6$ = one | cant_pos6$ = four, pcant_6
        if cant_pos7$ = one | cant_pos7$ = four, pcant_7
        if cant_pos8$ = one | cant_pos8$ = four, pcant_8
        if cant_pos9$ = one | cant_pos9$ = four, pcant_9
        if cant_pos10$ = one | cant_pos10$ = four, pcant_10
        if cant_pos11$ = one | cant_pos11$ = four, pcant_11
        if cant_pos12$ = one | cant_pos12$ = four, pcant_12
        if cant_pos13$ = one | cant_pos13$ = four, pcant_13
        if cant_pos14$ = one | cant_pos14$ = four, pcant_14
        if cant_pos15$ = one | cant_pos15$ = four, pcant_15
        if cant_pos16$ = one | cant_pos16$ = four, pcant_16
        if cant_pos17$ = one | cant_pos17$ = four, pcant_17
        if cant_pos18$ = one | cant_pos18$ = four, pcant_18
        if cant_pos19$ = one | cant_pos19$ = four, pcant_19
        if cant_pos20$ = one | cant_pos20$ = four, pcant_20
        ]
      if cstop$, strcantext = strcantext + sm00
      if cgstop$, strcantext = strcantext + sm01
      #Output of strcantext occurs at the end of the output line

pcan2           #Canned text - after output call    APRES
      strcantext = sblank
      if cant_no$ > zero,
        [
        if cant_pos1$ = two | cant_pos1$ = five, pcant_1
        if cant_pos2$ = two | cant_pos2$ = five, pcant_2
        if cant_pos3$ = two | cant_pos3$ = five, pcant_3
        if cant_pos4$ = two | cant_pos4$ = five, pcant_4
        if cant_pos5$ = two | cant_pos5$ = five, pcant_5
        if cant_pos6$ = two | cant_pos6$ = five, pcant_6
        if cant_pos7$ = two | cant_pos7$ = five, pcant_7
        if cant_pos8$ = two | cant_pos8$ = five, pcant_8
        if cant_pos9$ = two | cant_pos9$ = five, pcant_9
        if cant_pos10$ = two | cant_pos10$ = five, pcant_10
        if cant_pos11$ = two | cant_pos11$ = five, pcant_11
        if cant_pos12$ = two | cant_pos12$ = five, pcant_12
        if cant_pos13$ = two | cant_pos13$ = five, pcant_13
        if cant_pos14$ = two | cant_pos14$ = five, pcant_14
        if cant_pos15$ = two | cant_pos15$ = five, pcant_15
        if cant_pos16$ = two | cant_pos16$ = five, pcant_16
        if cant_pos17$ = two | cant_pos17$ = five, pcant_17
        if cant_pos18$ = two | cant_pos18$ = five, pcant_18
        if cant_pos19$ = two | cant_pos19$ = five, pcant_19
        if cant_pos20$ = two | cant_pos20$ = five, pcant_20
        pbld, n$, strcantext, e$
        strcantext = sblank
        ]

pcant_1         #Canned text - output call
      cant_pos = cant_pos1$
      cantext$ = cant_val1$
      pcant_out

pcant_2         #Canned text - output call
      cant_pos = cant_pos2$
      cantext$ = cant_val2$
      pcant_out

pcant_3         #Canned text - output call
      cant_pos = cant_pos3$
      cantext$ = cant_val3$
      pcant_out

pcant_4         #Canned text - output call
      cant_pos = cant_pos4$
      cantext$ = cant_val4$
      pcant_out

pcant_5         #Canned text - output call
      cant_pos = cant_pos5$
      cantext$ = cant_val5$
      pcant_out

pcant_6         #Canned text - output call
      cant_pos = cant_pos6$
      cantext$ = cant_val6$
      pcant_out

pcant_7         #Canned text - output call
      cant_pos = cant_pos7$
      cantext$ = cant_val7$
      pcant_out

pcant_8         #Canned text - output call
      cant_pos = cant_pos8$
      cantext$ = cant_val8$
      pcant_out

pcant_9         #Canned text - output call
      cant_pos = cant_pos9$
      cantext$ = cant_val9$
      pcant_out

pcant_10        #Canned text - output call
      cant_pos = cant_pos10$
      cantext$ = cant_val10$
      pcant_out

pcant_11        #Canned text - output call
      cant_pos = cant_pos11$
      cantext$ = cant_val11$
      pcant_out

pcant_12        #Canned text - output call
      cant_pos = cant_pos12$
      cantext$ = cant_val12$
      pcant_out

pcant_13        #Canned text - output call
      cant_pos = cant_pos13$
      cantext$ = cant_val13$
      pcant_out

pcant_14        #Canned text - output call
      cant_pos = cant_pos14$
      cantext$ = cant_val14$
      pcant_out

pcant_15        #Canned text - output call
      cant_pos = cant_pos15$
      cantext$ = cant_val15$
      pcant_out

pcant_16        #Canned text - output call
      cant_pos = cant_pos16$
      cantext$ = cant_val16$
      pcant_out

pcant_17        #Canned text - output call
      cant_pos = cant_pos17$
      cantext$ = cant_val17$
      pcant_out

pcant_18        #Canned text - output call
      cant_pos = cant_pos18$
      cantext$ = cant_val18$
      pcant_out

pcant_19        #Canned text - output call
      cant_pos = cant_pos19$
      cantext$ = cant_val19$
      pcant_out

pcant_20        #Canned text - output call
      cant_pos = cant_pos20$
      cantext$ = cant_val20$
      pcant_out

pcant_out       #Canned text - build the string for output
      #Assign string select type outputs
      if cant_pos < three, #cant_pos indicates canned text output
        [
        #Assign string select global variables
        if cantext$ = 3, bld = one
        if cantext$ = 4, bld = zero
        if cantext$ = 9, exact = one
        if cantext$ = 10, exact = zero
        #Build the cantext string from strings
        if cantext$ = 1, strcantext = strcantext + sm00
        if cantext$ = 2, strcantext = strcantext + sm01
        #Build the cantext string from string selects
        if cantext$ = 5 | cantext$ = 6,
          [
          if cantext$ = 5, tlstk = zero
          else, tlstk = one
          rslt_upd = updstr (stlstk)
          strcantext = strcantext + stlstk
          ]
        if cantext$ = 7 | cantext$ = 8,
          [
          if cantext$ = 7, chute = zero
          else, chute = one
          rslt_upd = updstr (schute)
          strcantext = strcantext + schute
          ]
        #Build the cantext string from cantext number
        if cantext$ > 10,
          [
          strtextno = no2str(cantext$)
          strcantext = strcantext + strm + strtextno
          ]
        ]
      else, #cant_pos indicates coolant output
        [
        coolant_bin = flook (two, cantext$) #Create binary value for each coolant using lookup table
        if frac(cantext$/two),  # coolant off
          [
          if all_cool_off,
            [
            if coolant_on, pbld, n$, sall_cool_off, e$
            coolant_on = zero
            ]
          else,
            [
            if coolant_on > zero,
              [
              coolant_on = coolant_on - coolant_bin/2 #Odd = off command, subtract appropriate binary value.
              coolantx = cantext$ - 50                #Create a coolantx value for string select
              pbld, n$, *scoolantx, e$
              ]
            ]
          ]
        else,                                         #Even = on command
          [   #Determine if this coolant is already on
          local_int = zero
          coolantx = zero
          suppress = zero
          while local_int < 20 & coolant_on > zero,
            [
            result2 = and(2^local_int, coolant_on)
            local_int = local_int + one
            if result2 = coolant_bin, suppress = one
            ]
          if suppress <> 1, #Don't output an on code for a coolant that is already on
            [
            coolant_on = coolant_on + coolant_bin #Maintain binary sum of all coolants currently on
            coolantx = cantext$ - 50              #Create a coolantx value for string select
            if cant_pos = 4, *scoolantx           #Coolant "With"
              else, pbld, n$, *scoolantx, e$      #Coolant "Before" or "After"
            ]
          ]
        ]

# --------------------------------------------------------------------------
# Position calculations, generally these do not need to be modified
# --------------------------------------------------------------------------
#The variables for absolute output are xabs, yabs, zabs.
#The variables for incremental output are xinc, yinc, zinc.
#They are found from the input variables x, y, z (typically) which are
#copied to copy_x, copy_y, copy_z.  These are passed to the mapping routine
#to get raw machine coordinates xa, ya, za.  These are used in pxyxcout to
#get the output xabs, yabs, zabs.  ps_inc_calc is called to get xinc, yinc,
#zinc.  cfeed_x, cfedd_y, cfeed_z are the unshifted positions for feed
#calculations.
# --------------------------------------------------------------------------
pxyzcout      #0091 Perform calls for mapping coordinates and shifts
      pplane_mod
      if cuttype = one, pxyzcout0                   #Turning
      if abs(cuttype) = two                         #Right/Left Face cut
        | cuttype = three, pxyzcout2                #Cross cut
      if cuttype = four, pxyzcout4                  #Y axis substitution
      if cuttype = five, pxyzcout5                  #Multisurf Rotary
      perreur_Axe_c #0046
      perreur_Axe_c2 #0088
      #C axis control modifications
      if posttype$ <> two,
        [
        pcoutrev
        cabs = c_wnd
        if c_axistype > one | millcc,
          [
          pindxcalc
          if c_axistype = three,
            [
            #Check if in tolerance
            cdelta = frac(abs(cabs)/ctable)
            if cdelta > ixtol & cdelta < 1-ixtol,
              result = mprint(sindxerror)
            indx_out = cabs
            ]
          if c_axistype = two, #Signed direction calculation
            [
            #Warn if a move greater than 360
            cdelta_calc = abs(prvc_wnd - c_wnd)
            cdelta_calc = fmtrnd(cdelta_calc)
            if cdelta_calc > 360, result = mprint(ssignerror)
            ]
          ]
        if y_axis = zero,
          [
          if cir_at_zero = one, gcode$ = one #only C is moving
          if cir_at_zero = m_one & (xa < zero | prv_xa < zero), c_ax_flp = one
          else, c_ax_flp = zero
          ]
        if millcc,
          [
          if fmtrnd(cabs) = 360, cabs = zero  #Always try to start at zero
          if abs(cuttype) = two, ppolar_fcyc
          ]
        ]
      pfcalc


pxyzcout0       #0080 Lathe and machine coordinates
      #This portion (tool_op$ = 202/203) is still the roughing cycle,
      #we must replace X and Z at this time (before the spindle call)
      if tool_op$ = 202 | tool_op$ = 203 & gcode$ = 0 & mi10$ & cutpos2$ = 4,     #CRF
        [
        crf_line = fcc_subid
        size4 = rbuf(4,0)
        if crf_line <= size4, crf_xsav2 = rbuf(4,crf_line)
        if cutpos2$ = 4,       #if it's cutpos2$ = 4 (end of path) we want to add the move to the
          [                    #pre canned cycle position but not replace the move from MP
          cfeed_x = crf_xsav2
          cfeed_z = crf_zsav2
          pax_shift
          prapidout
          ]
        if cutpos2$ = 0,       #Cutpos2$ = 0 is before an op, we want to replace the move from MP at this time
          [
          xa = crf_xsav2
          za = crf_zsav2
          ]
        ]
      #This portion (tool_op$ = 201) is now the finishing cycle,
      #we must replace X and Z at this time so Mastercam's coordinates don't override our work
      if tool_op$ = 201 & gcode$ = 0 & mi10$,     #CRF
        [
        crf_line = fcc_subid
        size4 = rbuf(4,0)
        if crf_line <= size4, crf_xsav2 = rbuf(4,crf_line)
        xa = crf_xsav2
        za = crf_zsav2
        ]
      cfeed_x = vequ(xa)
      csav = c$
      pax_shift
      ipr_type = zero

pxyzcout4       #Calculations for Y axis substitution (mapped)
      cfeed_x = xa + (rotdia$/two)
      cfeed_y = zero
      cfeed_z = za
      csav = ya * (360 / (pi$ * rotdia$))
      pax_shift
      if millcc, ipr_type = zero
      else, ipr_type = one

pxyzcout2       #Polar conversion, Cross cut, Right/Left Face cut
      #Drill polar is toolplane drilling toward center
      #if not a coincident axis (Face cut)
      if (y_axis | (opcode$ = three & abs(cuttype) <> two)), pxyzcout0
      else,
        [
        cfeed_x = sqrt(xa^2 + ya^2)
        cfeed_y = zero
        cfeed_z = za
        if opcode$ = three & cuttype = three, csav = c$
        else, csav =  atan2(ya, xa) + c$
        pax_shift
        ipr_type = one
        if not(millcc & abs(cuttype) = two),
          [
          if fmtrnd(xa) = zero & fmtrnd(ya) = zero & opcode$ <> three,
            pnt_at_zero = one
          ]
        ]

pxyzcout5       #Multisurf rotary axis motion
      csav = atan2(vtooly$, vtoolz$)
      axisx$ = vequ(caxisx)
      xa = rotp (-csav, xa)
      cfeed_x = vequ(xa)
      pax_shift
      csav = csav + c$
      ipr_type = one

ppolar_fcyc     #Output values for face, polar conversion cycle
      xabs = (xa + dia_shift) * dia_mult
      yabs = zero
      zabs = (za + z_shift) * z_mult
      cabs = (ya + y_shift) * y_mult
      ipr_type = zero


pax_shift       #Apply multiplier and shift positions, csav was recalculated
      xabs = (cfeed_x + dia_shift) * dia_mult
      yabs = (cfeed_y + y_shift) * y_mult
      zabs = (cfeed_z + z_shift) * z_mult
      #Apply axis shift for lower turrets
      if posttype$ <> two & (lathtype = zero | lathtype = two),
        csav = csav + c_shift
      if posttype$ = two,
        [
        yabs = zero
        csav = zero
        ]

pplane_mod    #Modify the multiplier based on plane, see psw_str_mult
      if plane$ = zero,
        [
        dia_mult = prv_dia_mult * pl_ax_m0x
        y_mult = prv_y_mult * pl_ax_m0y
        z_mult = prv_z_mult * pl_ax_m0z
        ]
      else,
        [
        if plane$ = one,
          [
          dia_mult = prv_dia_mult * pl_ax_m1x
          y_mult = prv_y_mult * pl_ax_m1y
          z_mult = prv_z_mult * pl_ax_m1z
          ]
        else, #plane = two
          [
          dia_mult = prv_dia_mult * pl_ax_m2x
          y_mult = prv_y_mult * pl_ax_m2y
          z_mult = prv_z_mult * pl_ax_m2z
          ]
        ]

pcoutrev        #0091 Rotary axis revolution calculation (Modify for wind-up)
      if cir_at_zero = one,
        [
        #Arcs at center position the c axis
        if cuttype = -2 | cuttype = three,
        csav = czero_csav - sweep$
        else, csav = czero_csav + sweep$
        czero_csav = csav
        ]
      #C does not move going to CL
      if pnt_at_zero, csav = prv_csav
      cdelta = fmtrnd(csav) - prv_csav  #This calculates once, for rev
      if cuttype = four & toolchng = zero & toolchng0 = zero & (c_axistype = two | c_axistype = four),  #Axis sub and signed direction or shortest direction
        [
        cdelta_calc = abs(cdelta)
        cdelta_calc = fmtrnd(cdelta_calc)
        if cdelta_calc > 360,  #Break rotary motion
          [
          #rev_brkflag = one  #Break every 90 or 360 degrees (see plin0$)
          redo_proc$  #Reprocess NCI line
          ]
        ]
      while abs(cdelta) > ctol, #If motion exceeds ctol, add wind-up
        [
        if cdelta > zero,
          [
          rev = rev - one
          cdelta = cdelta - 360
          ]
        else,
          [
          rev = rev + one
          cdelta = cdelta + 360
          ]
        ]
      if cuttype <> four, c_wnd = rev * 360 + csav
      else, c_wnd = sav_rev * 360 + csav
      !csav
      @c_wnd
      #Now switch to c_wnd which is the absolute winding C calculation
      #Modify for shortest direction if toolchange or toolplane
      #but not with axis subs
      if c_axistype <> three,
        [
        if abs(prvc_wnd - c_wnd) > 180
          & (toolchng | (y_axis & cuttype < four)),
          [
          while abs(prvc_wnd - c_wnd) > 180,
            [
            if prvc_wnd > c_wnd, rev = rev + one
            else, rev = rev - one
            c_wnd = rev * 360 + csav
            ]
          @c_wnd
          ]
        ]

pindxcalc       #Index move calculations, direction is shortest exc. Asub
      if pnt_at_zero | cdelta = zero, indx_mc = prv_indx_mc
      else,
        [
        cdelta = fmtrnd(c_wnd) - prvc_wnd
        if cuttype = four, #Just look at the direction
          [
          if cdelta >= zero, indx_mc = one
          else, indx_mc = zero
          ]
        else,
          [
          #Phase shift delta 10 revolutions, check odd/even for direction
          if frac(int((cdelta + 3600)/180)/two), indx_mc = zero
          else, indx_mc = one
          ]
        ]
      #Set range 0-360
      while cabs < zero, cabs = cabs + 360
      while cabs > 360, cabs = cabs - 360

pfcalc          #Feedrate calculations, gcode 0 does not evaluate
      if abs(c_wnd-prvc_wnd)<vtol$ | c_axistype=three | drillcur$
      | ipr_type=zero | prv_pnt_at_zero | gcode$ = zero, pfcalc_u_min
      else, pfclc_deg_inv

pfcalc_u_min    #Feedrate unit/min
      feed = fr_pos$
      if feed > maxfeedpm, feed = maxfeedpm
      prvfrdeg = feed

pfclc_deg_inv   #Feedrate deg/min, xa and ya are assumed relative to origin
      #Average last radius to current radius
      ldelta = ((cfeed_x+prv_cfeed_x)/two)^two+((cfeed_y+prv_cfeed_y)/two)^two
      circum = sqrt(ldelta) * two * pi$
      if circum = zero, circum = c9k          #Don't allow Zero
      ldelta = (cfeed_x-prv_cfeed_x)^two+(cfeed_y-prv_cfeed_y)^two
      ldelta = sqrt(ldelta+(cfeed_z-prv_cfeed_z)^two)
      cdelta = ((abs(c_wnd - prvc_wnd))/360)*circum
      if ldelta = zero, cldelta = cdelta
      else, cldelta = sqrt(cdelta^two + ldelta^two)
      if cldelta = zero, cldelta = c9k
      #Feedrate deg/min control and calculation
      frdeg = abs(cdelta/cldelta) * abs(fr_pos$ * (360/circum))
      if abs(frdeg - prvfrdeg) > frdegstp | ipr_type <> prv_ipr_type,
        [
        #Control output of frdeg
        prvfrdeg = frdeg
        feed = frdeg
        ]
      if fmtrnd(frdeg) = zero, feed = fr_pos$
      if frdeg > maxfrdeg, feed = fr_pos$   #feed = maxfrdeg    #0089

#Incremental calculations
ps_inc_calc     #Incremental calculations, start
      xia = fmtrnd(xabs)
      yia = fmtrnd(yabs)
      zia = fmtrnd(zabs)
      xinc = vsub (xia, prv_xia)
      if posttype$ <> two, ps_cinc_calc

ps_cinc_calc    #Incremental calculations, start rotary
      cia = fmtrnd(cabs)
      cinc = cia - prv_cia

pe_inc_calc     #Incremental calculations, end
      prvc_wnd = fmtrnd(c_wnd)      #Avoid updating until called explicitly
      !cfeed_x, !cfeed_y, !cfeed_z, !ipr_type  #These are used in pxyzcout
      !x$, !y$, !z$, !xa, !ya, !za
      !xia, !yia, !zia, !cia
      !cc_pos$, !cutpos2$     ### 0042 01/23/04

# --------------------------------------------------------------------------
# Mapping routines, maps input to basic machine coordinates (side view)
# --------------------------------------------------------------------------
pmatrix_su      #Setup mapping matrix
      hmtx1 = matt(m1$)
      hmtx1 = mmul(hmtx1, smtx1)
      if cuttype = one, mmtx1 = matt(m1$)
      if cuttype = two, mmtx1 = matt(smtx1)
      if cuttype =  -2,mmtx1 = matt(bmtx1)
      if cuttype = three | cuttype = five, mmtx1 = matt(cmtx1)
      if cuttype = four, mmtx1 = matt(amtx1)
      mmtx1 = mmul(mmtx1, smtx1)

pshft_map_xc    #Remove workshift and map to lathe coordinates, center
      xca = vadd (xc$, tox$)  #Always shift to origin
      if plane$ = one,
        [
        result = xca
        xca = zca
        zca = yca
        yca = result
        ]
      if plane$ = two,
        [
        result = yca
        yca = zca
        zca = result
        ]
      xca = vmap (xca, mmtx1)

pshft_map_ijk    #Remove workshift and map to lathe coordinates, ijk
      if arctype$ = one, #Absolute is shifted
        [
        if wcs_origin, iout = vadd (i$, tox$)
        else, iout = vequ (i$)
        ]
      else, iout = vequ (i$)
      iout = vmap (iout, mmtx1)

pshft_map_xa     #Remove workshift and map to lathe coordinates, xyz
      if wcs_origin, xa = vadd (copy_x, tox$)
      else, xa = vequ (copy_x)
      xa = vmap (xa, mmtx1)

pmap_home     #Set the location for home position
      xa = vequ(xh$)
      if map_home,
        [
        if wcs_origin, xa = vadd(xa, tox$)
        xa = vmap(xa, hmtx1)
        ]
      pplane_mod
      pxyzcout0 #basic toolplane positioning

pmap_plane    #Map NCI plane to machine plane
      mach_plane = plane$
      #Cross
      if cuttype=3 & plane$<two, mach_plane = abs(plane$ - one)
      #Top
      if (abs(cuttype)<=one | abs(cuttype)>=4),
      mach_plane = plane$ - one
      if mach_plane = m_one, mach_plane = two

# --------------------------------------------------------------------------
# NCI file pre-read look ahead routines
# Build the toolchange buffer, sets cycle and turret flags
# --------------------------------------------------------------------------
pwrttparam$      #Information from parameters
        #"pwrttparam", ~prmcode$, ~sparameter$, e$
      if opcode$ = 104, result = fprm (opcode$)
      #GCODE 1013   #opcode$ 101:   Rough       ébauche
                    #opcode$ 102:   Finish
                    #opcode$ 103:   Gorge
                    #opcode$ 104:   Thread
                    #opcode$ 105:   Drill
                    #opcode$ 106:   Point.
                    #opcode$ 109:   Butée.

pwrtt$           #Buffer toolchange information, tooltable = 3 calls on 1003
      if gcode$ = 1001, psetup
      pcut_cctyp
      if opcode$=104 | opcode$=105 | opcode$=three | opcode$=16, cc_pos$ = zero
      if gcode$ <> 1001, plast_recd
      pcur_recd
      if gcode$ <> 1003, cc_pos$ = zero
      !opcode$, !tool_op$
      #if gcode$ = 1003,
        #[
        #size1 = rbuf (one, zero)
        #rc1 = one
        #if rc1 < size1, preadcur_nxt
        #if cc_1013$ = zero, cc_pos$ = zero
        #]

#pwrtt      #  Liste outils
        #if texte = 0, ex
        strtool$ = ucase (strtool$)
        spaces$ =1
        if t$ > 0 & cuttyp$ <= 1,
            [
            long_stinsert2 = strlen(stinsert2)
            n$, "(", t$, strtool$, [if long_stinsert2 > 6, stinsert2], [if tcr$ >0, tcr$], ")", e$    #stinsert,
            ]
        if t$ > 0 & cuttyp$ > 1, n$, "(", t$, strtool$, tldia$, p_aff_orient_t_fr, ")", e$
        t$ = 0
        spaces$ = 0

p_aff_orient_t_fr   #0073 affichage automatiquement "RADIAL" ou "AXIAL"
        if cuttype = 3 | cuttype = 0, " RADIAL"                          # "RADIAL" verticale
        if cuttype = 2 & (lathtype = 0 | lathtype = 1), " AXIAL"         # "AXIAL" Horizontale vers la gauche
        if cuttype = -2 & (lathtype = 2 | lathtype = 3), " AXIAL"        # "AXIAL" Horizontale vers la droite


pcur_recd       #Write to the current tool record
      c1_gcode = gcode$
      pmatrix_su
      pset_turret
      pmap_home
      c1_xh = vequ(xabs)
      c1_tox = vmap (tox$, mmtx1)
      c1_cc_pos = cc_pos$
      if gcode$ <> 1003, c1_tool = abs(t$)
      else, c1_tool = zero
      c1_tloffno = tloffno$
      c1_maxss = maxss$
      c1_ss = abs(ss$)
      if cool_w_spd = zero, c1_spdir = spdir$ + one
      else, c1_spdir = (spdir$ + one) + (fsg2(coolant$) * three)
      c1_css_actv = css_actv$
      c1_fr_pos = fr_pos$
      c1_ipr_actv = ipr_actv$
      c1_coolant = coolant$
      c1_nextdc = nextdc$
      c1_posttype = posttype$
      c1_cuttype = cuttype
      c1_lathtype = lathtype
      c1_gcodecc = gcodecc
      c1_lathecc = lathecc
      c1_millcc = millcc
      c1_y_axis = y_axis
      if opcode$ = 104,
        [
        if face_thd <> two, x_min$ = abs(xmaj_thd)
        else,
          [
          if abs(zstrt_thd) > abs(zend_thd), x_min$ = abs(zstrt_thd)
          else, x_min$ = abs(zend_thd)
          ]
        x_max$ = x_min$
        ]
      c1_gcode = wbuf (one, wc1)

plast_recd      #Update the last record(s) for min-max and point
      rc1 = wc1 - one
      c1_gcode = rbuf (one, rc1)
      if prv_opcode$ <> 104,
        [
        c1_x_min = x_min$
        c1_x_max = x_max$
        ]
      rc1 = wc1 - one               #rc1 is used to write also
      c1_gcode = wbuf (one, rc1)

pcut_cctyp      #Find the type of cut for the tool buffer
                #y_axis
                #posttype
                #cuttype
                #lathtype
      y_axis = zero
      cuttype = zero
      if posttype$ = two, cuttype = one
      else,
        [
        if mill5$, cuttype = five
        else,
          [
          if rotary_type$ = one, cuttype = four
          else,
            [
            @m1$, @m2$, @m3$, @m7$, @m8$, @m9$
            if m7$ = m_one & m8$ = zero & m9$ = zero, cuttype =  -2
            if m7$ = one & m8$ = zero & m9$ = zero, cuttype = two
            if m1$ = m_one & m2$ = zero & m3$ = zero, cuttype = three
            if rotary_type$ = three, y_axis = one
            ]
          ]
        ]
      lathtype = lturret$ + spindle_no$ * two
      #Check for errors
      if rotary_type$,
        [
        if (abs(cuttype) = two & rotary_axis$ <> three)
        | (cuttype = three & rotary_axis$ <> one),
          result = mprint(saxiserror)
        if cuttype = four & tlplnno$ <> one, result = mprint(stoperror)
        ]
      else,
        [
        if cuttype = zero, result = mprint(scutterror)
        ]
      #gcodecc, determine G74/G75 direction during processing
      #lathecc
      #millcc
      gcodecc = zero
      lathecc = zero
      if tool_op$ > 201,
        [
        if tool_op$ = 202 | tool_op$ = 203,
          [
          gcodecc = one
          lathecc = one
          if tool_op$ = 203, lathecc = m_one
          ]
        else,
          [
          if tool_op$ = 204 | tool_op$ = 205,
            [
            gcodecc = two
            lathecc = one
            if tool_op$ = 205, lathecc = m_one
            ]
          else,
            [
            if tool_op$ = 206 | tool_op$ = 207,
              [
              gcodecc = three
              lathecc = two
              if tool_op$ = 207, lathecc =  -2
              ]
            else,
              [
              if tool_op$ = 208,
                [
                gcodecc = four
                lathecc = three
                ]
              ]
            ]
          ]
        ]
      if mi4$ <> zero & opcode$ <> three & (cuttype=four | abs(cuttype)=two),
         millcc = mi4$
      else, millcc = zero

psetup          #Setup post based on NCI settings
      home_type = mi1$
      sbufname3$ = spathnci$ + snamenci$ + sextext$
      spathext$ = spathnci$
      snameext$ = snamenci$
      #Set metric defaults
      if met_tool$ = one,
        [
        conversion = 1000
        ltol$ = ltol_m
        vtol$ = vtol_m
        maxfeedpm = maxfeedpm_m
        lcc_move = lcc_move_m
        ]

      #Setup for old or new style canned cycles
      if old_new_sw = one,
        [
        result = newfs (16, thddepth$)
        result = newfs (16, thdfirst$)
        ]
      else,
        [
        result = nwadrs (stra, thdang)
        result = nwadrs (stri, thdrdlt)
        result = nwadrs (strk, thddepth$)
        result = nwadrs (strd, thdfirst$)
        #Lathe canned cycle old style conversion
        result = nwadrs (strd, depthcc)
        result = nwadrs (strd, ncutscc)
        result = nwadrs (stri, g73x)
        result = nwadrs (strk, g73z)
        result = nwadrs (stri, grvspcc)
        result = nwadrs (strk, grvdpcc)
        ]
      #Setup for arctype setting
      if arctype$ = one | arctype$ = four,
        [
        result = newfs(two, i$)
        result = newfs(two, j$)
        result = newfs(two, k$)
        result = newfs(two, iout)
        result = newfs(two, jout)
        result = newfs(two, kout)
        ]
      else,
        [
        result = newfs(three, i$)
        result = newfs(three, j$)
        result = newfs(three, k$)
        result = newfs(three, iout)
        result = newfs(three, jout)
        result = newfs(three, kout)
        ]
      result = nwadrs(str_cax_abs, cabs)
      result = nwadrs(str_cax_inc, cinc)
      result = nwadrs(str_index, indx_out)
      sc_minus = str_cax_abs + sc_minus

# --------------------------------------------------------------------------
# Turret and cut type change setup, do not edit
# --------------------------------------------------------------------------
pset_turret     #Set the machine conditions and mapping based on the turret
      if lathtype = one | use_only_tl, pltype1
      else,
        [
        if lathtype = zero, pltype0
        else,
          [
          if lathtype = two, pltype2
          else, pltype3
          ]
        ]
      psw_str_mult

pltype0         #Bottom turret/Left spindle
      if cuttype = one,
        [
        #Lathe
        #0060 pcuttypldrl
        max_speed = max_speedl0
        min_speed = min_speedl0
        sw_string = scase_bl_c1
        ]
      else,
        [
        #Mill
        #0060 pcuttypmdrl
        max_speed = max_speedm0
        min_speed = min_speedm0
        sw_string = scase_bl_c2 #case two is the default
        if cuttype =  -2,sw_string = scase_bl_c_2
        if cuttype = three, sw_string = scase_bl_c3
        if cuttype = four & abs(c1_millcc) = one, sw_string = scase_bl_c4c
        if cuttype = four & c1_millcc = zero, sw_string = scase_bl_c4
        if cuttype = five, sw_string = scase_bl_c5
        ]

pltype1         #Top turret/Left spindle
      if cuttype = one,
        [
        #Lathe
        #0060 pcuttypldrl
        max_speed = max_speedl1
        min_speed = min_speedl1
        sw_string = scase_tl_c1
        ]
      else,
        [
        #Mill
        #0060 pcuttypmdrl
        max_speed = max_speedm1
        min_speed = min_speedm1
        sw_string = scase_tl_c2 #case two is the default
        if cuttype =  -2,sw_string = scase_tl_c_2
        if cuttype = three, sw_string = scase_tl_c3
        if cuttype = four & abs(c1_millcc) = one, sw_string = scase_tl_c4c
        if cuttype = four & c1_millcc = zero, sw_string = scase_tl_c4
        if cuttype = five, sw_string = scase_tl_c5
        ]

pltype2         #Bottom turret/Right spindle
      if cuttype = one,
        [
        #Lathe
        #0060 pcuttypldrl
        max_speed = max_speedl2
        min_speed = min_speedl2
        sw_string = scase_br_c1
        ]
      else,
        [
        #Mill
        #0060 pcuttypmdrl
        max_speed = max_speedm2
        min_speed = min_speedm2
        sw_string = scase_br_c2 #case two is the default
        if cuttype =  -2, sw_string = scase_br_c_2
        if cuttype = three, sw_string = scase_br_c3
        if cuttype = four & abs(c1_millcc) = one, sw_string = scase_br_c4c
        if cuttype = four & c1_millcc = zero, sw_string = scase_br_c4
        if cuttype = five, sw_string = scase_br_c5
        ]

pltype3         #Top turret/Right spindle
      if cuttype = one,
        [
        #Lathe
        #0060 pcuttypldrl
        max_speed = max_speedl3
        min_speed = min_speedl3
        sw_string = scase_tr_c1
        ]
      else,
        [
        #Mill
        #0060 pcuttypmdrl
        max_speed = max_speedm3
        min_speed = min_speedm3
        sw_string = scase_tr_c2 #case two is the default
        if cuttype =  -2,sw_string = scase_tr_c_2
        if cuttype = three, sw_string = scase_tr_c3
        if cuttype = four & abs(c1_millcc) = one, sw_string = scase_tr_c4c
        if cuttype = four & c1_millcc = zero, sw_string = scase_tr_c4
        if cuttype = five, sw_string = scase_tr_c5
        ]

psw_str_mult    #Apply sw_string to variables and strings
      #c axis type
      c_axistype = plcval (sw_string, 8)
      #reverse spindle
      spd_rev = plcval (sw_string, 7)
      #plane 0
      rslt_plc = plcval (sw_string, 6)
       if rslt_plc = zero,
        [
        sg02 = sxg02
        sg03 = sxg03
        sg41 = sxg41
        sg42 = sxg42
        ]
      else,
        [
        sg02 = sxg03
        sg03 = sxg02
        sg41 = sxg42
        sg42 = sxg41
        ]
      #plane 1
      rslt_plc = plcval (sw_string, five)
      if rslt_plc = zero,
        [
        sg02_1 = sxg02
        sg03_1 = sxg03
        sg41_1 = sxg41
        sg42_1 = sxg42
        ]
      else,
        [
        sg02_1 = sxg03
        sg03_1 = sxg02
        sg41_1 = sxg42
        sg42_1 = sxg41
        ]
      #plane 2
      rslt_plc = plcval (sw_string, four)
      if rslt_plc = zero,
        [
        sg02_2 = sxg02
        sg03_2 = sxg03
        sg41_2 = sxg41
        sg42_2 = sxg42
        ]
      else,
        [
        sg02_2 = sxg03
        sg03_2 = sxg02
        sg41_2 = sxg42
        sg42_2 = sxg41
        ]
      #plane 0
      rslt_plc = plcval (sw_string, three)
      rslt_upd = updstr (swstr)
      sg17 = swstr
      #plane 1
      rslt_plc = plcval (sw_string, two)
      rslt_upd = updstr (swstr)
      sg19 = swstr
      #plane 2
      rslt_plc = plcval (sw_string, one)
      rslt_upd = updstr (swstr)
      sg18 = swstr
      #plane 0, x axis
      rslt_plc = plcval (sw_string, m_one)
      pl_ax_m0x = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -2)
      pl_ax_m0y = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -3)
      pl_ax_m0z = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -4)
      pl_ax_m1x = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -5)
      pl_ax_m1y = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -6)
      pl_ax_m1z = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -7)
      pl_ax_m2x = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -8)
      pl_ax_m2y = -((rslt_plc * two) - one)
      rslt_plc = plcval (sw_string,  -9)
      pl_ax_m2z = -((rslt_plc * two) - one)

#0059**************************************
paramcomp   # Type de correction d'outil
    if info_corr = 1,
        [
        @old_op_id, @old_cc_pos, @old_op_id, @op_id$, @old_cc_computer, @type_comp
            @cc_computer$, @cc_pos$
            if cc_pos$ = 0  & cc_computer$ = 0,   type_comp = 0   #AUCUNE
            if cc_pos$ = 2  & cc_computer$ = 0,   type_comp = 1   #ARMOIRE DROITE
            if cc_pos$ = 1  & cc_computer$ = 0,   type_comp = 2   #ARMOIRE GAUCHE
            if cc_pos$ = 0  & cc_computer$ = 42,  type_comp = 3   #ORDINATEUR DROITE
            if cc_pos$ = 0  & cc_computer$ = 41,  type_comp = 4   #ORDINATEUR GAUCHE
            if cc_pos$ = 2  & cc_computer$ = 42,  type_comp = 5   #USURE + ORDI DROITE
            if cc_pos$ = 1  & cc_computer$ = 41,  type_comp = 6   #USURE + ORDI GAUCHE
            if cc_pos$ = 1  & cc_computer$ = 42,  type_comp = 7   #USURE INVERSE DROITE
            if cc_pos$ = 2  & cc_computer$ = 41,  type_comp = 8   #USURE INVERSE GAUCHE
            if opcode$ = 19, type_comp = 0                      # mis sur aucune à la place d'ordinateur
            if opcode$ <> 3,                # pour ne pas affichier si percage
                [
                if type_comp > 0 & opcode$ <> 105 & cc_computer$ <> old_cc_computer,
                    [
                    spaces$ = 0
                    pbld, n$,  "(", *stype_comp, ")", e$
                    spaces$ = 1
                    old_op_id = op_id$
                    old_cc_computer = cc_computer$
                    ]
                ]
        ]

#p_affich_param #0059 endroit pour afficher les parametres d'une operation
            #if tool_op <> 2 & opcode <> 16,  # si operation autre que du percage2 ou 5 axes, alors ...
                          #[
                         # if old_op_id <> op_id , num, "(", type_comp, ")", e$
                          #]
           #old_op_id = op_id

#0012**************************** Affichage des commentaires de début d'OP en entete Prog.
stextentete : ""
stextecoupe : ""
svide : " "
svide2 : ""
svirgule : ","

#sposiNomprog "/PROGRAMMEUR/"
sposiClient : "/CLIENT/"
sposiPiece : "/NOM PIECE/"
sposiNumplan : "/NUM PLAN/"
sposiIndiceplan : "/INDICE/"
#Textes origines
#sposiX "/X/"
#sposiY "/Y/"
#sposiZ "/Z/"
#Texte Orientation
#sposiOrient "/ORIENTATION/"
#Texte Divers
sposInfos : "/INFO/"
#sposivirgule : ""    # la virgule indique le saut à la ligne
sSlash : "/"    #0120

#fmt 7 posiNomprog
fmt 7 posiClient
fmt 7 posiNomPiece
fmt 7 posiNumplan
fmt 7 posiIndiceplan
#fmt 7 posiX
#fmt 7 posiY
#fmt 7 posiZ
#fmt 7 posiOrientation
fmt 7 posiInfo
fmt 7 posivirgule
fmt 7 posicoupe
fmt 7 posiSlash #0120
fmt 7 long_TEXTE

ptextentete

    stextentete = scomm$
    long_TEXTE = strlen(stextentete)    #0120
    #posiNomprog = strstr(sposiNomprog, stextentete)
    posiClient = strstr(sposiClient, stextentete)
    posiNomPiece = strstr(sposiPiece, stextentete)
    posiNumplan = strstr(sposiNumplan, stextentete)
    posiIndiceplan = strstr(sposiIndiceplan, stextentete)
    #posiX = strstr(sposiX, stextentete)
    #posiY = strstr(sposiY, stextentete)
    #posiZ = strstr(sposiZ, stextentete)
    #posiOrientation = strstr(sposiOrient, stextentete)
    posiInfo = strstr(sposInfos, stextentete)
    #posivirgule = strstr(svirgule, stextentete)
    posiSlash = strstr(sSlash, stextentete) #0120

    longTexte = 1           #0026
        #if posiNomprog <>0,
            #[
            #posicoupe = posiNomprog+13
            #pcoupetexte
            #n, " ; PAR:", stextecoupe, e
            #]
        if posiClient >0,
            [
            posicoupe = posiClient+8
            pcoupetexte
            "( CLIENT.", stextecoupe, ")", e$
            ]
        if posiNomPiece >0,
            [
            posicoupe = posiNomPiece+11
            pcoupetexte
            "( PIECE.", stextecoupe, ")", e$
            ]
        if posiNumplan >0,
            [
            posicoupe = posiNumplan+10
            pcoupetexte
            "( PLAN.",stextecoupe, ")", e$
            ]
        if posiIndiceplan >0,
            [
            posicoupe = posiIndiceplan+8
            pcoupetexte
            "( INDICE.",stextecoupe, ")", e$
            ]
        #if posiX >0,
            #[
            #posicoupe = posiX+3
            #pcoupetexte
            #n, " ; ORIGINE:", e, n, " ; X:", stextecoupe, e
            #]
        #if posiY >0,
            #[
            #posicoupe = posiY+3
            #pcoupetexte
            #n, " ; Y:", stextecoupe, e
            #]
        #if posiZ >0,
            #[
            #posicoupe = posiZ+3
            #pcoupetexte
            #n, " ; Z:",stextecoupe, e, n, " ; A: 0", e, n, " ; C: 0", e
            #]
        #if posiOrientation >0,
            #[
            #posicoupe = posiOrientation+13
            #pcoupetexte
            #n, " ; ORIENTATION PIECE",e, n, " ;", stextecoupe, e
            #]
        if posiInfo >0,
            [
            posicoupe = posiInfo+6
            pcoupetexte
            "( -------------------)", e$
            "(", stextecoupe, ")", e$
            ]
        #if posivirgule > 0,
            #[
            #posicoupe = posivirgule+1
            #pcoupetexte
            #"(",stextecoupe, ")", e$
            #]
        if posiSlash = 0 & long_TEXTE > 0,  #0120
            [
            n$, " (", scomm$, ")", e$
            ]

pcoupetexte #coupe le texte
            stextecoupe = brksps(posicoupe, stextentete)

#0030------------------------ RENOMMER LE FICHIER NC EN FONCTION DU NUMERO DE PROGRAMME -------------------------

snom_nc : ""         # STRING de stockage du non du NC complet avec chemin et extension style c:\cfao\prog-cn\TOTO.NC
snom_numero : ""     # STRING de stockage du non du NC sous forme O0123.nc avec chemin et extesion style c:\cfao\prog-cn\ous forme O0123.NC
spoint : ""      # STRING du POINT pour l'extenssion (.NC)
#stringo        # STRING du O pour le non (O0123) en nom du Numero PRG
#seditor    "C:\WINNT\system32\notepad.exe  # non de l'editeur pour les prog en nom du Numero PRG (avec chemin complet si pas dans Windows)
#seditor : "C:\WINDOWS\notepad.exe"    #XP non de l'editeur pour les prog en nom du Numero PRG (avec chemin complet si pas dans Windows)
#seditor    "C:\Program Files\Microsoft Office\Office\WINWORD.EXE"  #ouvrir avec WORD
#seditor    "C:\Mcam91\Common\Editors\Cedit\CIMCOEdit.exe"  #ouvrir avec CIMCOEDIT (ne fonctionne pas)
seditor    : "D:\Program Files\Mcam2017\Extensions\CodeExpert.exe"    #NOUVEL EDITEUR MC"

sdebut : "T"
smachine : "-MO"
snouv_nom : ""
schange_nom_fichier : "" #nouveau nom uniquement, sans le chemin
snomprogentete : ""
#stournage_ "\TOURNAGE\"
#stous_clients "\TOUS_CLIENTS\"
sext : ""    #extention
spoint2 : "."      #0040 STRING du POINT pour l'extenssion (.NC) UNIQUEMENT pour les entêtes prog.
fmt 7 posipoint
#fmt 7 posiTournage_
#fmt 7 posiTous_clients
sfileops : ""                # string du nom du fichier OPS
sops : ".ops"             # extention des fichier OPS
spathnc_ : "C:\MASTERCAM FICAM\ISO\" #0040 chemin pour les fichiers ISO

sdebut2 : "PR"    #0300
snom_entete : ""     #0300
#sprogno = progno$

pnom_nc     # Génération des noms du fichier NC
        #snom_fichier = sdebut+snamenci+smachine+spoint+sextnc
        snom_nc = spathnc_+snamenc$+spoint+sextnc$             # Fichier NC en cours de creation sous forme toto.nc
        #snom_numero = no2str (progno)
        snouv_nom = spathnc_+sdebut2+snamenci$+spoint+sextnc$  # nouveau non de fichier NC sous forme PR000****.H
        schange_nom_fichier = snouv_nom
        snom_entete = sdebut+smcname$+smachine+spoint+sextnc$ #0300 nouveau non de fichier NC sous forme F15662-A-2-HE.H  AFFICHE EN COMMENTAIRE

        smcpath$ = ucase (smcpath$)     #retourne le chemin du fichier CN
        smcname$ = ucase (smcname$)     #Nom du fichier NC
        smcext$ = ucase (smcext$)       #retourne l'extention du pst
        snamepst$ = ucase (snamepst$)   #retourne le nom du pst

ptest_nom   # test du non du fichier NC si O0123.NC
        #progno2 = progno
        if fexist (snouv_nom), pchange_nom
            #[
            #Q10
         #pchange_nom   #ex #snom_numero
        #if remplace = 0, pchange_nom
        #if remplace = 1, result = remove (snouv_nom)
            #pchange_nom
            #snouv_nom = schange_nom_fichier
            #]
        pmodif_nom_entete

pchange_nom     # changer le numéro de prog si fichier exite déja
        while fexist (snouv_nom),       #(snom_numero)
            [
            q10
            #snom_numero = no2str (progno)
            #snouv_nom = spathnc+sdebut+snouv_nom+smachine+spoint+sextnc
        snouv_nom = schange_nom_fichier
            ]
        pmodif_nom_entete

pmodif_nom_entete   #modif nom au début et fin de l'ISO
        snomprogentete = snouv_nom

        #posiTous_clients = strstr(stous_clients, snomprogentete)
        #posiTous_clients = posiTous_clients + 14

        snomprogentete = brksps(25,snomprogentete)

        #if posiTous_clients > 15,
            #[
            #snomprogentete = brksps(posiTous_clients,snomprogentete)
            #]
        #else,
            #[
            #posiTournage_ = strstr(stournage_, snomprogentete)
            #posiTournage_ = posiTournage_ + 10
            #snomprogentete = brksps(posiTournage_,snomprogentete)
            #]
        #enlever l'extention de fichier ex: .H
        #ex. string2 = brksps (posipoint, string1)
        #   string1 = O1235     string2 = txt
        posipoint = strstr(spoint2, snomprogentete) #0040
        sext = brksps (posipoint, snomprogentete)


ppost$       # traitement après post pro pour effacer le fichier OPS et renommer le fichier NC
        if change_nom = 0, ex$           # pour 0 = pas de changement sur le fichier
        snouv_nom = ucase(snouv_nom)
        sfileops = spathnci$ + snamenci$ + sops     #non du fichier ops
        result = remove (sfileops)                  #éfface le fichier ops (si existant, en fonction de la question 1524 du PST
                                                    #ou d'après la config MC, fichier utile pour les params surep...
        result = remove (snouv_nom)                 #efface fichier en nom numero
        result = rename (snom_nc, snouv_nom)        #renomer fichier NC en nom numero
        snouv_nom = sguillemet + snouv_nom + sguillemet #0040
        result = launch (seditor, snouv_nom)        #lancer le blocnote

[ENDBIN]
# --------------------------------------------------------------------------
# Numbered questions for Mastercam --  Used by Lathe 9
# --------------------------------------------------------------------------
38. Rapid feedrate? 300.0
1538. Rapid feedrate (metric)? 16000.0

80. Communications port number for receive and transmit (1 or 2) ? 2
81. Data rate (110,150,300,600,1200,2400,4800,9600,14400,19200,38400)? 1200
82. Parity (E/O/N)? E
83. Data bits (7 or 8)? 7
84. Stop bits (1 or 2)? 2
85. Strip line feeds? N
86. Delay after end of line (seconds)? 0
87. Ascii, Eia, or Binary (A/E/B)? A
88. Echo keyboard to screen in terminal emulation? N
89. Strip carriage returns? N

90. Drive and subdirectory for NC files?
91. Name of executable post processor? MPL
92. Name of reverse post processor? RPL
93. Reverse post PST file name? RPL_GEN

100. Number of places BEFORE the decimal point for sequence numbers? -1
101. Number of places AFTER the decimal point for sequence numbers? -1
103. Maximum spindle speed? 3000
107. Average time for tool change (seconds)? 3.
108. Name of associated Mill post? MPLFAN

161. Enable Home Position button? y
162. Enable Reference Point button? y
163. Enable Misc. Values button? y
164. Enable Rotary Axis button? y
165. Enable Tool Plane button? y
166. Enable Construction Plane button? y
167. Enable Tool Display button? y
168. Check tplane during automatic work origin creation? y

# --------------------------------------------------------------------------
# Default Miscellaneous Real Values, see lathe defaults below
# --------------------------------------------------------------------------
201. Default miscellaneous real variable 1 (mr1)? 0.0
202. Default miscellaneous real variable 2 (mr2)? 0.0
203. Default miscellaneous real variable 3 (mr3)? 0.0
204. Default miscellaneous real variable 4 (mr4)? 0.0
205. Default miscellaneous real variable 5 (mr5)? 0.0
206. Default miscellaneous real variable 6 (mr6)? 0.0
207. Default miscellaneous real variable 7 (mr7)? 0.0
208. Default miscellaneous real variable 8 (mr8)? 0.0
209. Default miscellaneous real variable 9 (mr9)? 0.0
210. Default miscellaneous real variable 10 (mr10)? 0.0

# --------------------------------------------------------------------------
# Default Miscellaneous Real Values (METRIC)
# --------------------------------------------------------------------------
1601. Default miscellaneous real variable 1 (mr1) (metric)? 0.0
1602. Default miscellaneous real variable 2 (mr2) (metric)? 0.0
1603. Default miscellaneous real variable 3 (mr3) (metric)? 0.0
1604. Default miscellaneous real variable 4 (mr4) (metric)? 0.0
1605. Default miscellaneous real variable 5 (mr5) (metric)? 0.0
1606. Default miscellaneous real variable 6 (mr6) (metric)? 0.0
1607. Default miscellaneous real variable 7 (mr7) (metric)? 0.0
1608. Default miscellaneous real variable 8 (mr8) (metric)? 0.0
1609. Default miscellaneous real variable 9 (mr9) (metric)? 0.0
1610. Default miscellaneous real variable 10 (mr10) (metric)? 0.0

# --------------------------------------------------------------------------
# Enable/Disable Miscellaneous Real Variable switches
# --------------------------------------------------------------------------
1611. Enable miscellaneous real variable 1? y
1612. Enable miscellaneous real variable 2? y
1613. Enable miscellaneous real variable 3? y
1614. Enable miscellaneous real variable 4? y
1615. Enable miscellaneous real variable 5? y
1616. Enable miscellaneous real variable 6? y
1617. Enable miscellaneous real variable 7? y
1618. Enable miscellaneous real variable 8? y
1619. Enable miscellaneous real variable 9? y
1620. Enable miscellaneous real variable 10? y

# --------------------------------------------------------------------------
# Default Miscellaneous Integer Values, see lathe defaults below
# --------------------------------------------------------------------------
301. Work coordinate (-1=REF, 0=G50, 1=HOME, 2=G54's)? 1
302. Top Level absolute/incremental (0=ABS, 1=INC)? 0
303. G28 or G30 return (0=G28, 1=G30)? 0
304. Can Conversion Cycles (Mill 1 or -1)? 0
305. Default miscellaneous integer variable 5 (mi5)? 0
306. Default miscellaneous integer variable 6 (mi6)? 0
307. Default miscellaneous integer variable 7 (mi7)? 0
308. Default miscellaneous integer variable 8 (mi8)? 0
309. Default miscellaneous integer variable 9 (mi9)? 0
310. Default miscellaneous integer variable 10 (mi10)? 0

# --------------------------------------------------------------------------
# Enable/Disable Miscellaneous Integer Variable switches
# --------------------------------------------------------------------------
1621. Enable miscellaneous integer variable 1? y
1622. Enable miscellaneous integer variable 2? y
1623. Enable miscellaneous integer variable 3? y
1624. Enable miscellaneous integer variable 4? y
1625. Enable miscellaneous integer variable 5? y
1626. Enable miscellaneous integer variable 6? y
1627. Enable miscellaneous integer variable 7? y
1628. Enable miscellaneous integer variable 8? y
1629. Enable miscellaneous integer variable 9? y
1630. Enable miscellaneous integer variable 10? y

# --------------------------------------------------------------------------
# Configuration File association parameters (default is "y")
# --------------------------------------------------------------------------
#400. Name of associated cfg file?
401. Read SYSTEM COLORS section? y
402. Read ALLOCATIONS section? y
403. Read TOLERANCES section? y
404. Read DATA PATHS section? y
405. Read COMMUNICATIONS section? y
406. Read DRAFT SETTINGS section? y
407. Read MISCELLANEOUS section? y
408. Read NC SETTINGS section? y
409. Read DIALOG SCRIPTS section? y
410. Read DESIGN SETTINGS section? y
411. Read PLOTTER SETTINGS section? y
412. Read ALT-KEY ASSIGNMENTS section? y
413. Read CAD section? y
414. Read START/EXIT section? y
415. Read SCREEN section? y
416. Read FILE NAMES section? y

1501. Insert parameter information in the ascii NCI? y
1502. Write operation information to binary file (.ops)? n

1520. Display a warning when cutter compensation in control simulation finds an error? n

# Do NOT manually change the answer for Q.1999 !
1999. Product major version number that post supports? 9

3001. Machine acceleration? 2
3002. Timing size? .1

3010. Minimum inch/revolution feedrate? .002
3011. Minimum mm/revolution feedrate? .02

3020. Enable canned roughing turning (Post must support these operations)? y
3021. Enable canned roughing pattern repeat? y
3022. Enable canned grooving? y
3023. Enable canned threading? y
3024. Enable canned finish? y

3040. Enable canned groove wall taper? n
3041. Enable canned groove radius on corners? n
3042. Enable canned groove radius on chamfer? n
3043. Enable canned groove rough pecking? y
3044. Enable canned groove rough depth cuts? y
3045. Enable canned groove dwell? n
3046. Enable canned groove chamfer on corners? n

3050. Enable canned thread equal depths? y
3051. Enable canned thread equal area? y
3052. Enable canned thread multiple starts? y
3053. Enable canned thread anticipated pulloff? y

# --------------------------------------------------------------------------
# Lathe misc reals
# --------------------------------------------------------------------------
#3201. Default lathe miscellaneous real variable 1 (mr1)? 0.0
#3202. Default lathe miscellaneous real variable 2 (mr2)? 0.0
#3203. Default lathe miscellaneous real variable 3 (mr3)? 0.0
#3204. Default lathe miscellaneous real variable 4 (mr4)? 0.0
#3205. Default lathe miscellaneous real variable 5 (mr5)? 0.0
#3206. Default lathe miscellaneous real variable 6 (mr6)? 0.0
#3207. Default lathe miscellaneous real variable 7 (mr7)? 0.0
#3208. Default lathe miscellaneous real variable 8 (mr8)? 0.0
#3209. Default lathe miscellaneous real variable 9 (mr9)? 0.0
#3210. Default lathe miscellaneous real variable 10 (mr10)? 0.0

# --------------------------------------------------------------------------
# Enable/Disable LATHE Miscellaneous Real Variable switches
# --------------------------------------------------------------------------
1631. Enable lathe miscellaneous real variable 1? y
1632. Enable lathe miscellaneous real variable 2? y
1633. Enable lathe miscellaneous real variable 3? y
1634. Enable lathe miscellaneous real variable 4? y
1635. Enable lathe miscellaneous real variable 5? y
1636. Enable lathe miscellaneous real variable 6? y
1637. Enable lathe miscellaneous real variable 7? y
1638. Enable lathe miscellaneous real variable 8? y
1639. Enable lathe miscellaneous real variable 9? y
1640. Enable lathe miscellaneous real variable 10? y

# --------------------------------------------------------------------------
# Lathe misc integers
# --------------------------------------------------------------------------
3301. Default lathe miscellaneous integer variable 1 (mi1)? 1
3302. Default lathe miscellaneous integer variable 2 (mi2)? 0
#3303. Default lathe miscellaneous integer variable 3 (mi3)? 0
#3304. Default lathe miscellaneous integer variable 4 (mi4)? 0
#3305. Default lathe miscellaneous integer variable 5 (mi5)? 0
#3306. Default lathe miscellaneous integer variable 6 (mi6)? 0
#3307. Default lathe miscellaneous integer variable 7 (mi7)? 0
#3308. Default lathe miscellaneous integer variable 8 (mi8)? 0
#3309. Default lathe miscellaneous integer variable 9 (mi9)? 0
#3310. Default lathe miscellaneous integer variable 10 (mi10)? 0

# --------------------------------------------------------------------------
# LATHE Default Miscellaneous Real Values  (METRIC)
# --------------------------------------------------------------------------
#3601. Default lathe miscellaneous real variable 1 (mr1) (metric)? 0.0
#3602. Default lathe miscellaneous real variable 2 (mr2) (metric)? 0.0
#3603. Default lathe miscellaneous real variable 3 (mr3) (metric)? 0.0
#3604. Default lathe miscellaneous real variable 4 (mr4) (metric)? 0.0
#3605. Default lathe miscellaneous real variable 5 (mr5) (metric)? 0.0
#3606. Default lathe miscellaneous real variable 6 (mr6) (metric)? 0.0
#3607. Default lathe miscellaneous real variable 7 (mr7) (metric)? 0.0
#3608. Default lathe miscellaneous real variable 8 (mr8) (metric)? 0.0
#3609. Default lathe miscellaneous real variable 9 (mr9) (metric)? 0.0
#3610. Default lathe miscellaneous real variable 10 (mr10) (metric)? 0.0

# --------------------------------------------------------------------------
# Enable/Disable LATHE Miscellaneous Integer Variable switches
# --------------------------------------------------------------------------
1641. Enable lathe miscellaneous integer variable 1? y
1642. Enable lathe miscellaneous integer variable 2? y
1643. Enable lathe miscellaneous integer variable 3? y
1644. Enable lathe miscellaneous integer variable 4? y
1645. Enable lathe miscellaneous integer variable 5? y
1646. Enable lathe miscellaneous integer variable 6? y
1647. Enable lathe miscellaneous integer variable 7? y
1648. Enable lathe miscellaneous integer variable 8? y
1649. Enable lathe miscellaneous integer variable 9? y
1650. Enable lathe miscellaneous integer variable 10? y


[CTRL_TEXT_XML_BEGIN]  # Post text edits MUST be made with Control Definition Manager.
<?xml version="1.0" encoding="UTF-8"?>
<mp_xml_post_text xml:space="preserve">
	<control>
		<control_label>CTRL_MT_MILL|DEFAULT</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Bore #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
		</drill_cycle_descriptions>
		<canned_text>
			<canned_text_1>
				<text>Stop</text>
			</canned_text_1>
			<canned_text_2>
				<text>Ostop</text>
			</canned_text_2>
			<canned_text_3>
				<text>Bld on = /</text>
			</canned_text_3>
			<canned_text_4>
				<text>bLd off = SANS /</text>
			</canned_text_4>
			<canned_text_5>
				<text>rEt. tlstk</text>
			</canned_text_5>
			<canned_text_6>
				<text>adV. tlstk</text>
			</canned_text_6>
			<canned_text_7>
				<text>Ret. chute</text>
			</canned_text_7>
			<canned_text_8>
				<text>Adv. chute</text>
			</canned_text_8>
			<canned_text_9>
				<text>eXstp on G9</text>
			</canned_text_9>
			<canned_text_10>
				<text>exstP off G9</text>
			</canned_text_10>
		</canned_text>
	</control>
<control>
		<control_label>CTRL_MT_MILL|MORI SEIKI BI-BROCHES ET FR</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Bore #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>Shift</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
		</drill_cycle_descriptions>
		<canned_text>
			<canned_text_1>
				<text>Stop</text>
			</canned_text_1>
			<canned_text_2>
				<text>Ostop</text>
			</canned_text_2>
			<canned_text_3>
				<text>Bld on = /</text>
			</canned_text_3>
			<canned_text_4>
				<text>bLd off = SANS /</text>
			</canned_text_4>
			<canned_text_5>
				<text>rEt. tlstk</text>
			</canned_text_5>
			<canned_text_6>
				<text>adV. tlstk</text>
			</canned_text_6>
			<canned_text_7>
				<text>Ret. chute</text>
			</canned_text_7>
			<canned_text_8>
				<text>Adv. chute</text>
			</canned_text_8>
			<canned_text_9>
				<text>eXstp on G9</text>
			</canned_text_9>
			<canned_text_10>
				<text>exstP off G9</text>
			</canned_text_10>
		</canned_text>
	</control>
	<control>
		<control_label>CTRL_MT_LATHE|DEFAULT</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Alésage #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_9>
		<drill_cycle_10>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_10>
		<drill_cycle_11>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_11>
		<drill_cycle_12>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_12>
		<drill_cycle_13>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_13>
		<drill_cycle_14>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_14>
		<drill_cycle_15>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_15>
		<drill_cycle_16>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_16>
		<drill_cycle_17>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_17>
		<drill_cycle_18>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_18>
		<drill_cycle_19>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_19>
		<drill_cycle_20>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>Custom drill cycle #16</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>Custom drill cycle #17</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>Custom drill cycle #18</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>Custom drill cycle #19</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>Custom drill cycle #20</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
	<control>
		<control_label>CTRL_MT_LATHE|MORI SEIKI BI-BROCHES ET FR</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Alésage #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_9>
		<drill_cycle_10>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_10>
		<drill_cycle_11>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_11>
		<drill_cycle_12>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_12>
		<drill_cycle_13>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_13>
		<drill_cycle_14>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_14>
		<drill_cycle_15>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_15>
		<drill_cycle_16>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_16>
		<drill_cycle_17>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_17>
		<drill_cycle_18>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_18>
		<drill_cycle_19>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_19>
		<drill_cycle_20>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>Custom drill cycle #16</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>Custom drill cycle #17</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>Custom drill cycle #18</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>Custom drill cycle #19</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>Custom drill cycle #20</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
	<control>
		<control_label>CTRL_MT_MILL|L_FAGOR-8065T-MCU_DELTAMAB-400_CY_P</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Bore #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>Feed rate</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
		</drill_cycle_descriptions>
		<canned_text>
			<canned_text_1>
				<text>Stop</text>
			</canned_text_1>
			<canned_text_2>
				<text>Ostop</text>
			</canned_text_2>
			<canned_text_3>
				<text>Bld on = /</text>
			</canned_text_3>
			<canned_text_4>
				<text>bLd off = SANS /</text>
			</canned_text_4>
			<canned_text_5>
				<text>rEt. tlstk</text>
			</canned_text_5>
			<canned_text_6>
				<text>adV. tlstk</text>
			</canned_text_6>
			<canned_text_7>
				<text>Ret. chute</text>
			</canned_text_7>
			<canned_text_8>
				<text>Adv. chute</text>
			</canned_text_8>
			<canned_text_9>
				<text>eXstp on G9</text>
			</canned_text_9>
			<canned_text_10>
				<text>exstP off G9</text>
			</canned_text_10>
		</canned_text>
	</control>
	<control>
		<control_label>CTRL_MT_LATHE|L_FAGOR-8065T-MCU_DELTAMAB-400_CY_P</control_label>
		<language>fr-FR</language>
		<misc_integers>
			<misc_1>
				<text>Work Pos. [-1=REF,0=G50,1=HOME,2=G54s]</text>
				<value>1</value>
			</misc_1>
			<misc_2>
				<text>Abs/Inc. [0=ABS, 1=INC]</text>
			</misc_2>
			<misc_3>
				<text>Ref. Return [0=G28,1=G30]</text>
			</misc_3>
			<misc_4>
				<text>1/-1=G107/112=Y0=C 0=USI.XYZ</text>
				<value>1</value>
			</misc_4>
			<misc_5>
				<text>Activer blocages 0/deblocages 1 BR.</text>
			</misc_5>
			<misc_6>
				<text>Misc. integer [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. integer [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. integer [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. integer [9]</text>
			</misc_9>
			<misc_10>
				<text>CRF X value [0=orig,1=post]</text>
			</misc_10>
		</misc_integers>
		<misc_reals>
			<misc_1>
				<text>Misc. real [1]</text>
			</misc_1>
			<misc_2>
				<text>Misc. real [2]</text>
			</misc_2>
			<misc_3>
				<text>Misc. real [3]</text>
			</misc_3>
			<misc_4>
				<text>Misc. real [4]</text>
			</misc_4>
			<misc_5>
				<text>Misc. real [5]</text>
			</misc_5>
			<misc_6>
				<text>Misc. real [6]</text>
			</misc_6>
			<misc_7>
				<text>Misc. real [7]</text>
			</misc_7>
			<misc_8>
				<text>Misc. real [8]</text>
			</misc_8>
			<misc_9>
				<text>Misc. real [9]</text>
			</misc_9>
			<misc_10>
				<text>Misc. real [10]</text>
			</misc_10>
		</misc_reals>
		<simple_drill>
			<description>
				<text>Perçage / Lamage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</simple_drill>
		<peck_drill>
			<description>
				<text>Perçage avec débourrage</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<subsequent_peck>
				<text>Profondeur mini</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Approche rapide 0.5</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</peck_drill>
		<chip_break>
			<description>
				<text>Brise-Copeau</text>
			</description>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<peck_clearance>
				<text>Approche rapide</text>
			</peck_clearance>
			<retract_amount>
				<text>Retrait rapide</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</chip_break>
		<tap>
			<feed_rate>
				<text>Position X de perçage</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
		</tap>
		<bore1>
			<description>
				<text>Alésoire alésage</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<dwell>
				<text>Tempo</text>
			</dwell>
			<clearance>
				<text>Clearance...</text>
			</clearance>
			<retract>
				<text>Retract...</text>
			</retract>
			<depth>
				<text>Depth...</text>
			</depth>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>F RETOUR</text>
			</shift>
		</bore1>
		<bore2>
			<description>
				<text>Alésage #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>""</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>""</text>
			</shift>
		</bore2>
		<misc1>
			<description>
				<text>Misc. #1</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>""</text>
			</subsequent_peck>
			<peck_clearance>
				<text>""</text>
			</peck_clearance>
			<retract_amount>
				<text>""</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc1>
		<misc2>
			<description>
				<text>Misc. #2</text>
			</description>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract>
				<text>Garde</text>
			</retract>
			<first_peck>
				<text>1st peck</text>
			</first_peck>
			<subsequent_peck>
				<text>Subsequent peck</text>
			</subsequent_peck>
			<peck_clearance>
				<text>Peck clearance</text>
			</peck_clearance>
			<retract_amount>
				<text>Retract amount</text>
			</retract_amount>
			<shift>
				<text>Shift</text>
			</shift>
		</misc2>
		<drill_cycle_9>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_9>
		<drill_cycle_10>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_10>
		<drill_cycle_11>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_11>
		<drill_cycle_12>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_12>
		<drill_cycle_13>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_13>
		<drill_cycle_14>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_14>
		<drill_cycle_15>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_15>
		<drill_cycle_16>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_16>
		<drill_cycle_17>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_17>
		<drill_cycle_18>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_18>
		<drill_cycle_19>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_19>
		<drill_cycle_20>
			<feed_rate>
				<text>""</text>
			</feed_rate>
			<clearance>
				<text>Plan de sécurité</text>
			</clearance>
			<retract_amount>
				<text>Retrait</text>
			</retract_amount>
		</drill_cycle_20>
		<simple_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 1</text>
			</description>
			<parameter_1>
				<text>1-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>1-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>1-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>1-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>1-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>1-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>1-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>1-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>1-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>1-Drill parameter #10</text>
			</parameter_10>
		</simple_drill_custom_parameters>
		<peck_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 2</text>
			</description>
			<parameter_1>
				<text>2-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>2-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>2-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>2-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>2-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>2-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>2-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>2-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>2-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>2-Drill parameter #10</text>
			</parameter_10>
		</peck_drill_custom_parameters>
		<chip_break_drill_custom_parameters>
			<description>
				<text>Custom Drill Parameters 3</text>
			</description>
			<parameter_1>
				<text>3-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>3-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>3-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>3-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>3-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>3-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>3-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>3-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>3-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>3-Drill parameter #10</text>
			</parameter_10>
		</chip_break_drill_custom_parameters>
		<tap_custom_parameters>
			<description>
				<text>Custom Drill Parameters 4</text>
			</description>
			<parameter_1>
				<text>4-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>4-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>4-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>4-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>4-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>4-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>4-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>4-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>4-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>4-Drill parameter #10</text>
			</parameter_10>
		</tap_custom_parameters>
		<bore1_custom_parameters>
			<description>
				<text>Custom Drill Parameters 5</text>
			</description>
			<parameter_1>
				<text>5-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>5-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>5-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>5-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>5-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>5-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>5-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>5-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>5-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>5-Drill parameter #10</text>
			</parameter_10>
		</bore1_custom_parameters>
		<bore2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 6</text>
			</description>
			<parameter_1>
				<text>6-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>6-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>6-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>6-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>6-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>6-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>6-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>6-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>6-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>6-Drill parameter #10</text>
			</parameter_10>
		</bore2_custom_parameters>
		<misc2_custom_parameters>
			<description>
				<text>Custom Drill Parameters 8</text>
			</description>
			<parameter_1>
				<text>8-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>8-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>8-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>8-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>8-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>8-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>8-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>8-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>8-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>8-Drill parameter #10</text>
			</parameter_10>
		</misc2_custom_parameters>
		<drill_cycle_9_custom_parameters>
			<description>
				<text>Custom Drill Parameters 9</text>
			</description>
			<parameter_1>
				<text>9-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>9-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>9-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>9-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>9-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>9-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>9-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>9-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>9-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>9-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_9_custom_parameters>
		<drill_cycle_10_custom_parameters>
			<description>
				<text>Custom Drill Parameters 10</text>
			</description>
			<parameter_1>
				<text>10-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>10-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>10-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>10-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>10-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>10-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>10-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>10-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>10-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>10-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_10_custom_parameters>
		<drill_cycle_11_custom_parameters>
			<description>
				<text>Custom Drill Parameters 11</text>
			</description>
			<parameter_1>
				<text>11-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>11-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>11-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>11-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>11-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>11-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>11-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>11-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>11-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>11-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_11_custom_parameters>
		<drill_cycle_12_custom_parameters>
			<description>
				<text>Custom Drill Parameters 12</text>
			</description>
			<parameter_1>
				<text>12-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>12-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>12-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>12-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>12-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>12-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>12-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>12-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>12-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>12-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_12_custom_parameters>
		<drill_cycle_13_custom_parameters>
			<description>
				<text>Custom Drill Parameters 13</text>
			</description>
			<parameter_1>
				<text>13-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>13-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>13-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>13-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>13-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>13-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>13-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>13-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>13-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>13-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_13_custom_parameters>
		<drill_cycle_14_custom_parameters>
			<description>
				<text>Custom Drill Parameters 14</text>
			</description>
			<parameter_1>
				<text>14-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>14-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>14-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>14-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>14-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>14-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>14-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>14-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>14-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>14-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_14_custom_parameters>
		<drill_cycle_15_custom_parameters>
			<description>
				<text>Custom Drill Parameters 15</text>
			</description>
			<parameter_1>
				<text>15-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>15-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>15-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>15-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>15-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>15-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>15-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>15-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>15-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>15-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_15_custom_parameters>
		<drill_cycle_16_custom_parameters>
			<description>
				<text>Custom Drill Parameters 16</text>
			</description>
			<parameter_1>
				<text>16-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>16-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>16-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>16-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>16-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>16-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>16-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>16-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>16-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>16-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_16_custom_parameters>
		<drill_cycle_18_custom_parameters>
			<description>
				<text>Custom Drill Parameters 18</text>
			</description>
			<parameter_1>
				<text>18-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>18-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>18-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>18-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>18-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>18-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>18-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>18-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>18-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>18-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_18_custom_parameters>
		<drill_cycle_19_custom_parameters>
			<description>
				<text>Custom Drill Parameters 19</text>
			</description>
			<parameter_1>
				<text>19-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>19-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>19-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>19-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>19-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>19-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>19-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>19-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>19-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>19-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_19_custom_parameters>
		<drill_cycle_20_custom_parameters>
			<description>
				<text>Custom Drill Parameters 20</text>
			</description>
			<parameter_1>
				<text>20-Drill parameter #1</text>
			</parameter_1>
			<parameter_2>
				<text>20-Drill parameter #2</text>
			</parameter_2>
			<parameter_3>
				<text>20-Drill parameter #3</text>
			</parameter_3>
			<parameter_4>
				<text>20-Drill parameter #4</text>
			</parameter_4>
			<parameter_5>
				<text>20-Drill parameter #5</text>
			</parameter_5>
			<parameter_6>
				<text>20-Drill parameter #6</text>
			</parameter_6>
			<parameter_7>
				<text>20-Drill parameter #7</text>
			</parameter_7>
			<parameter_8>
				<text>20-Drill parameter #8</text>
			</parameter_8>
			<parameter_9>
				<text>20-Drill parameter #9</text>
			</parameter_9>
			<parameter_10>
				<text>20-Drill parameter #10</text>
			</parameter_10>
		</drill_cycle_20_custom_parameters>
		<drill_cycle_descriptions>
			<simple_drill>
				<text>G83 Perçage / Lamage</text>
			</simple_drill>
			<peck_drill>
				<text>Perçage avec débourrage</text>
			</peck_drill>
			<chip_break>
				<text>Brise-Copeau</text>
			</chip_break>
			<tapping>
				<text>Taraudage</text>
			</tapping>
			<boring_1>
				<text>Boring #1 Fraisage G85 - Tempo sortie travail</text>
			</boring_1>
			<boring_2>
				<text>Boring #2 Fraisage G86 - arrêt broche - sortie rapide</text>
			</boring_2>
			<misc_drill_1>
				<text>Misc #1 Fraisage G87 Perçage</text>
			</misc_drill_1>
			<misc_drill_2>
				<text>Misc #2 Fraisage G88 Perçage</text>
			</misc_drill_2>
			<custom_drill_9>
				<text>Custom drill cycle #9</text>
			</custom_drill_9>
			<custom_drill_10>
				<text>Custom drill cycle #10</text>
			</custom_drill_10>
			<custom_drill_11>
				<text>Custom drill cycle #11</text>
			</custom_drill_11>
			<custom_drill_12>
				<text>Custom drill cycle #12</text>
			</custom_drill_12>
			<custom_drill_13>
				<text>Custom drill cycle #13</text>
			</custom_drill_13>
			<custom_drill_14>
				<text>Custom drill cycle #14</text>
			</custom_drill_14>
			<custom_drill_15>
				<text>Custom drill cycle #15</text>
			</custom_drill_15>
			<custom_drill_16>
				<text>Custom drill cycle #16</text>
			</custom_drill_16>
			<custom_drill_17>
				<text>Custom drill cycle #17</text>
			</custom_drill_17>
			<custom_drill_18>
				<text>Custom drill cycle #18</text>
			</custom_drill_18>
			<custom_drill_19>
				<text>Custom drill cycle #19</text>
			</custom_drill_19>
			<custom_drill_20>
				<text>Custom drill cycle #20</text>
			</custom_drill_20>
		</drill_cycle_descriptions>
	</control>
</mp_xml_post_text>
[CTRL_TEXT_XML_END]
